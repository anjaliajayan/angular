<div class="ui top attached tabular menu ">
  <div class="item " data-tab="first" routerLink="/report/booking-report">
    Booking
  </div>
  <div class="item " data-tab="second" routerLink="/report/segment-report">Segment</div>
  <div class="item" data-tab="third" routerLink="/report/mis-report">MIS</div>
  <div class="item" data-tab="fourth" routerLink="/report/search-log-report">Search Log</div>
  <div class="item" data-tab="fifth" routerLink="/report/audit-report">Audit Trail Log</div>
  <div class="item active" data-tab="sixth" routerLink="/report/ticket-report">Ticket</div>
  <div class="item" data-tab="seventh" routerLink="/report/dynamic-report">Dynamic Report</div>

</div>
<div class="ui bottom attached tab segment tabContent-block active" data-tab="sixth">
  <div class="ui segment">
    <div class="ui fluid container">
      <div class="outer-basics">
        <form [formGroup]="ticketReportForm" (ngSubmit)="ticketSearch()" class="ui form report-form">
          <div class="field">
            <div class="outer-basicForm">
              <div class="form-inner">
                <div class="fields">
                  <!-- <div class="one wide field"></div> -->
                  <div class="six wide field">
                    <label>Agents</label>
                    <select class="ui fluid search dropdownFive multiple_search" formControlName="agentList"
                      multiple="">
                      <option class="item" *ngFor="let agent of agents" value="{{agent.agent_code}}">{{agent.name}}
                      </option>
                    </select>
                  </div>
                  <div class="five wide field">
                    <!--futur use-->
                    <!-- <select class="ui fluid  search dropdown" formControlName="productList">
                                            <option value="">Choose Products</option>
                                            <option class="item" *ngFor="let productList of productLists" value="{{productList}}">{{productList}}
                                            </option>
                                        </select> -->
                    <label>Products</label>
                    <select class="ui fluid search dropdown" formControlName="productList">
                      <option value="">Choose Products</option>
                      <option class="item" value="flights">Flights</option>
                    </select>
                  </div>
                  <div class="five wide field">
                    <label>Suppliers</label>
                    <select class="ui fluid  search dropdown" formControlName="supplierList">

                      <option class="item" *ngFor="let supplier of suppliers" value="{{supplier.supplier_id}}">
                        {{supplier.name}}</option>
                    </select>
                  </div>
                </div>
                <div class="fields agent-name-booking" *ngIf="showTicketReport">
                  <div class="eight wide field ui small header">Ticket Log</div>
                  <!-- <div class="ui divider"></div> -->
                  <div class="eight wide field bookings_btn-panel">
                    <button class="ui export button" title="Export" (click)="exportTicket()">
                      Export
                    </button>
                  </div>
                </div>
                <div class="result-block" *ngIf="showTicketReport">
                  <div class="user-table-list b2c-list-user-table" *ngIf="showTicketReport">
                    <ngx-datatable #table class='table' [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
                      [rowHeight]="'auto'" [limit]="10" [rows]='NewTicketReport' [sortType]="'multi'"
                      [reorderable]="true" [sorts]="[{prop: 'id', dir: 'desc'}]">
                      <!-- <ngx-datatable-column name="User" prop="agent_code">
                                </ngx-datatable-column> -->
                      <ngx-datatable-column name="Ticket Number" prop="ticket_number">
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Trip Id" prop="trip_id">
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Base Amount" prop="BaseFare">
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Fee and Tax" prop="Tax">
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Passenger Name">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                          <span *ngIf="row.bookings_flight.TicketContact !=null">
                            <span *ngIf="row.bookings_flight.TicketContact[0].Surname !=undefined">
                              {{row.bookings_flight.TicketContact[0].Surname}}
                            </span>
                          </span>
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Supplier Code">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                          {{row.bookings_flight.supplier.name}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Booking Status">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                          {{row.bookings_flight.booking_status}}
                        </ng-template>
                      </ngx-datatable-column>
                      <ngx-datatable-column name="Booked Date">
                        <ng-template let-row="row" ngx-datatable-cell-template>
                          {{row.bookings_flight.created | date: 'dd/MM/yyyy' }}
                        </ng-template>
                      </ngx-datatable-column>
                    </ngx-datatable>
                  </div>
                </div>
                <div class="fields text-right">
                  <div class="sixteen wide field btn-wrapper">
                    <div class="bookings_btn-panel">
                      <button class="ui primary reset button" (click)="reset()" title="Reset">
                        <i class="undo icon"></i>
                      </button>
                      <button class="ui primary  button">
                        Search
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </form>
        <div class="result-block" *ngIf="bookingsLoader">
          <div class="ui segment b2c-list-user-table__segment-loader" *ngIf="bookingsLoader">
            <div class="ui active inverted dimmer">
              <div class="ui text loader">Loading Report...</div>
            </div>
            <p></p>
          </div>
        </div>
        <div class="fields agent-name-booking" *ngIf="showTicketReport">
          <div class="eight wide field ui small header">Ticket Log</div>
          <!-- <div class="ui divider"></div> -->
          <div class="eight wide field bookings_btn-panel">
            <button class="ui export button" title="Export">
              Export
            </button>
          </div>
        </div>
        <div class="result-block" *ngIf="showTicketReport">
          <div class="user-table-list b2c-list-user-table" *ngIf="showTicketReport">
            <ngx-datatable #table class='table' [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
              [rowHeight]="'auto'" [limit]="10" [rows]='NewTicketReport' [sortType]="'multi'" [reorderable]="true"
              [sorts]="[{prop: 'id', dir: 'desc'}]">
              <!-- <ngx-datatable-column name="User" prop="agent_code">
                                </ngx-datatable-column> -->
              <ngx-datatable-column name="Ticket Number" prop="ticket_number">
              </ngx-datatable-column>
              <ngx-datatable-column name="Trip Id" prop="trip_id">
              </ngx-datatable-column>
              <ngx-datatable-column name="Base Amount" prop="BaseFare">
              </ngx-datatable-column>
              <ngx-datatable-column name="Fee and Tax" prop="Tax">
              </ngx-datatable-column>
              <ngx-datatable-column name="Passenger Name">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  <span *ngIf="row.bookings_flight.TicketContact">
                    <span *ngIf="row.bookings_flight.TicketContact[0].Surname !=null">
                      {{row.bookings_flight.TicketContact[0].Surname}}</span>
                  </span>

                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Supplier Code">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{row.bookings_flight.supplier.name}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Booking Status">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{row.bookings_flight.booking_status}}
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Booked Date">
                <ng-template let-row="row" ngx-datatable-cell-template>
                  {{row.bookings_flight.created | date: 'dd/MM/yyyy' }}
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>