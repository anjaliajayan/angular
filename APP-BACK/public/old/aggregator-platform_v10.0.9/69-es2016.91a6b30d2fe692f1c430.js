(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"6qfD":function(t,e,o){"use strict";o.r(e);var i=o("ofXK"),r=o("lDzL"),n=o("QUrN"),a=o("3Pt+"),s=o("tyNb"),c=o("fXoL"),p=o("XE7E"),l=o("Fmdd"),u=o("5eHb"),d=o("PSD3"),b=o.n(d),m=o("AytR");function g(t,e){if(1&t&&(c.Wb(0,"option",51),c.Jc(1),c.Vb()),2&t){const t=e.$implicit;c.qc("value",t.organisation_id),c.Cb(1),c.Lc(" ",t.name," ")}}function h(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",52),c.ec("click",(function(e){return c.Ac(t),c.ic().addGroup(null)})),c.Wb(1,"span",53),c.Jc(2,"Save"),c.Vb(),c.Vb()}}function f(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",54),c.ec("click",(function(e){return c.Ac(t),c.ic().onUpdateGroup(null)})),c.Wb(1,"span",53),c.Jc(2,"Update"),c.Vb(),c.Vb()}}const _=function(t){return{error:t}};let k=(()=>{class t{constructor(t,e,o,i){this.MarkupConfigurationService=t,this.posService=e,this._formBuilder=o,this.toastr=i,this.allPos=[],this.isSubmitted=!1,this.orgArr=[],this.sendDataToParent=new c.n,this.initGroupForm()}ngOnInit(){this.fetchAllPOS({limit:1500,page:0}),this.onEditRow(this.editRow),1==this.flagDet&&0==this.flgEditDet?(this.showSaveButton=!0,this.showUpdateButton=!1,this.addGroupForm.reset()):(this.showUpdateButton=!0,this.showSaveButton=!1)}initGroupForm(){this.addGroupForm=this._formBuilder.group({name:["",a.z.required],organisation_id:[[],a.z.required],is_active:["",a.z.required],preference:["",a.z.required],start_date:[""],end_date:[""],is_stop_sale:[""],is_free_sale:[""],sale_type:[""],is_flight:[!1],is_hotel:[!1],is_car:[!1],is_transfers:[!1],is_activities:[!1],is_insurance:[!1],is_cruises:[!1],sale_id:[""],mode:[""]})}addGroup(t){this.isSubmitted=!0,this.addGroupForm.patchValue({name:this.addGroupForm.value.name,organisation_id:this.addGroupForm.value.organisation_id,is_active:this.addGroupForm.value.is_active,preference:this.addGroupForm.value.preference,start_date:this.addGroupForm.value.start_date?this.addGroupForm.value.start_date:"",end_date:this.addGroupForm.value.end_date?this.addGroupForm.value.end_date:"",is_stop_sale:this.addGroupForm.value.is_stop_sale?this.addGroupForm.value.is_stop_sale:"",is_free_sale:this.addGroupForm.value.is_free_sale?this.addGroupForm.value.is_free_sale:"",is_flight:!!this.addGroupForm.value.is_flight&&this.addGroupForm.value.is_flight,is_hotel:!!this.addGroupForm.value.is_hotel&&this.addGroupForm.value.is_hotel,is_car:!!this.addGroupForm.value.end_date&&this.addGroupForm.value.is_car,is_transfers:!!this.addGroupForm.value.is_transfers&&this.addGroupForm.value.is_transfers,is_activities:!!this.addGroupForm.value.is_activities&&this.addGroupForm.value.is_activities,is_insurance:!!this.addGroupForm.value.is_insurance&&this.addGroupForm.value.is_insurance,is_cruises:!!this.addGroupForm.value.is_cruises&&this.addGroupForm.value.is_cruises,mode:"Add"});var e=Object.assign({},this.addGroupForm.value);"freesale"==e.sale_type?(e.is_stop_sale=!1,e.is_free_sale=!0):(e.is_stop_sale=!0,e.is_free_sale=!1),this.MarkupConfigurationService.AddGroup(e).subscribe(o=>{1==o.status?(this.sendDataToParent.emit(t),this.toastr.success("Group added...!!!","Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})):this.toastr.error(null===(e.name||e.organisation_id||e.is_active||e.preference)?"Fill the mandatory fields":"Something bad happened at our end.","Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})},t=>{console.log("erer ",t),this.toastr.success(`Something bad happened at our end. ${t}`,"Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllPOS(t){this.posService.fetchAllPointofSale(t).subscribe(t=>{t.status&&(this.allPos=t.result.data)},t=>{console.log("erer ",t)})}resetAddGroupForm(){}ngAfterViewInit(){this.makeJqueryFields(),this.loadStartDate(),this.loadEndDate()}loadStartDate(){var t=this;$((function(){$('input[name="start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,o,i){moment().diff(e,"years"),t.addGroupForm.get("start_date").setValue(moment(e).format("YYYY-MM-DD"))}))}))}loadEndDate(){var t=this;$((function(){$('input[name="end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),minDate:moment(),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,o,i){moment().diff(e,"years"),t.addGroupForm.get("end_date").setValue(moment(e).format("YYYY-MM-DD"))}))}))}onEditRow(t){let e,o;if(this.is_active=0!=t.is_active?"1":"0",null!=t.preference&&(this.preference=t.preference),null!=t.organisation_id){let e=t.organisation_id;e=e.split(","),e.forEach(t=>{this.orgArr.push(t)})}0==t.is_free_sale&&1==t.is_stop_sale&&(this.saleType="stopsale",null==t.end_date&&""==t.end_date||(e=t.end_date,e=e.split("T"),e=e[0]),null==t.start_date&&""==t.start_date||(o=t.start_date,o=o.split("T"),o=o[0])),1==t.is_free_sale&&0==t.is_stop_sale&&(this.saleType="freesale",e="",o=""),this.addGroupForm.patchValue({name:t.name,organisation_id:this.orgArr,is_active:this.is_active,preference:this.preference,start_date:o,end_date:e,is_stop_sale:this.stopSale,is_free_sale:this.freeSale,is_flight:0!=t.is_flight,is_hotel:0!=t.is_hotel,is_car:0!=t.is_car,is_transfers:0!=t.is_transfers,is_activities:0!=t.is_activities,is_insurance:0!=t.is_insurance,is_cruises:0!=t.is_cruises,sale_type:this.saleType,sale_id:t.sale_id,mode:"Update"})}onUpdateGroup(t){var e=Object.assign({},this.addGroupForm.value);"freesale"==e.sale_type?(e.is_stop_sale=!1,e.is_free_sale=!0):(e.is_stop_sale=!0,e.is_free_sale=!1),this.MarkupConfigurationService.editGroup(e).subscribe(e=>{e.status?(this.sendDataToParent.emit(t),this.toastr.success("Group updateddddddddddd...!!!","Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})):this.toastr.error("Something bad happened at our end.","Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})},t=>{console.log("erer ",t),this.toastr.success(`Something bad happened at our end. ${t}`,"Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})})}resetForm(){this.addGroupForm.reset()}makeJqueryFields(){$(document).ready((function(){this._globals=localStorage.getItem("_globals");let t=JSON.parse(this._globals).token;$(".dropdownThree").dropdown("refresh"),$(".dropdownThree").dropdown({placeholder:"Select POS"}),$(".ui.dropdownThree").dropdown({type:"category",responseAsync:!0,apiSettings:{url:m.a.serverURL+"/api/organization/fetch-pos/{query}",beforeXHR:function(e){return e.setRequestHeader("Authorization",t),e},onResponse:function(t){const e={success:!0,results:[]};return $.each(t.result,(function(t,o){e.results.push({name:o.name,value:o.organisation_id})})),e}}})}))}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(p.a),c.Qb(l.a),c.Qb(a.f),c.Qb(u.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-add-group"]],inputs:{editRow:["change","editRow"],flagDet:["flag","flagDet"],flgEditDet:["flgEdit","flgEditDet"]},outputs:{sendDataToParent:"sendDataToParent"},decls:119,vars:18,consts:[[1,"outer-form"],[1,"ui","form","pos_basic_form",3,"formGroup"],[1,"field"],[1,"five","fields"],[1,"six","wide","field",3,"ngClass"],[1,"mandatory"],["type","text","formControlName","name","value","","name","groupSeasonName","placeholder","Group / Seasonality Name"],[1,"eight","wide","field",3,"ngClass"],["placeholder","Select POS","id","pos","value","","formControlName","organisation_id","multiple","","name","organisation_id",1,"ui","dropdownThree","fluid","search","multiple_search"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Status","id","dropdown-pos","formControlName","is_active","value","",1,"ui","fluid","dropdown"],["value",""],["value","1"],["value","0"],["palceholder","Preference","id","dropdown-preference","formControlName","preference","value","",1,"ui","fluid","dropdown"],["value","override"],["value","inherit"],[1,"two","wide","field","sale_check"],[1,"ui","checkbox"],["type","radio","value","freesale","name","freesale","formControlName","sale_type"],["for","freesale"],["type","radio","value","stopsale","name","stopsale","formControlName","sale_type"],["for","stopsale"],[1,"six","wide","field","bookings_pickers",3,"hidden"],[1,"ui","left","icon","input"],["type","text","placeholder","Start Date","formControlName","start_date","name","start_date","value",""],[1,"icon"],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","cal"],["type","text","placeholder","End Date","formControlName","end_date","name","end_date","value","","required",""],[1,"ui","header"],[1,"inline","fields","assign_prod"],["type","checkbox","name","flights","checked","checked","formControlName","is_flight"],["for","flights"],[1,"pos_product_check"],["type","checkbox","name","hotels","formControlName","is_hotel"],["for","hotels"],["type","checkbox","name","cars","formControlName","is_car"],["for","cars"],["type","checkbox","name","transfers","formControlName","is_transfers"],["for","transfers"],["type","checkbox","name","activities","formControlName","is_activities"],["for","activities"],["type","checkbox","name","insurances","formControlName","is_insurance"],["for","insurances"],["type","checkbox","name","cruises","formControlName","is_cruises"],["for","cruises"],[1,"pos_btn-panel","field"],[1,"bookings_btn-panel","save-btn-block"],["class","ui primary button commissionCode_btn fluid","type","submit",3,"click",4,"ngIf"],["class","ui primary button commissionCode_btn fluid",3,"click",4,"ngIf"],[3,"value"],["type","submit",1,"ui","primary","button","commissionCode_btn","fluid",3,"click"],[1,"tourCode_text"],[1,"ui","primary","button","commissionCode_btn","fluid",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"label"),c.Jc(6,"Group/Seasonality Name"),c.Wb(7,"span",5),c.Jc(8,"*"),c.Vb(),c.Vb(),c.Rb(9,"input",6),c.Vb(),c.Wb(10,"div",7),c.Wb(11,"label"),c.Jc(12,"POS"),c.Vb(),c.Wb(13,"select",8),c.Wb(14,"option",9),c.Jc(15,"Select one category "),c.Vb(),c.Hc(16,g,2,2,"option",10),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(17,"div",2),c.Wb(18,"div",3),c.Wb(19,"div",4),c.Wb(20,"label"),c.Jc(21,"Status"),c.Vb(),c.Wb(22,"select",11),c.Wb(23,"option",12),c.Jc(24," Status "),c.Vb(),c.Wb(25,"option",13),c.Jc(26,"Active"),c.Vb(),c.Wb(27,"option",14),c.Jc(28,"InActive"),c.Vb(),c.Vb(),c.Vb(),c.Wb(29,"div",4),c.Wb(30,"label"),c.Jc(31,"Preference"),c.Wb(32,"span",5),c.Jc(33,"*"),c.Vb(),c.Vb(),c.Wb(34,"select",15),c.Wb(35,"option",12),c.Jc(36," Preference "),c.Vb(),c.Wb(37,"option",16),c.Jc(38,"Override"),c.Vb(),c.Wb(39,"option",17),c.Jc(40,"Inherit"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(41,"div",2),c.Wb(42,"div",3),c.Wb(43,"div",18),c.Wb(44,"div",19),c.Rb(45,"input",20),c.Wb(46,"label",21),c.Jc(47,"Free Sale"),c.Vb(),c.Vb(),c.Vb(),c.Wb(48,"div",18),c.Wb(49,"div",19),c.Rb(50,"input",22),c.Wb(51,"label",23),c.Jc(52,"Stop Sale"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(53,"div",2),c.Wb(54,"div",3),c.Wb(55,"div",24),c.Wb(56,"label"),c.Jc(57,"Sale Start Date"),c.Vb(),c.Wb(58,"div",25),c.Rb(59,"input",26),c.Wb(60,"i",27),c.Rb(61,"img",28),c.Vb(),c.Vb(),c.Vb(),c.Wb(62,"div",24),c.Wb(63,"label"),c.Jc(64,"Sale End Date"),c.Vb(),c.Wb(65,"div",25),c.Rb(66,"input",29),c.Wb(67,"i",27),c.Rb(68,"img",28),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(69,"h4",30),c.Jc(70,"Assign Products"),c.Vb(),c.Wb(71,"div",2),c.Wb(72,"div",31),c.Wb(73,"div",2),c.Wb(74,"div",19),c.Rb(75,"input",32),c.Wb(76,"label",33),c.Wb(77,"span",34),c.Jc(78,"Flights"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(79,"div",2),c.Wb(80,"div",19),c.Rb(81,"input",35),c.Wb(82,"label",36),c.Wb(83,"span",34),c.Jc(84,"Hotels"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(85,"div",2),c.Wb(86,"div",19),c.Rb(87,"input",37),c.Wb(88,"label",38),c.Wb(89,"span",34),c.Jc(90,"Cars"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(91,"div",2),c.Wb(92,"div",19),c.Rb(93,"input",39),c.Wb(94,"label",40),c.Wb(95,"span",34),c.Jc(96,"Transfers"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(97,"div",2),c.Wb(98,"div",19),c.Rb(99,"input",41),c.Wb(100,"label",42),c.Wb(101,"span",34),c.Jc(102,"Activities"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(103,"div",2),c.Wb(104,"div",19),c.Rb(105,"input",43),c.Wb(106,"label",44),c.Wb(107,"span",34),c.Jc(108,"Insurances"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(109,"div",2),c.Wb(110,"div",19),c.Rb(111,"input",45),c.Wb(112,"label",46),c.Wb(113,"span",34),c.Jc(114,"Cruises"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(115,"div",47),c.Wb(116,"div",48),c.Hc(117,h,3,0,"button",49),c.Hc(118,f,3,0,"button",50),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.pc("formGroup",e.addGroupForm),c.Cb(3),c.pc("ngClass",c.uc(10,_,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.name.status)),c.Cb(6),c.pc("ngClass",c.uc(12,_,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.organisation_id.status)),c.Cb(6),c.pc("ngForOf",e.allPos),c.Cb(3),c.pc("ngClass",c.uc(14,_,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.is_active.status)),c.Cb(10),c.pc("ngClass",c.uc(16,_,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.preference.status)),c.Cb(26),c.pc("hidden",e.addGroupForm.controls.sale_type&&"freesale"==e.addGroupForm.controls.sale_type.value),c.Cb(7),c.pc("hidden",e.addGroupForm.controls.sale_type&&"freesale"==e.addGroupForm.controls.sale_type.value),c.Cb(55),c.pc("ngIf",e.showSaveButton),c.Cb(1),c.pc("ngIf",e.showUpdateButton))},directives:[a.B,a.p,a.i,i.n,a.c,a.o,a.h,a.y,a.s,a.A,i.o,a.x,a.u,a.w,a.a,i.p],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.outer__add-pos__title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_btn[_ngcontent-%COMP%], .tourCode_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}div.upload[_ngcontent-%COMP%]{box-sizing:border-box;height:15px;width:123px;border-radius:3px;background-color:#fff;border:.5px solid grey;box-shadow:0 .25px .1px 0 rgba(0,0,0,.5)}div.upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block!important;width:123px!important;height:15px!important;opacity:0!important;overflow:hidden!important}.file_choose[_ngcontent-%COMP%]{position:relative;left:27px;bottom:6px;color:#4f4f4f;font-family:Roboto,sans-serif;font-size:9px;line-height:10px}.uploadinImg_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.save-next_btn__text[_ngcontent-%COMP%], .uploadinImg_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:12px}.file_table__img[_ngcontent-%COMP%]{border:none;background-color:rgba(223,234,251,.37)}.save-next_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px}.ui.pointing.secondary.menu[_ngcontent-%COMP%]{border:none}.item.stepper__progress[_ngcontent-%COMP%]{width:167px}.tab.segment.stepper__segment-outline[_ngcontent-%COMP%]{border:none;box-shadow:none}.office-info_icon[_ngcontent-%COMP%]{position:relative;top:20px;right:85px}.pos_access-rights[_ngcontent-%COMP%]{color:#828282;font-family:Roboto,sans-serif;font-size:11px;line-height:12px}.cancel_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.cancel_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.date_field[_ngcontent-%COMP%]{text-indent:17px}.assign_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.assign_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px}.circleIcon[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0d801c;border-radius:50%;display:inline-block;margin-top:6px}.plusIcon[_ngcontent-%COMP%]{color:#fff;font-size:17px;font-weight:100;line-height:28px;text-align:center;margin-left:0;margin-top:-3px} .mat-step-icon-content{height:19px;width:19px;color:#c8c8c8;background-color:#c8c8c8;border-radius:50%} .mat-step-icon-state-number.mat-step-icon.mat-step-icon-selected{border:1px solid #3867b1} .mat-horizontal-stepper-header-container{width:40%} .mat-step-label{color:#3867b1}.pos_btn-panel[_ngcontent-%COMP%]{right:68px;text-align:right;bottom:97px}.pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{width:104.87px;background-color:#4f4f4f}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%], .pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{width:124.87px;background-color:#3867b1}.icon[_ngcontent-%COMP%]{opacity:1;z-index:1}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:10px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:10px;margin-top:10px}.right.floated.two.wide.column.group_save-btn[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.wide.field.sale_check[_ngcontent-%COMP%]{margin-top:12px}.wide.field.sale_check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;top:-14px;left:0}input[_ngcontent-%COMP%]:placeholder{font-size:14px}.ui.form[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px}.assign_prod[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .sale_check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;top:7px;left:0}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:before, .assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{border-radius:50%}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:1px solid #3867b1}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], .assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{color:#3867b1}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{font-size:12px;top:1px}.assign_prod[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{top:17px}@media(max-width:1440px){.result-block[_ngcontent-%COMP%]{width:auto;margin:24px}.ui.form[_ngcontent-%COMP%]{padding:30px 0}.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{width:auto;margin:0 auto;position:relative;top:60px;right:-16px}}@media(max-width:1280px){.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:120px}.outer-segment[_ngcontent-%COMP%]{margin-bottom:200px}}"]}),t})();function M(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",11),c.ec("click",(function(e){return c.Ac(t),c.ic().onClickAddNewGroup(!0)})),c.Wb(1,"span",12),c.Jc(2,"Add New Groups"),c.Vb(),c.Vb()}}function C(t,e){if(1&t){const t=c.Xb();c.Wb(0,"a",13),c.ec("click",(function(e){return c.Ac(t),c.ic().onClickListGroup()})),c.Wb(1,"span",14),c.Rb(2,"img",15),c.Jc(3," Goto List Group "),c.Vb(),c.Vb()}}function v(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",16),c.Wb(1,"input",17),c.ec("ngModelChange",(function(e){return c.Ac(t),c.ic().searchObject.groupname=e})),c.Vb(),c.Wb(2,"div",18),c.Wb(3,"button",19),c.ec("click",(function(e){return c.Ac(t),c.ic().searchChange()})),c.Wb(4,"span",20),c.Jc(5,"Search "),c.Vb(),c.Vb(),c.Wb(6,"button",21),c.ec("click",(function(e){return c.Ac(t),c.ic().resetFilter()})),c.Wb(7,"span",20),c.Jc(8," Reset"),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=c.ic();c.Cb(1),c.pc("ngModel",t.searchObject.groupname)}}const x=function(t){return{"list-code-block":t}};function O(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",22),c.Wb(1,"app-add-group",23),c.ec("sendDataToParent",(function(e){return c.Ac(t),c.ic().eventFromChild(e)})),c.Vb(),c.Vb()}if(2&t){const t=c.ic();c.pc("ngClass",c.uc(4,x,t.showAddGroupForm)),c.Cb(1),c.pc("change",t.groupRow)("flag",t.flag)("flgEdit",t.flgEdit)}}function P(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1,"---"),c.Vb())}function V(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.Vb()),2&t){const t=c.ic().value;c.Cb(1),c.Kc(t)}}function w(t,e){if(1&t&&(c.Hc(0,P,2,0,"span",36),c.Hc(1,V,2,1,"span",36)),2&t){const t=e.value;c.pc("ngIf",!t),c.Cb(1),c.pc("ngIf",t)}}function W(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.Vb()),2&t){const t=e.value;c.Cb(1),c.Kc(t)}}function F(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.jc(2,"date"),c.Vb()),2&t){const t=e.value;c.Cb(1),c.Kc(c.lc(2,1,t,"short"))}}function y(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Stop Sale "),c.Vb())}function G(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Free Sale "),c.Vb())}function A(t,e){if(1&t&&(c.Hc(0,y,2,0,"span",36),c.Hc(1,G,2,0,"span",36)),2&t){const t=e.row;c.pc("ngIf",1==t.is_stop_sale),c.Cb(1),c.pc("ngIf",1==t.is_free_sale)}}function I(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",39),c.ec("click",(function(e){c.Ac(t);const o=c.ic().row;return c.ic(2).statusToggle(o)})),c.Wb(1,"i",40),c.Rb(2,"img",41),c.Vb(),c.Vb()}}function S(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",42),c.ec("click",(function(e){c.Ac(t);const o=c.ic().row;return c.ic(2).statusToggle(o)})),c.Rb(1,"img",43),c.Vb()}}function J(t,e){if(1&t&&(c.Hc(0,I,3,0,"span",37),c.Hc(1,S,2,0,"span",38)),2&t){const t=e.value;c.pc("ngIf",1==t),c.Cb(1),c.pc("ngIf",1!=t)}}function N(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",44),c.ec("click",(function(o){c.Ac(t);const i=e.row;return c.ic(2).editGroup(i)})),c.Wb(1,"i",45),c.Rb(2,"img",46),c.Vb(),c.Vb(),c.Wb(3,"span",47),c.ec("click",(function(o){c.Ac(t);const i=e.row;return c.ic(2).deleteGroup(i)})),c.Wb(4,"i",45),c.Rb(5,"img",48),c.Vb(),c.Vb()}}const R=function(){return{prop:"created",dir:"desc"}},H=function(t){return[t]};function B(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",24),c.Wb(1,"div",25),c.Wb(2,"ngx-datatable",26,27),c.ec("page",(function(e){return c.Ac(t),c.ic().pageCallback(e)})),c.Rb(4,"ngx-datatable-column",28),c.Wb(5,"ngx-datatable-column",29),c.Hc(6,w,2,2,"ng-template",30),c.Vb(),c.Wb(7,"ngx-datatable-column",31),c.Hc(8,W,2,1,"ng-template",30),c.Vb(),c.Wb(9,"ngx-datatable-column",32),c.Hc(10,F,3,4,"ng-template",30),c.Vb(),c.Wb(11,"ngx-datatable-column",33),c.Hc(12,A,2,2,"ng-template",30),c.Vb(),c.Wb(13,"ngx-datatable-column",34),c.Hc(14,J,2,2,"ng-template",30),c.Vb(),c.Wb(15,"ngx-datatable-column",35),c.Hc(16,N,6,0,"ng-template",30),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=c.ic();c.Cb(2),c.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",t.FilteredGroups)("count",t.totalCount)("offset",t.offset)("externalPaging",!0)("sorts",c.uc(10,H,c.tc(9,R)))}}const z=function(t){return{"head-search-block":t}},L=function(t){return{"list-search-block":t}};let D=(()=>{class t{constructor(t,e,o){this.MarkupConfigurationService=t,this.posService=e,this.toastr=o,this.errMsg="",this.showListForm=!0,this.showAddGroupForm=!1,this.allPos=[],this.NewGroupSeasonality=[],this.FilteredGroups=[],this.FilteredGroupsArr=[],this.searchObject={groupname:""},this.toggleObj={},this.searchObject1={},this.groupRow=[],this.offset=0,this.totalCount=0,this.filterParams={name:null,page:this.offset},this.filterPagination=!1,this.onClickAddNewGroup=t=>{this.flag=t,this.flgEdit=!1,this.showListForm=!1,this.showAddGroupForm=!0,this.makeJqueryFields()},this.onClickListGroup=()=>{this.showListForm=!0,this.showAddGroupForm=!1,this.flag=!1,this.flgEdit=!1}}ngOnInit(){this.fetchAllGroups(this.filterParams)}searchChange(){this.filterPagination=!0,this.filterParams.name=this.searchObject.groupname,this.MarkupConfigurationService.searchGroupByName(this.filterParams).subscribe(t=>{if(t.status){var e=t.result.data.filter((function(t){return 1!=t.status}));this.FilteredGroups=e,this.totalCount=t.result.total,this.offset=t.result.page}else this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}editGroup(t){this.makeJqueryFields(),this.groupRow=t,this.flgEdit=!1,this.showListForm=!1,this.showAddGroupForm=!0}deleteGroup(t){b.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&this.MarkupConfigurationService.deleteGroup(t.sale_id).subscribe(t=>{"error"==t.type?this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllGroups(this.filterParams))})})}mapOrganisationIds(t){var e=this.allPos,o=[];try{if(t){var i=t.split(",");for(let t=0;t<i.length;t++){const n=i[t];if(n&&""!=n){var r=e.filter(t=>t.organisation_id==n);r.length>0&&o.push(String(r[0].organisation_id))}}return o}return[]}catch(n){return console.log("er ",n),[]}}fetchAllGroups(t){this.MarkupConfigurationService.GetAllGroups(t).subscribe(t=>{if(t.status){var e=t.result.data.filter((function(t){return 1!=t.status}));this.FilteredGroups=e,this.totalCount=t.result.total,this.offset=t.result.page}else this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-top-right"})})}onItemSelect(t){console.log(t)}onSelectAll(t){console.log(t)}ngAfterViewInit(){this.makeJqueryFields()}makeJqueryFields(){$(document).ready((function(){$(".ui .dropdown").dropdown(),$(".dropdown").dropdown({placeholder:"Select POS"})}))}resetFilter(){this.searchObject.groupname="",this.fetchAllGroups(this.filterParams)}eventFromChild(t){this.showListForm=!0,this.showAddGroupForm=!1,this.fetchAllGroups(this.filterParams)}statusToggle(t){this.toggleObj.id=t.sale_id,this.toggleObj.status=t.is_active,this.toggleObj.table="sale",this.MarkupConfigurationService.onStatusToggle(this.toggleObj).subscribe(t=>{t.status?this.fetchAllGroups(this.filterParams):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}pageCallback(t){this.filterParams.page=t.offset,this.filterPagination?this.searchChange():this.fetchAllGroups(this.filterParams)}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(p.a),c.Qb(l.a),c.Qb(u.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-sale"]],decls:11,vars:11,consts:[[1,"ui","fluid","container"],["name","form","novalidate","",1,"ui","form"],["f","ngForm"],[3,"ngClass"],[1,"fields","search-section",3,"ngClass"],[1,"four","wide","field","bookings_btn-panel","add-btn"],["class","ui primary button filterMarkUp_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui filterMarkUp_btn goto_list","tabindex","0",3,"click",4,"ngIf"],["class","twelve wide field search-btn-block",4,"ngIf"],["class","list-group result-block",3,"ngClass",4,"ngIf"],["class","list-group result-block",4,"ngIf"],["tabindex","0",1,"ui","primary","button","filterMarkUp_btn",3,"click"],[1,"filterMarkUp_list"],["href","javascript:void(0)","tabindex","0",1,"ui","filterMarkUp_btn","goto_list",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"twelve","wide","field","search-btn-block"],["type","text","placeholder","Group / Seasonality Name","name","groupname",3,"ngModel","ngModelChange"],[1,"bookings_btn-panel"],["tabindex","0",1,"ui","primary","button","addNewGroup_btn",3,"click"],[1,"addNewGroup-text"],["tabindex","0",1,"ui","reset","button","addNewGroup_btn",3,"click"],[1,"list-group","result-block",3,"ngClass"],[3,"change","flag","flgEdit","sendDataToParent"],[1,"list-group","result-block"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","count","offset","externalPaging","sorts","page"],["table",""],["name","Group name","prop","name"],["name","Organisation","prop","organisation"],["ngx-datatable-cell-template",""],["name","Preference","prop","preference"],["name","Date","prop","created"],["name","Sale Type","prop","is_stop_sale, is_free_sale"],["name","Status","prop","is_active"],["name","Actions"],[4,"ngIf"],["title","Active",3,"click",4,"ngIf"],["title","click to activate",3,"click",4,"ngIf"],["title","Active",3,"click"],["title","click to deactivate",1,"icon"],["src","./../../../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["title","click to activate",3,"click"],["src","./../../../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","cal"],["title","Edit user",1,"action",3,"click"],[1,"icon"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete User",1,"action",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1,2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"div",5),c.Hc(6,M,3,0,"button",6),c.Hc(7,C,4,0,"a",7),c.Vb(),c.Hc(8,v,9,1,"div",8),c.Vb(),c.Vb(),c.Hc(9,O,2,6,"div",9),c.Hc(10,B,17,12,"div",10),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.pc("ngClass",c.uc(7,z,e.showAddGroupForm)),c.Cb(1),c.pc("ngClass",c.uc(9,L,e.showAddGroupForm)),c.Cb(2),c.pc("ngIf",e.showListForm),c.Cb(1),c.pc("ngIf",e.showAddGroupForm),c.Cb(1),c.pc("ngIf",e.showListForm),c.Cb(1),c.pc("ngIf",e.showAddGroupForm),c.Cb(1),c.pc("ngIf",e.showListForm))},directives:[a.B,a.p,a.q,i.n,i.p,a.c,a.o,a.r,k,r.c,r.b,r.a],pipes:[i.f],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0 20px 0 15px}.markup_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;color:#181b20;font-size:14px}.addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{font-size:14px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}.addMarkUp[_ngcontent-%COMP%], span.action[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}span.action[_ngcontent-%COMP%]{margin:0 5px;font-weight:700;text-decoration:underline}.pages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid grey}.date_picker_custom[_ngcontent-%COMP%]   .dp_icon[_ngcontent-%COMP%]{margin-top:-40px!important;right:28px;display:grid}.alert.alert-danger[_ngcontent-%COMP%]{color:rgba(255,0,0,.68);margin-left:20px;margin-top:5px}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:10px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:18px;margin-top:10px}.text_field[_ngcontent-%COMP%]{padding-left:30px}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin:24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{position:relative}.ui.form[_ngcontent-%COMP%]   .search-section.list-search-block[_ngcontent-%COMP%]{margin:0;width:1100px!important;padding-left:0}.ui.form[_ngcontent-%COMP%]   .search-section.list-search-block[_ngcontent-%COMP%]   .bookings_btn-panel[_ngcontent-%COMP%]{padding-left:0;padding-top:20px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .ui.reset.button[_ngcontent-%COMP%]{margin-right:0}.search-btn-block[_ngcontent-%COMP%]{text-align:right}.search-btn-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30%;margin-right:12px}.search-btn-block[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}.search-btn-block[_ngcontent-%COMP%]   .field.input_field[_ngcontent-%COMP%]{position:relative;top:-8px}.ui.primary.addNewGroup_btn[_ngcontent-%COMP%]{top:8px;margin-right:12px}.list-code-block[_ngcontent-%COMP%]{margin:24px 24px 200px}.head-search-block[_ngcontent-%COMP%]{padding:0 24px}@media(max-width:1440px){.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}.search-section[_ngcontent-%COMP%]   .wide.field[_ngcontent-%COMP%]{padding:0}.list-group.result-block.list-code-block[_ngcontent-%COMP%]{margin-bottom:200px!important}}@media(max-width:1280px){.head-search-block[_ngcontent-%COMP%]{padding:0 20px}}"]}),t})();var T=o("FtGj"),U=o("7o2P"),E=o("kmnG"),q=o("A5z7"),j=o("NFeN");function X(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){const t=e.$implicit;c.qc("value",t.sale_id),c.Cb(1),c.Lc(" ",t.name," ")}}function Y(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){const t=e.$implicit;c.qc("value",t.supplier_id),c.Cb(1),c.Lc(" ",t.name," ")}}function K(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){const t=e.$implicit;c.qc("value",t.AirportCode),c.Cb(1),c.Lc(" ",t.AirportCode," ")}}function Q(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){const t=e.$implicit;c.qc("value",t.AirportCode),c.Cb(1),c.Lc(" ",t.AirportCode," ")}}function Z(t,e){1&t&&(c.Wb(0,"mat-icon",74),c.Jc(1,"x"),c.Vb())}function tt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"mat-chip",72),c.ec("removed",(function(o){c.Ac(t);const i=e.$implicit;return c.ic(3).remove(i,3)})),c.Jc(1),c.Hc(2,Z,2,0,"mat-icon",73),c.Vb()}if(2&t){const t=e.$implicit,o=c.ic(3);c.pc("selectable",o.selectable)("removable",o.removable),c.Cb(1),c.Lc(" ",t.name," "),c.Cb(1),c.pc("ngIf",o.removable)}}function et(t,e){1&t&&(c.Wb(0,"mat-icon",74),c.Jc(1,"x"),c.Vb())}function ot(t,e){if(1&t){const t=c.Xb();c.Wb(0,"mat-chip",72),c.ec("removed",(function(o){c.Ac(t);const i=e.$implicit;return c.ic(3).remove(i,4)})),c.Jc(1),c.Hc(2,et,2,0,"mat-icon",73),c.Vb()}if(2&t){const t=e.$implicit,o=c.ic(3);c.pc("selectable",o.selectable)("removable",o.removable),c.Cb(1),c.Lc(" ",t.name," "),c.Cb(1),c.pc("ngIf",o.removable)}}function it(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",57),c.Wb(1,"div",3),c.Wb(2,"div",58),c.Wb(3,"label"),c.Jc(4,"Origin Airport"),c.Vb(),c.Wb(5,"select",59),c.Hc(6,K,2,2,"option",22),c.Vb(),c.Vb(),c.Wb(7,"div",58),c.Wb(8,"label"),c.Jc(9,"Destination Airport"),c.Vb(),c.Wb(10,"select",60),c.Hc(11,Q,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",3),c.Wb(13,"div",58),c.Wb(14,"label"),c.Jc(15,"Marketing Careers"),c.Vb(),c.Wb(16,"mat-form-field",61),c.Wb(17,"mat-chip-list",null,62),c.Hc(19,tt,3,4,"mat-chip",63),c.Vb(),c.Wb(20,"input",64),c.ec("matChipInputTokenEnd",(function(e){return c.Ac(t),c.ic(2).add(e,3)})),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(21,"div",3),c.Wb(22,"div",58),c.Wb(23,"label"),c.Jc(24,"Service Classes"),c.Vb(),c.Wb(25,"mat-form-field",61),c.Wb(26,"mat-chip-list",null,65),c.Hc(28,ot,3,4,"mat-chip",63),c.Vb(),c.Wb(29,"input",66),c.ec("matChipInputTokenEnd",(function(e){return c.Ac(t),c.ic(2).add(e,4)})),c.Vb(),c.Vb(),c.Vb(),c.Wb(30,"div",67),c.Wb(31,"label"),c.Jc(32,"Trip Type"),c.Vb(),c.Wb(33,"select",68),c.Wb(34,"option",38),c.Jc(35,"Trip Type"),c.Vb(),c.Wb(36,"option",69),c.Jc(37,"One Way"),c.Vb(),c.Wb(38,"option",70),c.Jc(39,"Round Trip"),c.Vb(),c.Wb(40,"option",71),c.Jc(41,"Both"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=c.yc(18),e=c.yc(27),o=c.ic(2);c.Cb(6),c.pc("ngForOf",o.airports),c.Cb(5),c.pc("ngForOf",o.airports),c.Cb(8),c.pc("ngForOf",o.addMarkupForm.controls.flightsMarkup.controls.marketing_carriers.value),c.Cb(1),c.pc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur),c.Cb(8),c.pc("ngForOf",o.addMarkupForm.controls.flightsMarkup.controls.service_class.value),c.Cb(1),c.pc("matChipInputFor",e)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes)("matChipInputAddOnBlur",o.addOnBlur)}}const rt=function(t){return{error:t}};function nt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",36),c.Wb(1,"div",3),c.Wb(2,"div",4),c.Wb(3,"label"),c.Jc(4,"Calculation Basis"),c.Vb(),c.Wb(5,"select",37),c.ec("change",(function(e){return c.Ac(t),c.ic().makeJqueryFields()})),c.Wb(6,"option",38),c.Jc(7,"Calculation Basis"),c.Vb(),c.Wb(8,"option",39),c.Jc(9,"By Person"),c.Vb(),c.Wb(10,"option",40),c.Jc(11,"By Airline"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",4),c.Wb(13,"label"),c.Jc(14,"Calculation Type"),c.Vb(),c.Wb(15,"select",41),c.Wb(16,"option",38),c.Jc(17,"Calculation Type"),c.Vb(),c.Wb(18,"option",42),c.Jc(19,"Base Amount"),c.Vb(),c.Wb(20,"option",43),c.Jc(21,"Total"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",3),c.Wb(23,"div",4),c.Wb(24,"label"),c.Jc(25,"Markup"),c.Vb(),c.Rb(26,"input",44),c.Vb(),c.Wb(27,"div",4),c.Wb(28,"label"),c.Jc(29,"Markup Mode"),c.Vb(),c.Wb(30,"select",45),c.Wb(31,"option",38),c.Jc(32,"Markup Mode"),c.Vb(),c.Wb(33,"option",46),c.Jc(34,"Percentage"),c.Vb(),c.Wb(35,"option",47),c.Jc(36,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(37,"div",3),c.Wb(38,"div",48),c.Wb(39,"label",49),c.Jc(40,"Pax Type (s)"),c.Vb(),c.Wb(41,"div",50),c.Wb(42,"div",51),c.Rb(43,"input",52),c.Wb(44,"label"),c.Jc(45,"Adult"),c.Vb(),c.Vb(),c.Vb(),c.Wb(46,"div",50),c.Wb(47,"div",51),c.Rb(48,"input",53),c.Wb(49,"label"),c.Jc(50,"Child"),c.Vb(),c.Vb(),c.Vb(),c.Wb(51,"div",50),c.Wb(52,"div",51),c.Rb(53,"input",54),c.Wb(54,"label"),c.Jc(55,"Infant"),c.Vb(),c.Vb(),c.Vb(),c.Wb(56,"div",50),c.Wb(57,"div",51),c.Rb(58,"input",55),c.Wb(59,"label"),c.Jc(60,"All"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Hc(61,it,42,10,"div",56),c.Vb()}if(2&t){const t=c.ic();c.Cb(2),c.pc("ngClass",c.uc(5,rt,t.isSubmitted&&"INVALID"==t.addMarkupForm.controls.flightsMarkup.controls.calculation_basis.status)),c.Cb(10),c.pc("ngClass",c.uc(7,rt,t.isSubmitted&&"INVALID"==t.addMarkupForm.controls.flightsMarkup.controls.calculation_type.status)),c.Cb(11),c.pc("ngClass",c.uc(9,rt,t.isSubmitted&&"INVALID"==t.addMarkupForm.controls.flightsMarkup.controls.markup.status)),c.Cb(4),c.pc("ngClass",c.uc(11,rt,t.isSubmitted&&"INVALID"==t.addMarkupForm.controls.flightsMarkup.controls.markup_mode.status)),c.Cb(34),c.pc("ngIf","by_airline"==t.addMarkupForm.controls.flightsMarkup.controls.calculation_basis.value)}}function at(t,e){if(1&t&&(c.Wb(0,"div",75),c.Wb(1,"h4",76),c.Jc(2,"Hotel Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.hotelsMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.hotelsMarkup.controls.markup_mode.value)}}function st(t,e){if(1&t&&(c.Wb(0,"div",82),c.Wb(1,"h4",76),c.Jc(2,"Activities Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.activitiesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.activitiesMarkup.controls.markup_mode.value)}}function ct(t,e){if(1&t&&(c.Wb(0,"div",83),c.Wb(1,"h4",76),c.Jc(2,"Cars Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.carsMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.carsMarkup.controls.markup_mode.value)}}function pt(t,e){if(1&t&&(c.Wb(0,"div",84),c.Wb(1,"h4",76),c.Jc(2,"Transfer Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.transfersMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.transfersMarkup.controls.markup_mode.value)}}function lt(t,e){if(1&t&&(c.Wb(0,"div",85),c.Wb(1,"h4",76),c.Jc(2,"Insurance Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.insurancesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.insurancesMarkup.controls.markup_mode.value)}}function ut(t,e){if(1&t&&(c.Wb(0,"div",86),c.Wb(1,"h4",76),c.Jc(2,"Cruises Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){const t=c.ic();c.Cb(12),c.pc("hidden","by_amount"==t.addMarkupForm.controls.cruisesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==t.addMarkupForm.controls.cruisesMarkup.controls.markup_mode.value)}}function dt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",87),c.ec("click",(function(e){return c.Ac(t),c.ic().addMark(null)})),c.Wb(1,"span",88),c.Jc(2,"Save"),c.Vb(),c.Vb()}}function bt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",89),c.ec("click",(function(e){return c.Ac(t),c.ic().onUpdateMarkup(null)})),c.Wb(1,"span",88),c.Jc(2,"Update"),c.Vb(),c.Vb()}}let mt=(()=>{class t{constructor(t,e,o,i,r){this.MarkupConfigurationService=t,this.posService=e,this._formBuilder=o,this.toastr=i,this.CommonService=r,this.allSuppliers=[],this.filteredSuppliers=[],this.allGroups=[],this.isSubmitted=!1,this.orgArr=[],this.destArr=[],this.carrierArr=[],this.serviceArr=[],this.pax=[],this.airports=[],this.filterGroup={limit:1500},this.change=new c.n,this.dataToParent=new c.n,this.separatorKeysCodes=[T.g,T.c],this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.suppliersList=[],this.getAirportDetails=()=>{this.CommonService.getAirportsList().subscribe(t=>{t.status?this.airports=t.result:this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}ngOnInit(){this.initMarkupForm(),this.fetchAllGroups(this.filterGroup),this.fetchAllSuppliers({}),this.onEditMarkUpRow(this.row),this.getAirportDetails(),1==this.flagOnAdd&&0==this.flagOnEdit?(this.showSaveButton=!0,this.showUpdateButton=!1,this.fetchAllGroups(this.filterGroup),this.addMarkupForm.reset()):(this.showUpdateButton=!0,this.showSaveButton=!1)}initMarkupForm(){this.addMarkupForm=this._formBuilder.group({supplier_id:["",a.z.required],sale_id:["",a.z.required],title:["",a.z.required],is_active:["",a.z.required],priority:["",a.z.required],markup_id:[""],markup_flight_id:[""]})}addFlightMarkupFormGroup(){this.addMarkupForm.addControl("flightsMarkup",this._formBuilder.group({markup_mode:[""],markup:["",[a.z.required]],calculation_basis:["",[a.z.required]],calculation_type:["",[a.z.required]],itinerary_type:["",[a.z.required]],orgin_airport:[[]],destination_airport:[[]],marketing_carriers:[[]],service_class:[[]],is_adult:[""],is_infant:[""],is_child:[""],is_all:[""],markup_id:[""],markup_flight_id:[""],pax_types:[""],org_airport:[""],dest_airport:[""],mode:[""]})),this.makeJqueryFields()}removeFlightMarkupFormGroup(){this.addMarkupForm.removeControl("flightsMarkup")}addHotelMarkupFormGroup(){this.addMarkupForm.addControl("hotelsMarkup",this._formBuilder.group({markup_hotel_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeHotelMarkupFormGroup(){this.addMarkupForm.removeControl("hotelsMarkup")}addActivitiesMarkupFormGroup(){this.addMarkupForm.addControl("activitiesMarkup",this._formBuilder.group({markup_activitie_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeActivitiesMarkupFormGroup(){this.addMarkupForm.removeControl("activitiesMarkup")}addCarsMarkupFormGroup(){this.addMarkupForm.addControl("carsMarkup",this._formBuilder.group({markup_car_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeCarsMarkupFormGroup(){this.addMarkupForm.removeControl("carsMarkup")}addTransfersMarkupFormGroup(){this.addMarkupForm.addControl("transfersMarkup",this._formBuilder.group({markup_transfer_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeTransfersMarkupFormGroup(){this.addMarkupForm.removeControl("transfersMarkup")}addInsuranceMarkupFormGroup(){this.addMarkupForm.addControl("insurancesMarkup",this._formBuilder.group({markup_insurance_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeInsuranceMarkupFormGroup(){this.addMarkupForm.removeControl("insurancesMarkup")}addCruisesMarkupFormGroup(){this.addMarkupForm.addControl("cruisesMarkup",this._formBuilder.group({markup_cruise_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}removeCruisesMarkupFormGroup(){this.addMarkupForm.removeControl("cruisesMarkup")}addMark(t){this.isSubmitted=!0;var e={},o={},i={},r={},n={},a={},s={};e=this.addMarkupForm.controls.flightsMarkup?this.convertFlightsData(e=this.addMarkupForm.controls.flightsMarkup.value):"",this.addMarkupForm.controls.hotelsMarkup&&(o=this.addMarkupForm.controls.hotelsMarkup.value||!1),this.addMarkupForm.controls.activitiesMarkup&&(i=this.addMarkupForm.controls.activitiesMarkup.value||!1),this.addMarkupForm.controls.transfersMarkup&&(r=this.addMarkupForm.controls.transfersMarkup.value||!1),this.addMarkupForm.controls.carsMarkup&&(n=this.addMarkupForm.controls.carsMarkup.value||!1),this.addMarkupForm.controls.cruisesMarkup&&(a=this.addMarkupForm.controls.cruisesMarkup.value||!1),this.addMarkupForm.controls.insurancesMarkup&&(s=this.addMarkupForm.controls.insurancesMarkup.value||!1),this.MarkupConfigurationService.AddMarkup({markup:{supplier_id:this.addMarkupForm.controls.supplier_id.value,sale_id:this.addMarkupForm.controls.sale_id.value,title:this.addMarkupForm.controls.title.value,is_active:this.addMarkupForm.controls.is_active.value,priority:this.addMarkupForm.controls.priority.value,markup_id:"",mode:"Add"},editions:{hotels:o,flights:e,activities:i,cars:n,transfers:r,insurances:s,cruises:a}}).subscribe(e=>{if(e.status){var o=e.result;this.dataToParent.emit(t),this.toastr.success(`${e.message}`,"Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"}),this.change.emit({component:"markup",action:"add",markup:o})}else this.toastr.error(`${e.message}`," ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllSuppliers(t){this.MarkupConfigurationService.FetchAllSuppliers(t).subscribe(t=>{t.status&&(this.allSuppliers=t.result,this.filteredSuppliers=this.allSuppliers)},t=>{console.log("erer ",t)})}fetchAllGroups(t){this.MarkupConfigurationService.GetAllGroups(this.filterGroup).subscribe(t=>{if(t.status){var e=t.result.data.filter((function(t){return 1!=t.status}));this.allGroups=e,console.log("===fetchAllGroups====",this.allGroups)}},t=>{console.log("erer ",t)})}groupChanged(t){var e=this.allSuppliers;this.addMarkupForm.patchValue({supplier_id:""}),this.makeJqueryFields();var o=this.allGroups.filter(e=>e.sale_id==Number(t));if(o.length){var i=o[0],r=e.filter(t=>!(i.is_activities&&!t.is_activities||i.is_flight&&!t.is_flight||i.is_car&&!t.is_car||i.is_cruises&&!t.is_cruises||i.is_holidays&&!t.is_holidays||i.is_hotel&&!t.is_hotel||i.is_insurance&&!t.is_insurance||i.is_transfers&&!t.is_transfers||i.is_visa&&!t.is_visa));this.filteredSuppliers=r}}supplierChanged(t){var e=this.addMarkupForm.controls.sale_id.value;if(t&&e){var o=this.allGroups.filter(t=>t.sale_id==Number(e)),i=this.allSuppliers.filter(e=>e.supplier_id==Number(t));if(o.length&&i.length){var r=o[0],n=i[0];r.is_flight&&n.is_flight?this.addFlightMarkupFormGroup():this.addMarkupForm.removeControl("flightsMarkup"),r.is_hotel&&n.is_hotel?this.addHotelMarkupFormGroup():this.addMarkupForm.removeControl("hotelsMarkup"),r.is_car&&n.is_car?this.addCarsMarkupFormGroup():this.addMarkupForm.removeControl("carsMarkup"),r.is_activities&&n.is_activities?this.addActivitiesMarkupFormGroup():this.addMarkupForm.removeControl("activitiesMarkup"),r.is_transfers&&n.is_transfers?this.addTransfersMarkupFormGroup():this.addMarkupForm.removeControl("transfersMarkup"),r.is_cruises&&n.is_cruises?this.addCruisesMarkupFormGroup():this.addMarkupForm.removeControl("cruisesMarkup"),r.is_insurance&&n.is_insurance?this.addInsuranceMarkupFormGroup():this.addMarkupForm.removeControl("insurancesMarkup")}}}add(t,e){const o=t.input,i=t.value;(i||"").trim()&&(1==e&&this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.push({name:i.trim()}),2==e&&this.addMarkupForm.controls.flightsMarkup.value.destination_airport.push({name:i.trim()}),3==e&&this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.push({name:i.trim()}),4==e&&this.addMarkupForm.controls.flightsMarkup.value.service_class.push({name:i.trim()})),o&&(o.value="")}remove(t,e){const o=this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.indexOf(t),i=this.addMarkupForm.controls.flightsMarkup.value.destination_airport.indexOf(t),r=this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.indexOf(t),n=this.addMarkupForm.controls.flightsMarkup.value.service_class.indexOf(t);1==e&&this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.splice(o,1),2==e&&this.addMarkupForm.controls.flightsMarkup.value.destination_airport.splice(i,1),3==e&&this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.splice(r,1),4==e&&this.addMarkupForm.controls.flightsMarkup.value.service_class.splice(n,1)}convertFlightsData(t){if(""!=t)var e=Object.assign({},t);if(e.orgin_airport=e.orgin_airport.map(t=>t.name).join(),e.destination_airport=e.destination_airport.map(t=>t.name).join(),e.marketing_carriers=e.marketing_carriers.map(t=>t.name).join(),e.service_class=e.service_class.map(t=>t.name).join(),e.is_all)e.pax_types="ALL";else{var o="";e.is_child&&(o+="CHD,"),e.is_adult&&(o+="ADT,"),e.is_infant&&(o+="INF,"),o.length>0&&(o=o.substring(0,o.length-1)),e.pax_types=o}return e}ngAfterViewInit(){this.makeJqueryFields()}makeJqueryFields(){$(".ui.dropdown-group").dropdown(),$(".ui.dropdown").dropdown(),$(document).ready((function(){$(".ui.dropdown-group").dropdown(),$(".ui.dropdown").dropdown()}))}onEditMarkUpRow(t){if(0!=t.length){if(this.supplierId=t.supplier_id,this.saleId=t.sale_id,null!=t.markup_flight){let e=t.markup_flight.pax_types.split(",");if(e.length&&(this.is_all=!1,this.is_child=!1,this.is_infant=!1,this.is_adult=!1,e.forEach(t=>{"ALL"==t?(this.is_all=!0,this.is_child=!0,this.is_infant=!0,this.is_adult=!0):(this.is_all=!1,"CHD"==t&&(this.is_child=!0),"INF"==t&&(this.is_infant=!0),"ADT"==t&&(this.is_adult=!0))})),null!=t.markup_flight.orgin_airport){let e=t.markup_flight.orgin_airport;e=e.split(","),e.forEach(t=>{this.orgArr.push({name:t})})}if(null!=t.markup_flight.destination_airport){let e=t.markup_flight.destination_airport;e=e.split(","),e.forEach(t=>{this.destArr.push({name:t})})}if(null!=t.markup_flight.marketing_carriers){let e=t.markup_flight.marketing_carriers;e=e.split(","),e.forEach(t=>{this.carrierArr.push({name:t})})}if(null!=t.markup_flight.service_class){let e=t.markup_flight.service_class;e=e.split(","),e.forEach(t=>{this.serviceArr.push({name:t})})}}if(this.supplierId&&this.saleId){this.groupChanged(this.saleId),this.supplierChanged(this.supplierId);var e=this.allGroupdatas.filter(t=>t.sale_id==Number(this.saleId));if(0!=this.allSupplierDatas.length)var o=this.allSupplierDatas.filter(t=>t.supplier_id==Number(this.supplierId));if(e.length&&o.length){var i=e[0],r=o[0];null!=t.markup_flight&&(i.is_flight&&r.is_flight?(this.addFlightMarkupFormGroup(),this.addMarkupForm.controls.flightsMarkup.patchValue({markup_mode:t.markup_flight.markup_mode||"",markup:t.markup_flight.markup||"",calculation_basis:t.markup_flight.calculation_basis||"",calculation_type:t.markup_flight.calculation_type||"",itinerary_type:t.markup_flight.itinerary_type||"",orgin_airport:this.orgArr||"",destination_airport:this.destArr||"",marketing_carriers:this.carrierArr||"",service_class:this.serviceArr||"",is_adult:this.is_adult||"",is_infant:this.is_infant||"",is_child:this.is_child||"",is_all:this.is_all||"",markup_id:t.markup_flight.markup_id||"",markup_flight_id:t.markup_flight.markup_flight_id||"",pax_types:t.markup_flight.pax_types||""})):this.addMarkupForm.removeControl("flightsMarkup")),null!=t.markup_hotel&&(i.is_hotel&&r.is_hotel?(this.addHotelMarkupFormGroup(),this.addMarkupForm.controls.hotelsMarkup.patchValue({markup_hotel_id:t.markup_hotel.markup_hotel_id,markup_mode:t.markup_hotel.markup_mode,markup:t.markup_hotel.markup,min_markup:t.markup_hotel.min_markup,max_markup:t.markup_hotel.max_markup})):this.addMarkupForm.removeControl("hotelsMarkup")),null!=t.markup_activity&&(i.is_activities&&r.is_activities?(this.addActivitiesMarkupFormGroup(),this.addMarkupForm.controls.activitiesMarkup.patchValue({markup_activitie_id:t.markup_activity.markup_activitie_id,markup_mode:t.markup_activity.markup_mode,markup:t.markup_activity.markup,min_markup:t.markup_activity.min_markup,max_markup:t.markup_activity.max_markup})):this.addMarkupForm.removeControl("activitiesMarkup")),null!=t.markup_car&&(i.is_car&&r.is_car?(this.addCarsMarkupFormGroup(),this.addMarkupForm.controls.carsMarkup.patchValue({markup_car_id:t.markup_car.markup_car_id,markup_mode:t.markup_car.markup_mode,markup:t.markup_car.markup,min_markup:t.markup_car.min_markup,max_markup:t.markup_car.max_markup})):this.addMarkupForm.removeControl("carsMarkup")),null!=t.markup_transfer&&(i.is_transfers&&r.is_transfers?(this.addTransfersMarkupFormGroup(),this.addMarkupForm.controls.transfersMarkup.patchValue({markup_transfer_id:t.markup_transfer.markup_transfer_id,markup_mode:t.markup_transfer.markup_mode,markup:t.markup_transfer.markup,min_markup:t.markup_transfer.min_markup,max_markup:t.markup_transfer.max_markup})):this.addMarkupForm.removeControl("transfersMarkup")),null!=t.markup_insurance&&(i.is_insurance&&r.is_insurance?(this.addInsuranceMarkupFormGroup(),this.addMarkupForm.controls.insurancesMarkup.patchValue({markup_insurance_id:t.markup_insurance.markup_insurance_id,markup_mode:t.markup_insurance.markup_mode,markup:t.markup_insurance.markup,min_markup:t.markup_insurance.min_markup,max_markup:t.markup_insurance.max_markup})):this.addMarkupForm.removeControl("insurancesMarkup")),null!=t.markup_cruise&&(i.is_cruises&&r.is_cruises?(this.addCruisesMarkupFormGroup(),this.addMarkupForm.controls.cruisesMarkup.patchValue({markup_cruise_id:t.cruisesMarkup.markup_cruise_id,markup_mode:t.markup_cruise.markup_mode,markup:t.markup_cruise.markup,min_markup:t.markup_cruise.min_markup,max_markup:t.markup_cruise.max_markup})):this.addMarkupForm.removeControl("cruisesMarkup"))}}this.addMarkupForm.patchValue({supplier_id:t.supplier_id,sale_id:t.sale_id,title:t.title,is_active:t.is_active,priority:t.priority,markup_id:t.markup_id,markup_flight_id:null!=t.markup_flight?t.markup_flight.markup_flight_id:""})}}onUpdateMarkup(t){this.isSubmitted=!0;var e={},o={},i={},r={},n={},a={},s={};e=this.addMarkupForm.controls.flightsMarkup?this.convertFlightsData(e=this.addMarkupForm.controls.flightsMarkup.value):"",this.addMarkupForm.controls.hotelsMarkup&&(o=this.addMarkupForm.controls.hotelsMarkup.value||!1),this.addMarkupForm.controls.activitiesMarkup&&(i=this.addMarkupForm.controls.activitiesMarkup.value||!1),this.addMarkupForm.controls.transfersMarkup&&(r=this.addMarkupForm.controls.transfersMarkup.value||!1),this.addMarkupForm.controls.carsMarkup&&(n=this.addMarkupForm.controls.carsMarkup.value||!1),console.log("carsdata---",n),this.addMarkupForm.controls.cruisesMarkup&&(a=this.addMarkupForm.controls.cruisesMarkup.value||!1),this.addMarkupForm.controls.insurancesMarkup&&(s=this.addMarkupForm.controls.insurancesMarkup.value||!1),this.MarkupConfigurationService.editMarkup({markup:{supplier_id:this.addMarkupForm.controls.supplier_id.value,sale_id:this.addMarkupForm.controls.sale_id.value,title:this.addMarkupForm.controls.title.value,is_active:this.addMarkupForm.controls.is_active.value,priority:this.addMarkupForm.controls.priority.value,markup_id:this.addMarkupForm.value.markup_id,mode:"Update"},editions:{hotels:o,flights:e,activities:i,cars:n,transfers:r,insurances:s,cruises:a}}).subscribe(e=>{if(e.status){var o=e.result;this.dataToParent.emit(t),this.toastr.success(`${e.message}`,"Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"}),this.change.emit({component:"markup",action:"update",markup:o})}else this.toastr.error(`${e.message}`," ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})},t=>{console.log("er ",t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(p.a),c.Qb(l.a),c.Qb(a.f),c.Qb(u.b),c.Qb(U.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-add-markup"]],inputs:{groupId:"groupId",row:["mark","row"],allGroupdatas:["groupData","allGroupdatas"],allSupplierDatas:["supplierData","allSupplierDatas"],flagOnAdd:["flag","flagOnAdd"],flagOnEdit:["flagEdit","flagOnEdit"]},outputs:{change:"change",dataToParent:"dataToParent"},decls:72,vars:27,consts:[[1,"outer-form"],[1,"ui","form","pos_basic_form",3,"formGroup"],[1,"ui","form","pos_basic_form"],[1,"fields"],[1,"six","wide","field",3,"ngClass"],["type","text","formControlName","title","placeholder","Markup Title"],["formControlName","priority",1,"ui","fluid","selection","dropdown"],["value","","selected",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["formControlName","is_active",1,"ui","fluid","selection","dropdown"],["value","0"],["formControlName","sale_id",1,"ui","dropdown","fluid","search","selection","dropdown-group",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mandatory"],["formControlName","supplier_id",1,"ui","fluid","search","selection","dropdown",3,"change"],["class","markup-block","formGroupName","flightsMarkup",4,"ngIf"],["class","markup-block","formGroupName","hotelsMarkup",4,"ngIf"],["class","markup-block","formGroupName","activitiesMarkup",4,"ngIf"],["class","markup-block","formGroupName","carsMarkup",4,"ngIf"],["class","markup-block","formGroupName","transfersMarkup",4,"ngIf"],["class","markup-block","formGroupName","insurancesMarkup",4,"ngIf"],["class","markup-block","formGroupName","cruisesMarkup",4,"ngIf"],[1,"bookings_btn-panel","group_save-btn","save-btn-block"],["class","ui primary button commissionCode_btn fluid","type","submit",3,"click",4,"ngIf"],["class","ui primary button commissionCode_btn fluid",3,"click",4,"ngIf"],[3,"value"],["formGroupName","flightsMarkup",1,"markup-block"],["formControlName","calculation_basis",1,"ui","fluid","selection","dropdown",3,"change"],["value","","selected","","disabled","","hidden",""],["value","per_person"],["value","by_airline"],["formControlName","calculation_type",1,"ui","fluid","selection","dropdown"],["value","far_base"],["value","far_total"],["type","number","name","markup","placeholder","Markup Value","formControlName","markup"],["formControlName","markup_mode",1,"ui","fluid","selection","dropdown"],["value","by_percentage"],["value","by_amount"],[1,"six","wide","field","field-inline"],[1,"checkbox-field"],[1,"four","wide","field"],[1,"ui","checkbox"],["type","checkbox","formControlName","is_adult"],["type","checkbox","formControlName","is_child"],["type","checkbox","formControlName","is_infant"],["type","checkbox","formControlName","is_all"],["class","",4,"ngIf"],[1,""],[1,"six","wide","field","input-tagbased","mb-0"],["formControlName","org_airport","multiple","",1,"ui","fluid","search","dropdown"],["formControlName","dest_airport","multiple","",1,"ui","fluid","search","dropdown"],[2,"width","100%","top","-10px"],["chipList3",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Marketing Careers",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["chipList4",""],["placeholder","Service Classes",1,"input_mat",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"six","wide","field"],["formControlName","itinerary_type",1,"ui","fluid","selection","dropdown"],["value","oneway"],["value","roundtrip"],["value","both"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["formGroupName","hotelsMarkup",1,"markup-block"],[1,"ui","header"],[1,"three","wide","field"],[1,"three","wide","field",3,"hidden"],["type","number","name","minMarkup","placeholder","Minimum Markup","formControlName","min_markup"],["type","number","name","maxMarkup","placeholder","Maximum Markup","formControlName","max_markup"],[1,"ui","fitted","divider"],["formGroupName","activitiesMarkup",1,"markup-block"],["formGroupName","carsMarkup",1,"markup-block"],["formGroupName","transfersMarkup",1,"markup-block"],["formGroupName","insurancesMarkup",1,"markup-block"],["formGroupName","cruisesMarkup",1,"markup-block"],["type","submit",1,"ui","primary","button","commissionCode_btn","fluid",3,"click"],[1,"tourCode_text"],[1,"ui","primary","button","commissionCode_btn","fluid",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"label"),c.Jc(6,"Markup Title"),c.Vb(),c.Rb(7,"input",5),c.Vb(),c.Wb(8,"div",4),c.Wb(9,"label"),c.Jc(10,"Priority"),c.Vb(),c.Wb(11,"select",6),c.Wb(12,"option",7),c.Jc(13,"Priority"),c.Vb(),c.Wb(14,"option",8),c.Jc(15,"1"),c.Vb(),c.Wb(16,"option",9),c.Jc(17,"2"),c.Vb(),c.Wb(18,"option",10),c.Jc(19,"3"),c.Vb(),c.Wb(20,"option",11),c.Jc(21,"4"),c.Vb(),c.Wb(22,"option",12),c.Jc(23,"5"),c.Vb(),c.Wb(24,"option",13),c.Jc(25,"6"),c.Vb(),c.Wb(26,"option",14),c.Jc(27,"7"),c.Vb(),c.Wb(28,"option",15),c.Jc(29,"8"),c.Vb(),c.Wb(30,"option",16),c.Jc(31,"9"),c.Vb(),c.Wb(32,"option",17),c.Jc(33,"10"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(34,"div",3),c.Wb(35,"div",4),c.Wb(36,"label"),c.Jc(37,"Status"),c.Vb(),c.Wb(38,"select",18),c.Wb(39,"option",7),c.Jc(40,"Status"),c.Vb(),c.Wb(41,"option",8),c.Jc(42,"Active"),c.Vb(),c.Wb(43,"option",19),c.Jc(44,"InActive"),c.Vb(),c.Vb(),c.Vb(),c.Wb(45,"div",4),c.Wb(46,"label"),c.Jc(47,"Sales Configuration"),c.Vb(),c.Wb(48,"select",20),c.ec("change",(function(t){return e.groupChanged(t.target.value)})),c.Wb(49,"option",21),c.Jc(50,"Select Group"),c.Vb(),c.Hc(51,X,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Wb(52,"div",3),c.Wb(53,"div",4),c.Wb(54,"label"),c.Jc(55,"Supplier"),c.Wb(56,"span",23),c.Jc(57,"*"),c.Vb(),c.Vb(),c.Wb(58,"select",24),c.ec("change",(function(t){return e.supplierChanged(t.target.value)})),c.Wb(59,"option",7),c.Jc(60,"Select Supplier"),c.Vb(),c.Hc(61,Y,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Hc(62,nt,62,13,"div",25),c.Hc(63,at,17,2,"div",26),c.Hc(64,st,17,2,"div",27),c.Hc(65,ct,17,2,"div",28),c.Hc(66,pt,17,2,"div",29),c.Hc(67,lt,17,2,"div",30),c.Hc(68,ut,17,2,"div",31),c.Vb(),c.Wb(69,"div",32),c.Hc(70,dt,3,0,"button",33),c.Hc(71,bt,3,0,"button",34),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.pc("formGroup",e.addMarkupForm),c.Cb(3),c.pc("ngClass",c.uc(17,rt,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.title.status)),c.Cb(4),c.pc("ngClass",c.uc(19,rt,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.priority.status)),c.Cb(27),c.pc("ngClass",c.uc(21,rt,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.is_active.status)),c.Cb(10),c.pc("ngClass",c.uc(23,rt,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.sale_id.status)),c.Cb(6),c.pc("ngForOf",e.allGroups),c.Cb(2),c.pc("ngClass",c.uc(25,rt,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.supplier_id.status)),c.Cb(8),c.pc("ngForOf",e.filteredSuppliers),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.flightsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.hotelsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.activitiesMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.carsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.transfersMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.insurancesMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.cruisesMarkup),c.Cb(2),c.pc("ngIf",e.showSaveButton),c.Cb(1),c.pc("ngIf",e.showUpdateButton))},directives:[a.B,a.p,a.i,i.n,a.c,a.o,a.h,a.x,a.s,a.A,i.o,i.p,a.j,a.t,a.a,a.y,E.b,q.c,q.b,q.a,j.a,q.d],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.outer__add-pos__title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_btn[_ngcontent-%COMP%], .tourCode_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}div.upload[_ngcontent-%COMP%]{box-sizing:border-box;height:15px;width:123px;border-radius:3px;background-color:#fff;border:.5px solid grey;box-shadow:0 .25px .1px 0 rgba(0,0,0,.5)}div.upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block!important;width:123px!important;height:15px!important;opacity:0!important;overflow:hidden!important}.file_choose[_ngcontent-%COMP%]{position:relative;left:27px;bottom:6px;color:#4f4f4f;font-family:Roboto,sans-serif;font-size:9px;line-height:10px}.uploadinImg_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.save-next_btn__text[_ngcontent-%COMP%], .uploadinImg_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:12px}.file_table__img[_ngcontent-%COMP%]{border:none;background-color:rgba(223,234,251,.37)}.save-next_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .input_mat[_ngcontent-%COMP%]{font-size:14px}.ui.pointing.secondary.menu[_ngcontent-%COMP%]{border:none}.item.stepper__progress[_ngcontent-%COMP%]{width:167px}.tab.segment.stepper__segment-outline[_ngcontent-%COMP%]{border:none;box-shadow:none}.office-info_icon[_ngcontent-%COMP%]{position:relative;top:20px;right:85px}.pos_access-rights[_ngcontent-%COMP%]{color:#828282;font-family:Roboto,sans-serif;font-size:11px;line-height:12px}.cancel_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.cancel_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.issue_date[_ngcontent-%COMP%]{text-indent:17px}.wide.field.sale_check[_ngcontent-%COMP%]{margin-top:10px}.assign_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.assign_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px}.circleIcon[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0d801c;border-radius:50%;display:inline-block;margin-top:6px}.plusIcon[_ngcontent-%COMP%]{color:#fff;font-size:17px;font-weight:100;line-height:28px;text-align:center;margin-left:0;margin-top:-3px} .mat-step-icon-content{height:19px;width:19px;color:#c8c8c8;background-color:#c8c8c8;border-radius:50%} .mat-step-icon-state-number.mat-step-icon.mat-step-icon-selected{border:1px solid #3867b1} .mat-horizontal-stepper-header-container{width:40%} .mat-step-label{color:#3867b1}.pos_btn-panel[_ngcontent-%COMP%]{position:static;right:68px;bottom:97px;text-align:right}.pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{width:104.87px;background-color:#4f4f4f}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%], .pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{width:124.87px;background-color:#3867b1}.field-inline[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:inline-block}.markup-block[_ngcontent-%COMP%]{margin-top:50px}.right.floated.two.wide.column.group_save-btn[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.ui.form[_ngcontent-%COMP%]   .six.wide.field.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}  .mat-form-field-underline{display:none} .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:0}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px}@media(max-width:1440px){.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{width:auto;margin:0 auto;position:relative;top:24px;right:-16px}}@media(max-width:1280px){.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:120px}}"]}),t})();function gt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"button",11),c.ec("click",(function(e){return c.Ac(t),c.ic().onClickAddNewMarkup(!0)})),c.Wb(1,"span",12),c.Jc(2,"Add New Markup"),c.Vb(),c.Vb()}}function ht(t,e){if(1&t){const t=c.Xb();c.Wb(0,"a",13),c.ec("click",(function(e){return c.Ac(t),c.ic().onClickListMarkup()})),c.Wb(1,"span",14),c.Rb(2,"img",15),c.Jc(3," Goto List Markup "),c.Vb(),c.Vb()}}function ft(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",16),c.Wb(1,"input",17),c.ec("ngModelChange",(function(e){return c.Ac(t),c.ic().searchObject.markupname=e})),c.Vb(),c.Wb(2,"div",18),c.Wb(3,"button",19),c.ec("click",(function(e){return c.Ac(t),c.ic().searchChange()})),c.Wb(4,"span",20),c.Jc(5," Search "),c.Vb(),c.Vb(),c.Wb(6,"button",21),c.ec("click",(function(e){return c.Ac(t),c.ic().resetFilter()})),c.Wb(7,"span",20),c.Jc(8," Reset "),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=c.ic();c.Cb(1),c.pc("ngModel",t.searchObject.markupname)}}const _t=function(t){return{"list-code-block":t}};function kt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",22),c.Wb(1,"app-add-markup",23),c.ec("dataToParent",(function(e){return c.Ac(t),c.ic().eventFromChild(e)})),c.Vb(),c.Vb()}if(2&t){const t=c.ic();c.pc("ngClass",c.uc(7,_t,t.showAddMarkupForm)),c.Cb(1),c.pc("groupId",t.groupId)("groupData",t.groups)("supplierData",t.allSuppliers)("flag",t.flag)("mark",t.markupRow)("flagEdit",t.flagEdit)}}function Mt(t,e){1&t&&c.Jc(0),2&t&&c.Lc(" ",e.value.name," ")}function Ct(t,e){1&t&&c.Sb(0)}function vt(t,e){if(1&t&&c.Jc(0),2&t){const t=c.ic().row;c.Lc(" ",t.title," ")}}function xt(t,e){1&t&&c.Jc(0," --- ")}function Ot(t,e){if(1&t&&(c.Hc(0,Ct,1,0,"ng-container",39),c.Hc(1,vt,1,1,"ng-template",null,40,c.Ic),c.Hc(3,xt,1,0,"ng-template",null,41,c.Ic)),2&t){const t=e.row,o=c.yc(2),i=c.yc(4);c.pc("ngIf",t.title&&null!=t.title)("ngIfThen",o)("ngIfElse",i)}}function Pt(t,e){1&t&&c.Jc(0),2&t&&c.Lc(" ",e.value," ")}function Vt(t,e){1&t&&c.Sb(0)}function wt(t,e){if(1&t&&c.Jc(0),2&t){const t=c.ic().value;c.Lc(" ",t.markup,"% ")}}function Wt(t,e){if(1&t&&c.Jc(0),2&t){const t=c.ic().value;c.Lc(" ",t.markup," ")}}function Ft(t,e){if(1&t&&(c.Hc(0,Vt,1,0,"ng-container",39),c.Hc(1,wt,1,1,"ng-template",null,42,c.Ic),c.Hc(3,Wt,1,1,"ng-template",null,43,c.Ic)),2&t){const t=e.value,o=c.yc(2),i=c.yc(4);c.pc("ngIf","by_percentage"==t.markup_mode)("ngIfThen",o)("ngIfElse",i)}}function yt(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Inherit "),c.Vb())}function Gt(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Override "),c.Vb())}function At(t,e){if(1&t&&(c.Hc(0,yt,2,0,"span",44),c.Hc(1,Gt,2,0,"span",44)),2&t){const t=e.value;c.pc("ngIf",1==t),c.Cb(1),c.pc("ngIf",1!=t)}}function It(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Stop Sale "),c.Vb())}function St(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Free Sale "),c.Vb())}function Jt(t,e){if(1&t&&(c.Hc(0,It,2,0,"span",44),c.Hc(1,St,2,0,"span",44)),2&t){const t=e.value;c.pc("ngIf",1==t.is_stop_sale),c.Cb(1),c.pc("ngIf",1==t.is_free_sale)}}function Nt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",47),c.ec("click",(function(e){c.Ac(t);const o=c.ic().row;return c.ic(3).statusToggle(o)})),c.Wb(1,"i",48),c.Rb(2,"img",49),c.Vb(),c.Vb()}}function Rt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",50),c.ec("click",(function(e){c.Ac(t);const o=c.ic().row;return c.ic(3).statusToggle(o)})),c.Wb(1,"i",51),c.Rb(2,"img",52),c.Vb(),c.Vb()}}function Ht(t,e){if(1&t&&(c.Hc(0,Nt,3,0,"span",45),c.Hc(1,Rt,3,0,"span",46)),2&t){const t=e.value;c.pc("ngIf",1==t),c.Cb(1),c.pc("ngIf",1!=t)}}function Bt(t,e){1&t&&(c.Jc(0),c.jc(1,"date")),2&t&&c.Kc(c.lc(1,1,e.value,"dd/MM/yyyy"))}function zt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"span",53),c.ec("click",(function(o){c.Ac(t);const i=e.row;return c.ic(3).editMark(i)})),c.Wb(1,"i",54),c.Rb(2,"img",55),c.Vb(),c.Vb(),c.Wb(3,"span",56),c.ec("click",(function(o){c.Ac(t);const i=e.row;return c.ic(3).deleteMark(i)})),c.Wb(4,"i",54),c.Rb(5,"img",57),c.Vb(),c.Vb()}}const Lt=function(){return{prop:"created",dir:"desc"}},Dt=function(t){return[t]};function Tt(t,e){if(1&t){const t=c.Xb();c.Wb(0,"div",26),c.Wb(1,"ngx-datatable",27,28),c.ec("page",(function(e){return c.Ac(t),c.ic(2).pageCallback(e)})),c.Wb(3,"ngx-datatable-column",29),c.Hc(4,Mt,1,1,"ng-template",30),c.Vb(),c.Wb(5,"ngx-datatable-column",31),c.Hc(6,Ot,5,3,"ng-template",30),c.Vb(),c.Wb(7,"ngx-datatable-column",32),c.Hc(8,Pt,1,1,"ng-template",30),c.Vb(),c.Wb(9,"ngx-datatable-column",33),c.Hc(10,Ft,5,3,"ng-template",30),c.Vb(),c.Wb(11,"ngx-datatable-column",34),c.Hc(12,At,2,2,"ng-template",30),c.Vb(),c.Wb(13,"ngx-datatable-column",35),c.Hc(14,Jt,2,2,"ng-template",30),c.Vb(),c.Wb(15,"ngx-datatable-column",36),c.Hc(16,Ht,2,2,"ng-template",30),c.Vb(),c.Wb(17,"ngx-datatable-column",37),c.Hc(18,Bt,2,4,"ng-template",30),c.Vb(),c.Wb(19,"ngx-datatable-column",38),c.Hc(20,zt,6,0,"ng-template",30),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=c.ic(2);c.Cb(1),c.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",t.filteredMarkupsList)("count",t.totalCount)("offset",t.offset)("externalPaging",!0)("sorts",c.uc(10,Dt,c.tc(9,Lt)))}}function $t(t,e){if(1&t&&(c.Wb(0,"div",24),c.Hc(1,Tt,21,12,"div",25),c.Vb()),2&t){const t=c.ic();c.Cb(1),c.pc("ngIf",t.showListMarkup)}}const Ut=function(t){return{"head-search-block":t}},Et=function(t){return{"list-search-block":t}};let qt=(()=>{class t{constructor(t,e){this.MarkupConfigurationService=t,this.toastr=e,this.markupsList=[],this.filteredMarkupsList=[],this.showListMarkup=!0,this.showAddMarkupForm=!1,this.filteredSuppliers=[],this.errMsg="",this.searchObject={markupname:""},this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.markupRow=[],this.groups=[],this.toggleObj={},this.separatorKeysCodes=[T.g,T.c],this.offset=0,this.totalCount=0,this.filterParams={title:null,page:this.offset},this.filterGroup={limit:1500},this.filterPagination=!1,this.onClickAddNewMarkup=t=>{this.flag=t,this.flagEdit=!1,this.showAddMarkupForm=!0,this.showListMarkup=!1,this.makeJqueryFields(),this.fetchAllGroups(this.filterGroup)},this.onClickListMarkup=()=>{this.flag=!1,this.flagEdit=!1,this.showListMarkup=!0,this.showAddMarkupForm=!1}}ngOnInit(){this.fetchAllMarkups(this.filterParams),this.fetchAllSuppliers({}),this.fetchAllGroups(this.filterGroup)}fetchAllSuppliers(t){this.MarkupConfigurationService.FetchAllSuppliers(t).subscribe(t=>{t.status&&(this.allSuppliers=t.result,this.filteredSuppliers=this.allSuppliers)},t=>{console.log("erer ",t)})}ngOnChanges(t){Object.keys(t).indexOf("sale_id")}searchChange(){this.filterPagination=!0,this.filterParams.title=this.searchObject.markupname,this.MarkupConfigurationService.searchMarkupByName(this.filterParams).subscribe(t=>{t.status?(this.filteredMarkupsList=t.result.data,this.totalCount=t.result.total,this.offset=t.result.page):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}editMark(t){this.makeJqueryFields(),this.markupRow=t,this.flag=!1,this.flagEdit=!0,this.showAddMarkupForm=!0,this.showListMarkup=!1,this.fetchAllGroups(this.filterGroup)}fetchAllGroups(t){this.MarkupConfigurationService.GetAllGroups(this.filterGroup).subscribe(t=>{if(t.status){var e=t.result.data.filter((function(t){return 1!=t.status}));this.allGroups=e,this.groups=this.allGroups}},t=>{console.log("erer ",t)})}deleteMark(t){b.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&this.MarkupConfigurationService.deleteMarkup(t.markup_id).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllMarkups(this.filterParams)):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})})}fetchAllMarkups(t){this.MarkupConfigurationService.GetAllMarkups(this.filterParams).subscribe(t=>{t.status?(this.markupsList=t.result.data,this.filteredMarkupsList=t.result.data,this.totalCount=t.result.total,this.offset=t.result.page):this.toastr.error(`${t.message}`,`${t.message}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}ngAfterViewInit(){}makeJqueryFields(){$(document).ready((function(){$(".dropdown-supplier").dropdown({placeholder:"Select Supplier"}),$(".dropdown-group").dropdown({placeholder:"Select Group"}),$(".tagsinput").dropdown({placeholder:"Select Origin Airport"})}))}eventFromChild(t){this.showAddMarkupForm=!1,this.showListMarkup=!0,this.fetchAllMarkups(this.filterParams)}resetFilter(){this.searchObject.markupname="",this.fetchAllMarkups(this.filterParams)}statusToggle(t){this.toggleObj.id=t.markup_id,this.toggleObj.status=t.is_active,this.toggleObj.table="markup",this.MarkupConfigurationService.onStatusToggle(this.toggleObj).subscribe(t=>{200==t.status?this.fetchAllMarkups(this.filterParams):this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}pageCallback(t){this.filterParams.page=t.offset,this.filterPagination?this.searchChange():this.fetchAllMarkups(this.filterParams)}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(p.a),c.Qb(u.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-mark"]],inputs:{sale_id:"sale_id",allGroups:"allGroups",allSuppliers:"allSuppliers",showListMarkup:"showListMarkup",showAddMarkupForm:"showAddMarkupForm"},features:[c.Ab()],decls:11,vars:11,consts:[[1,"ui","fluid","container"],["name","form","novalidate","",1,"ui","form"],["f","ngForm"],[3,"ngClass"],[1,"fields","search-section",3,"ngClass"],[1,"four","wide","field","bookings_btn-panel"],["class","ui primary button filterMarkUp_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui filterMarkUp_btn goto_list","tabindex","0",3,"click",4,"ngIf"],["class","twelve wide field search-btn-block",4,"ngIf"],["class","list-markup result-block",3,"ngClass",4,"ngIf"],["class","list-markup result-block",4,"ngIf"],["tabindex","0",1,"ui","primary","button","filterMarkUp_btn",3,"click"],[1,"filterMarkUp_list"],["href","javascript:void(0)","tabindex","0",1,"ui","filterMarkUp_btn","goto_list",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"twelve","wide","field","search-btn-block"],["type","text","placeholder","Markup Name","name","markupname",3,"ngModel","ngModelChange"],[1,"bookings_btn-panel"],["tabindex","0",1,"ui","primary","button","addNewGroup_btn",3,"click"],[1,"addNewGroup-text"],["tabindex","0",1,"ui","reset","button","addNewGroup_btn",3,"click"],[1,"list-markup","result-block",3,"ngClass"],[3,"groupId","groupData","supplierData","flag","mark","flagEdit","dataToParent"],[1,"list-markup","result-block"],["class","user-table-list b2c-list-user-table",4,"ngIf"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","count","offset","externalPaging","sorts","page"],["table",""],["name","Group Name","prop","sale"],["ngx-datatable-cell-template",""],["name","Markup Name"],["name","Markup id","prop","markup_id"],["name","Mark up Value","prop","markup_flight"],["name","Preference","prop","priority"],["name","Sale Type","prop","sale"],["name","Status","prop","is_active"],["name","Created","prop","created"],["name","Actions"],[4,"ngIf","ngIfThen","ngIfElse"],["showTitle",""],["noTitle",""],["showPer",""],["noPer",""],[4,"ngIf"],["title","Active",3,"click",4,"ngIf"],["title","Inactive",3,"click",4,"ngIf"],["title","Active",3,"click"],["title","click to deactivate",1,"icon"],["src","./../../../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["title","Inactive",3,"click"],["title","click to activate",1,"icon"],["src","./../../../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","cal"],["title","Edit User",1,"action",3,"click"],[1,"icon"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete",1,"action",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1,2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"div",5),c.Hc(6,gt,3,0,"button",6),c.Hc(7,ht,4,0,"a",7),c.Vb(),c.Hc(8,ft,9,1,"div",8),c.Vb(),c.Vb(),c.Hc(9,kt,2,9,"div",9),c.Hc(10,$t,2,1,"div",10),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.pc("ngClass",c.uc(7,Ut,e.showAddMarkupForm)),c.Cb(1),c.pc("ngClass",c.uc(9,Et,e.showAddMarkupForm)),c.Cb(2),c.pc("ngIf",e.showListMarkup),c.Cb(1),c.pc("ngIf",e.showAddMarkupForm),c.Cb(1),c.pc("ngIf",e.showListMarkup),c.Cb(1),c.pc("ngIf",e.showAddMarkupForm),c.Cb(1),c.pc("ngIf",e.showListMarkup))},directives:[a.B,a.p,a.q,i.n,i.p,a.c,a.o,a.r,mt,r.c,r.b,r.a],pipes:[i.f],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0 20px 0 15px}.markup_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;color:#181b20;font-size:14px}.filterMarkUp_list[_ngcontent-%COMP%]{white-space:nowrap}.addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{font-size:14px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{display:inline-block;color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;cursor:pointer;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}.markup-block[_ngcontent-%COMP%]{margin-top:50px}.right[_ngcontent-%COMP%]{text-align:right}.field-inline[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%], span.action[_ngcontent-%COMP%]{display:inline-block}span.action[_ngcontent-%COMP%]{margin:0 5px;font-weight:700;text-decoration:underline;cursor:pointer}mat-chip[_ngcontent-%COMP%]{margin-bottom:12px}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:14px;margin-top:10px}.field-inline_label[_ngcontent-%COMP%]{margin-bottom:15px}.matForm[_ngcontent-%COMP%]{width:100%}.chip-list[_ngcontent-%COMP%]{margin-top:12px}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.search-section[_ngcontent-%COMP%]{padding:0 32px}.search-section.list-search-block[_ngcontent-%COMP%]{margin:0;width:1100px!important;padding-left:0}.search-section.list-search-block[_ngcontent-%COMP%]   .bookings_btn-panel[_ngcontent-%COMP%]{padding-left:0;padding-bottom:20px}.search-section[_ngcontent-%COMP%]   .search-btn-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30%;margin-right:12px}.search-btn-block[_ngcontent-%COMP%]{text-align:right}.search-btn-block[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}.search-btn-block[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%]{position:relative;top:0;width:100%!important}.search-btn-block[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%]   .reset.button[_ngcontent-%COMP%]{margin-right:0}.list-code-block[_ngcontent-%COMP%]{margin:24px 24px 48px}.head-search-block[_ngcontent-%COMP%]{padding:0 24px}.ui.primary.addNewGroup_btn[_ngcontent-%COMP%]{top:8px;margin-right:12px}.ui.form[_ngcontent-%COMP%]{margin-bottom:200px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:0;margin-top:24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0}.ui.form[_ngcontent-%COMP%]   .list-search-block[_ngcontent-%COMP%]{margin-top:20px}@media(max-width:1440px){.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}}@media(max-width:1280px){.head-search-block[_ngcontent-%COMP%]{padding:0 20px}}"]}),t})();const jt=[{path:"",component:(()=>{class t{constructor(t,e,o){this.MarkupConfigurationService=t,this.posService=e,this.toastr=o,this.showListForm=!0,this.showAddGroupForm=!1,this.showListMarkup=!0,this.showAddMarkupForm=!1,this.allPos=[],this.allSuppliers=[],this.NewGroupSeasonality=[],this.filteredGroupSeasonality=[],this.saleIdClicked="-1",this.offset=0,this.totalCount=0,this.filterParams={page:this.offset}}ngOnInit(){this.fetchAllGroups(this.filterParams),this.fetchAllSuppliers({})}fetchAllGroups(t){this.MarkupConfigurationService.GetAllGroups(t).subscribe(t=>{t.status?(this.NewGroupSeasonality=t.result.data,this.totalCount=t.result.total,this.offset=t.result.page):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllPOS(t){this.posService.fetchAllPointofSale(t).subscribe(t=>{t.status?this.allPos=t.result.data:this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllSuppliers(t){this.MarkupConfigurationService.GetAllSuppliers(t).subscribe(t=>{t.status?this.allSuppliers=t.result:this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}addMarkupingroup(t){this.saleIdClicked=t.sale_id,this.showAddMarkupForm=!0,this.showListMarkup=!1,$("#tab-2").click()}ngAfterViewInit(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown()}))}pageCallback(t){this.filterParams.page=t.offset,this.fetchAllGroups(this.filterParams)}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(p.a),c.Qb(l.a),c.Qb(u.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-markup-configuration"]],decls:13,vars:5,consts:[[1,"outer-segment","animated","fadeIn"],[1,"markup_list","title-block"],[1,"markup_title","title"],[1,"ui","top","attached","tabular","menu"],["id","tab-1","data-tab","first",1,"active","item","create_b2b_title"],["id","tab-2","data-tab","second",1,"item","corporate_staff_list"],["data-tab","first",1,"ui","bottom","attached","active","tab","segment","tabContent-block"],["data-tab","second",1,"ui","bottom","attached","tab","segment","tabContent-block"],[3,"allSuppliers","allGroups","sale_id","showListMarkup","showAddMarkupForm"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"h3",2),c.Jc(3,"Mark Up Configurations"),c.Vb(),c.Vb(),c.Wb(4,"div",3),c.Wb(5,"div",4),c.Jc(6,"Group / Seasonality"),c.Vb(),c.Wb(7,"div",5),c.Jc(8,"Markup Rules"),c.Vb(),c.Vb(),c.Wb(9,"div",6),c.Rb(10,"app-sale"),c.Vb(),c.Wb(11,"div",7),c.Rb(12,"app-mark",8),c.Vb(),c.Vb()),2&t&&(c.Cb(12),c.pc("allSuppliers",e.allSuppliers)("allGroups",e.NewGroupSeasonality)("sale_id",e.saleIdClicked)("showListMarkup",e.showListMarkup)("showAddMarkupForm",e.showAddMarkupForm))},directives:[D,qt],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0}.markup_list[_ngcontent-%COMP%]{padding:0 20px}.markup_title[_ngcontent-%COMP%]{margin:0;font-style:normal;font-weight:700!important;font-size:20px;line-height:23px;color:#181b20}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.addNewGroup_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.addNewGroup-text[_ngcontent-%COMP%]{font-size:13px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup_btn[_ngcontent-%COMP%], .save-apply_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{display:inline-block;color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;cursor:pointer;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}@media(max-width:1440px){.markup_list[_ngcontent-%COMP%]{margin-left:24px;padding:0}}@media(max-width:1280px){.markup_list[_ngcontent-%COMP%]{margin-left:20px}}"]}),t})()}];let Xt=(()=>{class t{}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(jt)],s.j]}),t})();var Yt=o("iadO"),Kt=o("FKr1"),Qt=o("qFsG"),Zt=o("/1cH");o.d(e,"MarkupConfigurationModule",(function(){return te}));let te=(()=>{class t{}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},imports:[[i.c,Xt,n.c,a.v,r.d,a.k,Yt.a,E.d,Kt.l,Qt.c,q.e,j.b,Zt.b]]}),t})()}}]);