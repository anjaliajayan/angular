(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/4yY":function(e){e.exports=JSON.parse('[{"name":"Users","permissions":[{"name":"List Users","allow":["listUsers","users"]},{"name":"Create New User","allow":["create-new-user","users/new"]},{"name":"Update User","allow":["update-user","users"]},{"name":"Fetch user information","allow":["fetch-new-user","users"]},{"name":"Update My Profile","allow":["logedin-user-info","user-role-management/update-profile"]},{"name":"Permissions","allow":["fetch-new-user","users/permissions"]}]},{"name":"Point of Sale Management","permissions":[{"name":"List All POS","allow":["organization/pos-list","point-sales-management/list-point-sale"]},{"name":"Add Point of Sale","allow":["organization/create-agency","point-sales-management/add-point-sale/pos-info"]},{"name":"Update Point of Sale","allow":["organization/update-agency","point-sales-management/add-point-sale/pos-edit"]},{"name":"Fetch POS Information","allow":["organization/fetch-pos","btn-edit"]},{"name":"Delete POS","allow":["organization/delete-pos","btn-delete"]},{"name":"List Registrations","allow":["registration-list","point-sales-management/registration"]}]},{"name":"Setup/Configurations","permissions":[{"name":"List All Group/Seasonality","allow":["fetch-all-sales","setup-configuration/markup-configuration"]},{"name":"Add/Udate Group/Seasonality","allow":["add-sale","setup-configuration/markup-configuration"]},{"name":"Search Group/Seasonality","allow":["search-sales","setup-configuration/markup-configuration"]},{"name":"Delete Group/Seasonality","allow":["delete-sale","setup-configuration/markup-configuration"]},{"name":"List All Markup Rules","allow":["fetch-all-markups","setup-configuration/markup-configuration"]},{"name":"Add/Udate Markup Rules","allow":["add-markup","setup-configuration/markup-configuration"]},{"name":"Search Markup Rules","allow":["search-markups","setup-configuration/markup-configuration"]},{"name":"Delete Markup Rules","allow":["delete-markup","setup-configuration/markup-configuration"]},{"name":"List All Roles","allow":["roles/list","setup-configuration/roles"]},{"name":"Add/Udate Roles","allow":["roles/add","setup-configuration/roles"]},{"name":"Fetch Roles Information","allow":["roles/get","setup-configuration/roles"]},{"name":"Delete Roles","allow":["roles/delete","setup-configuration/roles"]},{"name":"List All Tour Codes","allow":["fetch-all-tourcodes","setup-configuration/airline-deals"]},{"name":"Add Tour Code","allow":["create-new-tourcode","setup-configuration/airline-deals"]},{"name":"Udate Tour Code","allow":["update-tourcode","setup-configuration/airline-deals"]},{"name":"Fetch Tour Code Information","allow":["fetch-tourcode","setup-configuration/airline-deals"]},{"name":"Delete Tour Code","allow":["remove-tourcode","setup-configuration/airline-deals"]},{"name":"List All Tour Commissions","allow":["fetch-all-commissions","setup-configuration/airline-deals"]},{"name":"Add Tour Commission","allow":["create-new-commission","setup-configuration/airline-deals"]},{"name":"Udate Tour Commission","allow":["update-commission","setup-configuration/airline-deals"]},{"name":"Fetch Tour Commission Information","allow":["fetch-commission","setup-configuration/airline-deals"]},{"name":"Delete Tour Commission","allow":["remove-commission","setup-configuration/airline-deals"]},{"name":"List All Tour Routes","allow":["fetch-all-routes","setup-configuration/airline-deals"]},{"name":"Add Tour Route","allow":["create-new-routes","setup-configuration/airline-deals"]},{"name":"Udate Tour Route","allow":["update-routes","setup-configuration/airline-deals"]},{"name":"Fetch Tour Route Information","allow":["fetch-routes","setup-configuration/airline-deals"]},{"name":"Delete Tour Route","allow":["remove-routes","setup-configuration/airline-deals"]},{"name":"List All Suppliers","allow":["read-all-supplier","setup-configuration/supplier"]},{"name":"Udate Supplier","allow":["update-supplier","setup-configuration/edit-supplier"]},{"name":"List All Currencies","allow":["fetch-all-currency","setup-configuration/currency-configuration"]},{"name":"Add Currency","allow":["create-new-currency","setup-configuration/currency-configuration"]},{"name":"Udate Currency","allow":["update-currency","setup-configuration/currency-configuration"]},{"name":"Fetch Currency Information","allow":["fetch-currency","setup-configuration/currency-configuration"]},{"name":"Delete Currency","allow":["remove-currency","setup-configuration/currency-configuration"]},{"name":"List All Email Templates","allow":["fetch-all-email-template","setup-configuration/email-templates"]},{"name":"Udate Email Templates","allow":["update-email-template","setup-configuration/email-templates"]},{"name":"Fetch Email Templates Information","allow":["fetch-email-template","setup-configuration/email-templates"]}]},{"name":"Bookings","permissions":[{"name":"List All Bookings","allow":["fetch-all-bookings","bookings"]},{"name":"Export Bookings","allow":["export-bookings","bookings"]}]},{"name":"Accounts","permissions":[{"name":"List All Transactions","allow":["transaction-list","accounts/transactions"]},{"name":"Export Transactions","allow":["export-transaction","accounts/transactions"]},{"name":"Add Agent Transaction","allow":["make-agent-transaction","accounts/transactions"]},{"name":"List All Top UP","allow":["get-topup-list","accounts/transactions"]},{"name":"Fetch Top UP","allow":["get-topup-view","accounts/transactions"]},{"name":"Update Top UP","allow":["update-topup-request","accounts/transactions"]},{"name":"List All Floating Deposit","allow":["get-floating-deposit-list","accounts/transactions"]},{"name":"Fetch Floating Deposit","allow":["get-topup-view","accounts/transactions"]},{"name":"Update Top UP","allow":["update-topup-request","accounts/transactions"]}]},{"name":"Report","permissions":[{"name":"List All Bookings","allow":["fetch-all-bookings","report/booking-report"]},{"name":"Search Bookings","allow":["search-bookings-by-organisation","report/booking-report"]},{"name":"Export Booking Report","allow":["export-booking-report","report/booking-report"]},{"name":"Search Segments","allow":["search-segments","report/segment-report"]},{"name":"MIS (Count Platform)","allow":["Flight-Search-Log/count","report/mis-report"]},{"name":"MIS (Monthly Wise)","allow":["Flight-Search-Log/monthlwise","report/mis-report"]},{"name":"Search Log","allow":["fetch-all-Flight-Search-Log","report/search-log-report"]},{"name":"List All Audit Trail Log","allow":["fetch-all-Audit-Trail","report/audit-report"]},{"name":"Search Audit Trail Log","allow":["get-audit-trails","report/audit-report"]},{"name":"Ticket Log","allow":["search-tickets-new","report/ticket-report"]},{"name":"Dynamic Report","allow":["dynamic-report-data","report/dynamic-report"]}]},{"name":"Flight","permissions":[{"name":"Search","allow":["flights-search","search/flights"]},{"name":"Book","allow":["flight-booking","search/flights"]},{"name":"Ticket","allow":["flight-ticket","search/flights"]},{"name":"Cancel","allow":["flight-cancel","search/flights"]},{"name":"Amend","allow":["flight-amend","search/flights"]},{"name":"Refund","allow":["flight-refund","search/flights"]},{"name":"Markup","allow":["flight-markup","search/flights"]}]},{"name":"Hotels","permissions":[{"name":"Search","allow":["hotel-search","search/hotels"]},{"name":"Book","allow":["hotel-room-book","search/hotels"]},{"name":"Details","allow":["hotel-room-details","search/hotels"]},{"name":"Cancel","allow":["hotel-booking-cancel","search/hotels"]}]},{"name":"Cars","permissions":[{"name":"Search","allow":["car-search","search/cars"]}]},{"name":"Extras","permissions":[{"name":"Fetch All Organization","allow":["fetch-all-organization","users"]},{"name":"Roles List","allow":["roles/list","users"]},{"name":"Fetch Supplier List","allow":["fetch-all-supplier","report/booking-report"]},{"name":"Countries List","allow":["get-country","users"]},{"name":"Toggle Status","allow":["toggle-status","report/booking-report"]},{"name":"Currency List","allow":["get-currency-list","accounts/transactions"]},{"name":"List Airport","allow":["get-airports-cache","report/segment-report"]},{"name":"List Airlines","allow":["get-airlines-list","report/segment-report"]}]}]')},grrx:function(e,t,o){"use strict";o.r(t);var n=o("ofXK"),i=o("3Pt+"),r=o("gren"),a=o("tyNb"),s=o("PSD3"),l=o.n(s),c=o("fXoL"),u=o("AytR"),p=o("tk/3"),b=o("z6cu"),m=o("un/a"),g=o("JIr8");let d=(()=>{class e{constructor(e){this.http=e,this.url=u.a.serverURL,this.pager={},this.pageOfItems=[],this.httpOptions={headers:new p.e({"Content-Type":"application/json"})}}getRoles(){return this.http.get(`${this.url}/api/roles/list`).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}addRole(e){return this.http.post(`${this.url}/api/roles/add`,e).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}getRole(e){return this.http.get(`${this.url}/api/roles/get/${e}`).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}updateRole(e,t){return this.http.put(`${this.url}/api/roles/update/${e}`,t).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}deleteRole(e){return this.http.post(`${this.url}/api/roles/delete/${e}`,"").pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}errorHandl(e){let t="";return t=e.error instanceof ErrorEvent?e.error.message:`Error Code: ${e.status}\nMessage: ${e.message}`,console.log(t),Object(b.a)(t)}}return e.\u0275fac=function(t){return new(t||e)(c.ac(p.b))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=o("5eHb");const f=function(e){return["edit",e]};function C(e,t){if(1&e){const e=c.Xb();c.Wb(0,"tr"),c.Wb(1,"td",14),c.Jc(2),c.Vb(),c.Wb(3,"td",15),c.Jc(4),c.Vb(),c.Wb(5,"td",16),c.Wb(6,"div",17),c.Wb(7,"a",18),c.Rb(8,"i",19),c.Vb(),c.Wb(9,"button",20),c.ec("click",(function(o){c.Ac(e);const n=t.$implicit;return c.ic().delete(n.role_id)})),c.Rb(10,"i",21),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&e){const e=t.$implicit;c.Cb(2),c.Kc(e.code),c.Cb(2),c.Kc(e.name),c.Cb(3),c.pc("routerLink",c.uc(3,f,e.role_id))}}let O=(()=>{class e{constructor(e,t){this.roleService=e,this.toastr=t,this.loading=!1}ngOnInit(){this.fetchRoles()}fetchRoles(){this.loading=!0,this.roleService.getRoles().subscribe(e=>{this.roles=e.data},e=>{this.toasterMessage("error",e)})}delete(e){l.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&this.roleService.deleteRole(e).subscribe(t=>{t.status?(this.roles.filter((function(t,o,n){e===t.role_id&&n.splice(o,1)})),this.toasterMessage("success","Role deleted successfully")):this.toasterMessage("error",t.msg)},e=>{this.toasterMessage("error",e)})})}toasterMessage(e="success",t){"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(d),c.Qb(h.b))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-roles"]],decls:25,vars:1,consts:[[1,"outer-segment","animated","fadeIn"],[1,"markup_list"],[1,"markup_title"],["data-tab","first",1,"ui","bottom","attached","active","tab","segment","tabContent-block"],[1,"ui","form"],[1,"two","fields","search-section"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel"],["routerLink","create",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"result-block"],[1,"ui","celled","table"],["width","220"],[4,"ngFor","ngForOf"],["data-label","Code"],["data-label","Name"],["data-label","Name",1,"text-center"],["role","group","aria-label","Basic example",1,"btn-group"],["routerLinkActive","router-link-active",1,"ui","primary","button",3,"routerLink"],[1,"fa","fa-edit"],[1,"ui","red","button",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(c.Rb(0,"ngx-ui-loader"),c.Wb(1,"div",0),c.Wb(2,"div",1),c.Wb(3,"h3",2),c.Jc(4,"Roles "),c.Vb(),c.Vb(),c.Wb(5,"div",3),c.Wb(6,"div",4),c.Wb(7,"div",5),c.Rb(8,"div",6),c.Wb(9,"div",7),c.Wb(10,"a",8),c.Wb(11,"span",9),c.Jc(12,"Create Role"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(13,"div",10),c.Wb(14,"table",11),c.Wb(15,"thead"),c.Wb(16,"tr"),c.Wb(17,"th"),c.Jc(18,"Code"),c.Vb(),c.Wb(19,"th"),c.Jc(20,"Role"),c.Vb(),c.Wb(21,"th",12),c.Jc(22,"\xa0"),c.Vb(),c.Vb(),c.Vb(),c.Wb(23,"tbody"),c.Hc(24,C,11,5,"tr",13),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Cb(24),c.pc("ngForOf",t.roles))},directives:[r.c,a.i,n.o,a.h],styles:['.action[_ngcontent-%COMP%]{display:inline-block}.action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;margin:0 10px;cursor:pointer}.action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px}.roleActionButton[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.roleActionButton[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;font-size:14px}.goto_list[_ngcontent-%COMP%], .goto_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.mar-right-15[_ngcontent-%COMP%]{margin-right:15px}.mar-top-15[_ngcontent-%COMP%]{margin-top:15px}.permission-block[_ngcontent-%COMP%]{margin-top:15px;display:block}.padd-left-15[_ngcontent-%COMP%]{padding-left:15px}.showOnlyParent[_ngcontent-%COMP%]{width:136px;float:left;padding-bottom:8px}.ui.bottom.attached.tab[_ngcontent-%COMP%]{padding:24px 0}.action[_ngcontent-%COMP%]   .icon.edit_icon[_ngcontent-%COMP%]{margin:0}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px;padding-left:0}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.search-section[_ngcontent-%COMP%]{padding-bottom:30px}.outer-segment[_ngcontent-%COMP%]{margin:0}.outer-segment[_ngcontent-%COMP%]   .markup_list[_ngcontent-%COMP%]{padding:0 24px}.outer-segment[_ngcontent-%COMP%]   .markup_list[_ngcontent-%COMP%]   .markup_title[_ngcontent-%COMP%]{margin:0;font-style:normal;font-weight:700!important;font-size:20px;line-height:23px;color:#181b20}i.icon[_ngcontent-%COMP%]{margin-top:24px}.role-perm-label[_ngcontent-%COMP%]{display:block;width:100%}.role-perm-block[_ngcontent-%COMP%]{border:1px solid #dadce0;box-sizing:border-box;border-radius:10px;margin:8px}.role-perm-block[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{margin-top:0}.role-perm-block[_ngcontent-%COMP%]   .pos_access-rights[_ngcontent-%COMP%]{color:rgba(24,27,32,.7);font-size:13px}.role-perm-block[_ngcontent-%COMP%]   .pos_access-rights.head[_ngcontent-%COMP%]{color:#181b20;font-weight:500!important;padding-bottom:25px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{border-radius:50%;width:15px;height:15px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{left:-1px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:before, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:none}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{font-size:10px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{background:#437ada}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:after, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{color:#fff}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]{width:100%}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{cursor:pointer;float:right}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   .pos_access-rights.head[_ngcontent-%COMP%]{color:#181b20;font-weight:700!important}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:before, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:1px solid rgba(6,40,98,.3)}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:after, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{content:"\u2022";font-size:36px;top:-5px;color:#1b61dd}.mt-12[_ngcontent-%COMP%]{margin:12px}.ui.segment[_ngcontent-%COMP%]{margin-bottom:60px}.search-section[_ngcontent-%COMP%]{padding:0 30px;text-align:right}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{text-align:left;font-weight:500!important;font-size:13px;line-height:15px;color:#1b1f26}.search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{text-align:left;padding:0!important}.save-btn-block[_ngcontent-%COMP%]{text-align:right;position:relative;top:96px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   .ui.reset.button.tourCode_btn[_ngcontent-%COMP%]{margin-right:14px}.child-container[_ngcontent-%COMP%]{display:inline-block;min-width:188px}.child-obj-block[_ngcontent-%COMP%]{border:1px solid #dadce0;box-sizing:border-box;border-radius:10px;margin:8px;padding:8px;max-width:94px}.child-obj-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]{display:block;padding:8px}@media(max-width:1440px){.bookings_btn-panel[_ngcontent-%COMP%]   .roleActionButton[_ngcontent-%COMP%]{margin-right:0}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0}.child-container[_ngcontent-%COMP%]{min-width:auto}.save-btn-block[_ngcontent-%COMP%]{right:-30px}}@media(max-width:1280px){.save-btn-block[_ngcontent-%COMP%]{right:-22px}}']}),e})();var P=o("/4yY");function w(e,t){1&e&&(c.Wb(0,"small"),c.Jc(1,"*"),c.Vb())}function M(e,t){1&e&&(c.Wb(0,"small"),c.Jc(1,"*"),c.Vb())}function _(e,t){if(1&e&&(c.Wb(0,"div",26),c.Wb(1,"div",27),c.Rb(2,"input",28),c.Wb(3,"label",29),c.Jc(4),c.Vb(),c.Vb(),c.Vb()),2&e){const e=t.$implicit,o=t.index,n=c.ic().index;c.Cb(2),c.sc("id","check-",n,"",o,""),c.pc("formControlName",e.allow[0]),c.Cb(1),c.sc("for","check-",n,"",o,""),c.Cb(1),c.Kc(e.name)}}function x(e,t){if(1&e&&(c.Wb(0,"div",20),c.Wb(1,"h3",21),c.Jc(2),c.Vb(),c.Wb(3,"div",22),c.Wb(4,"div",23),c.Wb(5,"div",24),c.Wb(6,"div",11),c.Hc(7,_,5,6,"div",25),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){const e=t.$implicit;c.Cb(2),c.Kc(e.name),c.Cb(5),c.pc("ngForOf",e.permissions)}}function k(e,t){1&e&&(c.Wb(0,"small"),c.Jc(1,"*"),c.Vb())}function v(e,t){1&e&&(c.Wb(0,"small"),c.Jc(1,"*"),c.Vb())}function W(e,t){if(1&e&&(c.Wb(0,"div",26),c.Wb(1,"div",27),c.Rb(2,"input",28),c.Wb(3,"label",29),c.Jc(4),c.Vb(),c.Vb(),c.Vb()),2&e){const e=t.$implicit,o=t.index,n=c.ic().index;c.Cb(2),c.sc("id","check-",n,"",o,""),c.pc("formControlName",e.allow[0]),c.Cb(1),c.sc("for","check-",n,"",o,""),c.Cb(1),c.Kc(e.name)}}function V(e,t){if(1&e&&(c.Wb(0,"div",20),c.Wb(1,"h3",21),c.Jc(2),c.Vb(),c.Wb(3,"div",22),c.Wb(4,"div",23),c.Wb(5,"div",24),c.Wb(6,"div",11),c.Hc(7,W,5,6,"div",25),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){const e=t.$implicit;c.Cb(2),c.Kc(e.name),c.Cb(5),c.pc("ngForOf",e.permissions)}}const R=[{path:"",component:O},{path:"list",redirectTo:"",pathMatch:"prefix"},{path:"create",component:(()=>{class e{constructor(e,t,o,n){this._fb=e,this.toastr=t,this.roleService=o,this.router=n,this.allPermissions=P,this.isSubmitted=!1}ngOnInit(){this.createRolePermissionForm()}btnSubmitHandler(){if(this.isSubmitted=!0,this.rolePermissionForm.invalid)return void this.toasterMessage("error","Role Name & code is required.");const e=Object.keys(this.gfc).map(e=>({name:e,data:this.gfc[e],endpoint:this.gfc[e].value}));let t=[];e.forEach(e=>{const o=e.name;"name"==o||"code"==o||t.push({[o]:!!e.data.value})}),this.roleService.addRole({name:this.gfc.name.value,code:this.gfc.code.value,permissions:t}).subscribe(e=>{e.status?(this.toasterMessage("success",e.message),this.rolePermissionForm.reset(),this.router.navigateByUrl("setup-configuration/roles")):this.toasterMessage("error",e.message)})}createRolePermissionForm(){this.rolePermissionForm=this._fb.group({name:[null,i.z.required],code:[null,i.z.required]}),this.createPermissions()}createPermissions(){for(let e of this.allPermissions)for(let t of e.permissions)this.rolePermissionForm.addControl(t.allow[0],new i.g(!1))}get gfc(){return this.rolePermissionForm.controls}toasterMessage(e="success",t){"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(i.f),c.Qb(h.b),c.Qb(d),c.Qb(a.f))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-create-role"]],decls:31,vars:4,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","ngSubmit"],[1,"ui","grid"],[1,"four","wide","column"],[1,"field"],[4,"ngIf"],["type","text","placeholder","Role Name","formControlName","name"],["type","text","placeholder","Role Name","formControlName","code"],["class","sixteen wide column",4,"ngFor","ngForOf"],[1,"mt-2","text-right"],["type","submit",1,"ui","primary","button"],[1,"sixteen","wide","column"],[1,"ui","header"],[1,"ui","card",2,"width","100%"],[1,"content"],[1,"description"],["class","three wide column",4,"ngFor","ngForOf"],[1,"three","wide","column"],[1,"ui","checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[3,"for"]],template:function(e,t){1&e&&(c.Wb(0,"h3"),c.Wb(1,"span",0),c.Jc(2,"Create Role"),c.Vb(),c.Vb(),c.Wb(3,"div",1),c.Rb(4,"div",2),c.Wb(5,"div",3),c.Wb(6,"a",4),c.Wb(7,"span",5),c.Jc(8,"List Roles"),c.Vb(),c.Vb(),c.Vb(),c.Wb(9,"div",6),c.Wb(10,"div",7),c.Wb(11,"div",8),c.Wb(12,"div",9),c.Wb(13,"form",10),c.ec("ngSubmit",(function(e){return t.btnSubmitHandler()})),c.Wb(14,"div",11),c.Wb(15,"div",12),c.Wb(16,"div",13),c.Wb(17,"label"),c.Jc(18,"Role Name "),c.Hc(19,w,2,0,"small",14),c.Vb(),c.Rb(20,"input",15),c.Vb(),c.Vb(),c.Wb(21,"div",12),c.Wb(22,"div",13),c.Wb(23,"label"),c.Jc(24,"Roel Code "),c.Hc(25,M,2,0,"small",14),c.Vb(),c.Rb(26,"input",16),c.Vb(),c.Vb(),c.Hc(27,x,8,2,"div",17),c.Vb(),c.Wb(28,"div",18),c.Wb(29,"button",19),c.Jc(30,"Create Role"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Cb(13),c.pc("formGroup",t.rolePermissionForm),c.Cb(6),c.pc("ngIf",t.isSubmitted&&t.gfc.name.errors),c.Cb(6),c.pc("ngIf",t.isSubmitted&&t.gfc.code.errors),c.Cb(2),c.pc("ngForOf",t.allPermissions))},directives:[a.i,i.B,i.p,i.i,n.p,i.c,i.o,i.h,n.o,i.a],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}"]}),e})()},{path:"edit/:id",component:(()=>{class e{constructor(e,t,o,n,i){this._fb=e,this.toastr=t,this.roleService=o,this.router=n,this.activatedRole=i,this.allPermissions=P,this.isSubmitted=!1,this.selectedRoleId=null,this.selectedRole=null}ngOnInit(){this.createRolePermissionForm(null,null,null),this.selectedRoleId=this.activatedRole.snapshot.params.id,this.roleService.getRole(this.selectedRoleId).subscribe(e=>{e.status?(this.selectedRole=e.data,this.createRolePermissionForm(e.data.code,e.data.name,e.data.permissions)):this.toasterMessage("error","Role Name & code is required.")})}btnSubmitHandler(){if(this.isSubmitted=!0,this.rolePermissionForm.invalid)return void this.toasterMessage("error","Role Name & code is required.");const e=Object.keys(this.gfc).map(e=>({name:e,data:this.gfc[e],endpoint:this.gfc[e].value}));let t=[];e.forEach(e=>{const o=e.name;"name"==o||"code"==o||t.push({[o]:!!e.data.value})}),this.roleService.updateRole(this.selectedRoleId,{name:this.gfc.name.value,code:this.gfc.code.value,permissions:t}).subscribe(e=>{e.status?(this.toasterMessage("success",e.msg),this.rolePermissionForm.reset(),this.router.navigateByUrl("setup-configuration/roles")):this.toasterMessage("error",e.message)})}createRolePermissionForm(e,t,o){this.rolePermissionForm=this._fb.group({name:[t,i.z.required],code:[e,i.z.required]}),this.createPermissions(o)}createPermissions(e){e=JSON.parse(e);for(let t of this.allPermissions)for(let o of t.permissions){let t=!1;const n=o.allow[0];e&&(t=e.filter(e=>e.hasOwnProperty(n))[0]||!1),this.rolePermissionForm.addControl(n,new i.g(t[n]))}}get gfc(){return this.rolePermissionForm.controls}toasterMessage(e="success",t){"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(i.f),c.Qb(h.b),c.Qb(d),c.Qb(a.f),c.Qb(a.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-edit-role"]],decls:31,vars:4,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../list",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","ngSubmit"],[1,"ui","grid"],[1,"four","wide","column"],[1,"field"],[4,"ngIf"],["type","text","placeholder","Role Name","formControlName","name"],["type","text","placeholder","Role Name","formControlName","code"],["class","sixteen wide column",4,"ngFor","ngForOf"],[1,"mt-2","text-right"],["type","submit",1,"ui","primary","button"],[1,"sixteen","wide","column"],[1,"ui","header"],[1,"ui","card",2,"width","100%"],[1,"content"],[1,"description"],["class","three wide column",4,"ngFor","ngForOf"],[1,"three","wide","column"],[1,"ui","checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[3,"for"]],template:function(e,t){1&e&&(c.Wb(0,"h3"),c.Wb(1,"span",0),c.Jc(2,"Update Role"),c.Vb(),c.Vb(),c.Wb(3,"div",1),c.Rb(4,"div",2),c.Wb(5,"div",3),c.Wb(6,"a",4),c.Wb(7,"span",5),c.Jc(8,"List Roles"),c.Vb(),c.Vb(),c.Vb(),c.Wb(9,"div",6),c.Wb(10,"div",7),c.Wb(11,"div",8),c.Wb(12,"div",9),c.Wb(13,"form",10),c.ec("ngSubmit",(function(e){return t.btnSubmitHandler()})),c.Wb(14,"div",11),c.Wb(15,"div",12),c.Wb(16,"div",13),c.Wb(17,"label"),c.Jc(18,"Role Name "),c.Hc(19,k,2,0,"small",14),c.Vb(),c.Rb(20,"input",15),c.Vb(),c.Vb(),c.Wb(21,"div",12),c.Wb(22,"div",13),c.Wb(23,"label"),c.Jc(24,"Roel Code "),c.Hc(25,v,2,0,"small",14),c.Vb(),c.Rb(26,"input",16),c.Vb(),c.Vb(),c.Hc(27,V,8,2,"div",17),c.Vb(),c.Wb(28,"div",18),c.Wb(29,"button",19),c.Jc(30,"Update Role"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Cb(13),c.pc("formGroup",t.rolePermissionForm),c.Cb(6),c.pc("ngIf",t.isSubmitted&&t.gfc.name.errors),c.Cb(6),c.pc("ngIf",t.isSubmitted&&t.gfc.code.errors),c.Cb(2),c.pc("ngForOf",t.allPermissions))},directives:[a.i,i.B,i.p,i.i,n.p,i.c,i.o,i.h,n.o,i.a],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}"]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(R)],a.j]}),e})();o.d(t,"RolesModule",(function(){return S}));let S=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[n.c,i.v,i.k,y,r.b]]}),e})()}}]);