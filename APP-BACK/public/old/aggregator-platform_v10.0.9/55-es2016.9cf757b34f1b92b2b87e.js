(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{hrWY:function(t,e,r){"use strict";r.r(e);var i=r("ofXK"),a=r("xLiM"),o=r("fXoL"),n=r("AytR"),s=r("tk/3"),h=r("z6cu"),p=r("un/a"),l=r("JIr8");class c{constructor(t){this.http=t,this.url=n.a.serverURL,this.pager={},this.pageOfItems=[],this.httpOptions={headers:new s.e({"Content-Type":"application/json"})}}GetAllFlightLogs(t){return this.http.post(`${this.url}/api/fetch-all-Flight-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllHotelLogs(t){return this.http.post(`${this.url}/api/fetch-all-Hotel-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllCarLogs(t){return this.http.post(`${this.url}/api/fetch-all-Car-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllActivityLogs(t){return this.http.post(`${this.url}/api/fetch-all-Activities-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllTransferLogs(t){return this.http.post(`${this.url}/api/fetch-all-Transfer-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllInsuranceLogs(t){return this.http.post(`${this.url}/api/fetch-all-Insurance-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllAuditTrail(t){return this.http.post(`${this.url}/api/fetch-all-Audit-Trail`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllSegments(t,e,r){return this.http.get(`${this.url}/api/fetch-all-segment-details`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllOrganization(){return this.http.get(`${this.url}/api/pos/fetch-active-pos`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}NewDynamicPivotTable(t){return this.http.post(`${this.url}/api/dynamic-report-data`,t,this.httpOptions).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}searchReportBooking(t){return this.http.post(`${this.url}/api/search-bookings-by-organisation`,t)}searchTicketReport(t){return this.http.post(`${this.url}/api/search-tickets-new`,t)}GetAllAuditSearchReport(t){var e=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");return this.http.get(`${this.url}/api/get-audit-trails?${e}`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllAgents(){return this.http.get(`${this.url}/api/fetch-all-organization`,{withCredentials:!0}).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllProducts(t,e,r){return this.http.get(`${this.url}/api/get-active-products`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllSuppliers(t,e,r){return this.http.get(`${this.url}/api/fetch-all-supplier`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllFlightPlatforms(){return this.http.get(`${this.url}/api/Flight-Search-Log/count`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllFlightMonthlyReport(){return this.http.get(`${this.url}/api/Flight-Search-Log/monthlwise`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetAllAirportCode(){return this.http.get(`${this.url}/api/get-airports-cache`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}getAllBookingDetails(){return this.http.get(`${this.url}/api/fetch_value/:id`).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}getFlightBookingDetails(t){return this.http.get(`${this.url}/api/booking/${t}`)}GetSearchedSegmentReports(t){let e=new s.e;return e.append("Content-Type","application/json"),this.http.post(`${this.url}/api/search-segments`,t,{headers:e}).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}GetFilteredFlightSearch(t){return this.http.post(`${this.url}/api/fetch-all-Flight-Search-Log`,t).pipe(Object(p.a)(1),Object(l.a)(this.errorHandl))}exportBooking(t){return this.http.post(`${this.url}/api/export-booking-report`,t)}exportSearchLog(t){return this.http.post(`${this.url}/api/export-search-log-report`,t)}exportTicket(t){return this.http.post(`${this.url}/api/export-tickets-report`,t)}errorHandl(t){let e="";return e=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,console.log(e),Object(h.a)(e)}}c.\u0275fac=function(t){return new(t||c)(o.ac(s.b))},c.\u0275prov=o.Mb({token:c,factory:c.\u0275fac,providedIn:"root"});var b=r("5eHb"),g=r("tyNb");const u=[{path:"",component:(()=>{class t{constructor(t,e){this.newReportService=t,this.toastr=e,this.newPieObj={},this.newAreaChartObj={},this.renderMISPieChart=()=>{var t=[],e=JSON.parse(this.newPieObj);for(var r in e.FlightSearchLog)t.push({y:e.FlightSearchLog[r].count,name:e.FlightSearchLog[r].platform});new a.Chart("chartMISPie",{theme:"light2",animationEnabled:!0,exportEnabled:!0,title:{fontFamily:"Ubuntu",text:"Search Log Report"},data:[{type:"pie",toolTipContent:"<b>{name}</b>: ${y} (#percent%)",indexLabel:"{name} - #percent%",dataPoints:t}]}).render()},this.renderMISAreaChart=()=>{var t=[],e=[],r=[],i=JSON.parse(this.newAreaChartObj);for(var o in i.FlightSearchLog.book)t.push({x:i.FlightSearchLog.book[o].month,y:i.FlightSearchLog.book[o].count});for(var o in i.FlightSearchLog.ticket)r.push({x:i.FlightSearchLog.ticket[o].month,y:i.FlightSearchLog.ticket[o].count});for(var o in i.FlightSearchLog.search)e.push({x:i.FlightSearchLog.search[o].month,y:i.FlightSearchLog.search[o].count});new a.Chart("chartMISArea",{animationEnabled:!0,exportEnabled:!0,title:{fontFamily:"Ubuntu",text:"Current Year Search Log Report"},axisY:{title:"Count"},axisX:{title:"Month"},toolTip:{shared:!0},data:[{type:"stackedArea",showInLegend:!0,toolTipContent:'<span style="color:#4F81BC"><strong>{name}: </strong></span> {y}',name:"Book",dataPoints:t},{type:"stackedArea",name:"ticket",toolTipContent:'<span style="color:#C0504E"><strong>{name}: </strong></span> {y}<br><b>Total:<b> #total',showInLegend:!0,dataPoints:r},{type:"stackedArea",name:"Search",toolTipContent:'<span style="color:#C0504E"><strong>{name}: </strong></span> {y}<br><b>Total:<b> #total',showInLegend:!0,dataPoints:e}]}).render()}}ngOnInit(){this.fetchAllFlightPlatforms(),this.fetchAllMonthlyReport()}fetchAllFlightPlatforms(){this.newReportService.GetAllFlightPlatforms().subscribe(t=>{200==t.status?0!=t.FlightSearchLog.length?(this.newPieObj=JSON.stringify(t),this.renderMISPieChart()):this.toastr.info("There is no data available","",{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllMonthlyReport(){this.newReportService.GetAllFlightMonthlyReport().subscribe(t=>{200==t.status?(this.newAreaChartObj=JSON.stringify(t),this.renderMISAreaChart()):this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c),o.Qb(b.b))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-mis-report"]],decls:24,vars:0,consts:[[1,"ui","top","attached","tabular","menu"],["data-tab","first","routerLink","/report/booking-report",1,"item"],["data-tab","second","routerLink","/report/segment-report",1,"item"],["data-tab","third","routerLink","/report/mis-report",1,"item","active"],["data-tab","fourth","routerLink","/report/search-log-report",1,"item"],["data-tab","fifth","routerLink","/report/audit-report",1,"item"],["data-tab","sixth","routerLink","/report/ticket-report",1,"item"],["data-tab","seventh","routerLink","/report/dynamic-report",1,"item"],["data-tab","third",1,"ui","bottom","attached","tab","segment","tabContent-block","active"],[1,"ui","segment"],[1,"ui","fluid","container"],[1,"outer-basics"],[1,"outer-basicForm"],[1,"form-inner","result-block"],["id","chartMISPie"],["id","chartMISArea",1,"area-chart"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Jc(2," Booking "),o.Vb(),o.Wb(3,"div",2),o.Jc(4,"Segment"),o.Vb(),o.Wb(5,"div",3),o.Jc(6,"MIS"),o.Vb(),o.Wb(7,"div",4),o.Jc(8,"Search Log"),o.Vb(),o.Wb(9,"div",5),o.Jc(10,"Audit Trail Log"),o.Vb(),o.Wb(11,"div",6),o.Jc(12,"Ticket"),o.Vb(),o.Wb(13,"div",7),o.Jc(14,"Dynamic Report"),o.Vb(),o.Vb(),o.Wb(15,"div",8),o.Wb(16,"div",9),o.Wb(17,"div",10),o.Wb(18,"div",11),o.Wb(19,"div",12),o.Wb(20,"div",13),o.Rb(21,"div",14),o.Rb(22,"br"),o.Rb(23,"div",15),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb())},directives:[g.g],styles:[".tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.area-chart[_ngcontent-%COMP%]{height:370px;position:relative}.mis-report-header[_ngcontent-%COMP%]{position:relative;left:32%;color:rgba(0,0,0,.48);font-family:Roboto,sans-serif;font-weight:200}#chartMISPie[_ngcontent-%COMP%]{height:370px;width:100%}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin:24px 0}"]}),t})()}];let d=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[g.j.forChild(u)],g.j]}),t})();r.d(e,"MISReportModule",(function(){return m}));let m=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[i.c,d]]}),t})()}}]);