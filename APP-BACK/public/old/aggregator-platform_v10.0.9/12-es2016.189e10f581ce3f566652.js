(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{AmA7:function(t,e,r){"use strict";r.r(e);var i=r("ofXK"),o=r("3Pt+"),s=r("tyNb"),n=r("fXoL"),a=r("mrSG"),b=r("vkgz"),c=r("AytR"),l=r("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.apiUrl=c.a.serverURL}createUser(t){return this.http.post(`${this.apiUrl}/api/create-new-user`,t).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}updateUser(t){return this.http.put(`${this.apiUrl}/api/update-user`,t).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}fetchUser(t){return this.http.get(`${this.apiUrl}/api/fetch-new-user/${t}`).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}fetchUsers(t){return this.http.post(`${this.apiUrl}/api/fetch-all-users`,t).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}fetchRoles(){return this.http.get(`${this.apiUrl}/api/roles/list`).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}fetchOrganizations(){return this.http.get(`${this.apiUrl}/api/fetch-all-organization`).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}savePermissions(t){return this.http.post(`${this.apiUrl}/api/users/permission`,t).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}fetchPermissions(){return this.http.get(`${this.apiUrl}/api/users/permissions`).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}saveTargets(t){return this.http.post(`${this.apiUrl}/api/users/target`,t).pipe(Object(b.a)(t=>Object(a.a)(this,void 0,void 0,(function*(){return t}))))}}return t.\u0275fac=function(e){return new(e||t)(n.ac(l.b))},t.\u0275prov=n.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=r("5eHb");function m(t,e){1&t&&(n.Wb(0,"small",21),n.Jc(1,"required"),n.Vb())}function p(t,e){1&t&&(n.Wb(0,"span"),n.Jc(1,"Admin"),n.Vb())}function f(t,e){1&t&&(n.Wb(0,"span"),n.Jc(1,"Agent"),n.Vb())}const g=function(t){return["edit",t]},h=function(t){return["targets",t]};function v(t,e){if(1&t&&(n.Wb(0,"tr"),n.Wb(1,"td"),n.Jc(2),n.Vb(),n.Wb(3,"td"),n.Hc(4,p,2,0,"span",22),n.Hc(5,f,2,0,"span",22),n.Vb(),n.Wb(6,"td"),n.Jc(7),n.Vb(),n.Wb(8,"td"),n.Jc(9),n.Vb(),n.Wb(10,"td"),n.Jc(11),n.Vb(),n.Wb(12,"td",23),n.Wb(13,"div",24),n.Wb(14,"a",25),n.Rb(15,"i",26),n.Vb(),n.Wb(16,"a",25),n.Rb(17,"i",27),n.Vb(),n.Wb(18,"button",28),n.Rb(19,"i",29),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t){const t=e.$implicit;n.Cb(2),n.Kc(t.organisation?t.organisation.name:null),n.Cb(2),n.pc("ngIf",t.admin),n.Cb(1),n.pc("ngIf",t.agent),n.Cb(2),n.Mc("",t.first_name," ",t.last_name,""),n.Cb(2),n.Kc(t.email),n.Cb(2),n.Kc(t.mobile),n.Cb(3),n.pc("routerLink",n.uc(9,g,t.users_id)),n.Cb(2),n.pc("routerLink",n.uc(11,h,t.users_id))}}let V=(()=>{class t{constructor(t,e,r,i){this.router=t,this._fb=e,this.userService=r,this.toastr=i,this.formIsSubmitted=!1,this.users=[],this.offset=0,this.totalCount=0,this.offsetEvent={page:this.offset}}ngOnInit(){this.createSearchUserForm(),this.userService.fetchUsers({page:this.offset,organisation_id:"all",usernameAndAgentCode:null}).subscribe(t=>{t.status?(this.users=t.result.data,this.totalCount=t.result.total,this.offset=t.result.page):this.toastr.error(t.msg,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})},t=>{this.toastr.error(`Oops! ${t.error.message}`,"Server Error!",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})})}searchFormSubmit(){this.formIsSubmitted=!0,this.searchUserForm.valid&&(console.log({search:this.gfc.corporate_type.value,name:this.gfc.nameAndOfficeId.value}),this.formIsSubmitted=!1)}addNewUser(){return this.router.navigateByUrl("users/new")}createSearchUserForm(){this.searchUserForm=this._fb.group({corporate_type:["all"],nameAndOfficeId:[null,o.z.required]})}get gfc(){return this.searchUserForm.controls}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(s.f),n.Qb(o.f),n.Qb(u),n.Qb(d.b))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-users"]],decls:41,vars:3,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form","search-field-wrapper",3,"formGroup","ngSubmit"],[1,"four","fields"],[1,"two","wide","field"],["formControlName","corporate_type",1,"ui","fluid","dropdown"],["value","all"],[1,"three","wide","field"],["type","text","placeholder","Office Name/Office Id","formControlName","nameAndOfficeId"],["class","text-danger",4,"ngIf"],[1,"eight","wide","field"],[1,"ui","button","filter_btn"],[1,"filter_list"],[1,"ui","button","filter_btn_reset",3,"click"],[1,"text-right","mb-1"],[1,"ui","button","primary",3,"click"],[1,"ui","celled","table"],["width","120"],[4,"ngFor","ngForOf"],[1,"text-danger"],[4,"ngIf"],[1,"text-center"],[1,"ui","buttons"],["routerLinkActive","router-link-active",1,"ui","button",3,"routerLink"],[1,"fa","fa-edit"],[1,"fa","fa-dollar"],[1,"ui","button"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(n.Wb(0,"h3"),n.Wb(1,"span",0),n.Jc(2,"List of Users"),n.Vb(),n.Vb(),n.Wb(3,"div",1),n.Wb(4,"div",2),n.Wb(5,"div",3),n.Wb(6,"form",4),n.ec("ngSubmit",(function(t){return e.searchFormSubmit()})),n.Wb(7,"div",5),n.Wb(8,"div",6),n.Wb(9,"select",7),n.Wb(10,"option",8),n.Jc(11,"All"),n.Vb(),n.Vb(),n.Vb(),n.Wb(12,"div",9),n.Rb(13,"input",10),n.Hc(14,m,2,0,"small",11),n.Vb(),n.Wb(15,"div",12),n.Wb(16,"button",13),n.Wb(17,"span",14),n.Jc(18,"Search"),n.Vb(),n.Vb(),n.Wb(19,"button",15),n.ec("click",(function(t){return e.searchUserForm.reset({})})),n.Wb(20,"span",14),n.Jc(21,"Reset"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(22,"div",16),n.Wb(23,"button",17),n.ec("click",(function(t){return e.addNewUser()})),n.Jc(24,"Add new User"),n.Vb(),n.Vb(),n.Wb(25,"table",18),n.Wb(26,"thead"),n.Wb(27,"tr"),n.Wb(28,"th"),n.Jc(29,"Organization"),n.Vb(),n.Wb(30,"th"),n.Jc(31,"Role"),n.Vb(),n.Wb(32,"th"),n.Jc(33,"Name"),n.Vb(),n.Wb(34,"th"),n.Jc(35,"Email"),n.Vb(),n.Wb(36,"th"),n.Jc(37,"Contact Info"),n.Vb(),n.Wb(38,"th",19),n.Jc(39,"\xa0"),n.Vb(),n.Vb(),n.Vb(),n.Hc(40,v,20,13,"tr",20),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.Cb(6),n.pc("formGroup",e.searchUserForm),n.Cb(8),n.pc("ngIf",e.formIsSubmitted&&e.gfc.nameAndOfficeId.errors),n.Cb(26),n.pc("ngForOf",e.users))},directives:[o.B,o.p,o.i,o.x,o.o,o.h,o.s,o.A,o.c,i.p,i.o,s.i,s.h],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:50px}.filter_btn[_ngcontent-%COMP%]{background-color:#3867b1}.filter_btn[_ngcontent-%COMP%], .filter_btn_reset[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filter_btn_reset[_ngcontent-%COMP%]{background-color:#4f4f4f}.filter_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:0;margin-top:10px;font-size:13px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.call[_ngcontent-%COMP%]{width:15px;margin-top:10px;margin-left:7px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.calll[_ngcontent-%COMP%]{width:20px;margin-top:10px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.ico[_ngcontent-%COMP%]{width:15px;margin-top:10px}.search-field-wrapper[_ngcontent-%COMP%]{padding-bottom:32px}"]}),t})();var W=r("lM/l"),_=r("7o2P");function C(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"Required."),n.Vb())}function w(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t),n.Cb(1),n.Kc(t)}}function O(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function x(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function J(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function S(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function y(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function I(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t.id),n.Cb(1),n.Kc(t.value)}}function P(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function M(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.country_id),n.Cb(1),n.Lc("",t.name," ")}}function F(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function z(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.organisation_id),n.Cb(1),n.Lc(" ",t.name,"")}}function N(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function U(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t.id),n.Cb(1),n.Kc(t.name)}}function R(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function q(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.role_id),n.Cb(1),n.Lc("",t.name," ")}}function H(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function A(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"a valid email is required"),n.Vb())}function k(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function E(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function B(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"Required."),n.Vb())}function L(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t),n.Cb(1),n.Kc(t)}}function T(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function j(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function Q(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function K(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function G(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function D(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t.id),n.Cb(1),n.Kc(t.value)}}function Y(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function X(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.country_id),n.Cb(1),n.Lc("",t.name," ")}}function Z(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function tt(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.organisation_id),n.Cb(1),n.Lc(" ",t.name,"")}}function et(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function rt(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.qc("value",t.id),n.Cb(1),n.Kc(t.name)}}function it(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function ot(t,e){if(1&t&&(n.Wb(0,"option",48),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.role_id),n.Cb(1),n.Lc("",t.name," ")}}function st(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function nt(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"a valid email is required"),n.Vb())}function at(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function bt(t,e){1&t&&(n.Wb(0,"small",47),n.Jc(1,"required"),n.Vb())}function ct(t,e){if(1&t&&(n.Wb(0,"option",27),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t),n.Cb(1),n.Kc(t)}}function lt(t,e){if(1&t&&(n.Wb(0,"option",27),n.Jc(1),n.Vb()),2&t){const t=e.$implicit;n.pc("value",t.id),n.Cb(1),n.Kc(t.name)}}function ut(t,e){if(1&t){const t=n.Xb();n.Wb(0,"div",15),n.Wb(1,"div",16),n.Wb(2,"div",17),n.Wb(3,"div",18),n.Wb(4,"label",19),n.Jc(5,"Year"),n.Vb(),n.Wb(6,"select",20),n.Hc(7,ct,2,2,"option",21),n.Vb(),n.Vb(),n.Vb(),n.Wb(8,"div",17),n.Wb(9,"div",18),n.Wb(10,"label",19),n.Jc(11,"Month"),n.Vb(),n.Wb(12,"select",22),n.Hc(13,lt,2,2,"option",21),n.Vb(),n.Vb(),n.Vb(),n.Wb(14,"div",17),n.Wb(15,"div",18),n.Wb(16,"label",19),n.Jc(17,"Target Amount"),n.Vb(),n.Rb(18,"input",23),n.Vb(),n.Vb(),n.Wb(19,"div",24),n.Rb(20,"br"),n.Wb(21,"button",25),n.ec("click",(function(e){return n.Ac(t),n.ic().btnAddTarget()})),n.Rb(22,"i",26),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=e.index,r=n.ic();n.Cb(1),n.pc("formGroupName",t),n.Cb(6),n.pc("ngForOf",r.yearsList),n.Cb(6),n.pc("ngForOf",r.monthsList)}}class dt{constructor(t,e){this.id=t,this.name=e}}const mt=[{path:"",component:V},{path:"new",component:(()=>{class t{constructor(t,e,r,i,o){this.router=t,this._fb=e,this.userService=r,this.commonService=i,this.toastr=o,this.userRoles=[],this.organizations=[],this.organizationBranches=[],this.countries=[],this.formIsSubmitted=!1,this.saluteNames=W.k,this.statusRow=W.o}ngOnInit(){this.newUserForm=this.createUserForm(),this.getCountries(),this.getRoles(),this.getOrganizations()}ngAfterViewInit(){$(document).ready((function(){$(".ui.dropdown").dropdown()}))}btnSubmitHandler(){this.formIsSubmitted=!0,this.newUserForm.invalid||this.userService.createUser({salute:this.gfc.saluation.value,first_name:this.gfc.first_name.value,last_name:this.gfc.last_name.value,sex:this.gfc.gender.value,password:this.gfc.password.value,initial:this.gfc.initial.value,mobile:this.gfc.contact.value,email:this.gfc.email.value,username:this.gfc.username.value,address_1:this.gfc.address1.value,address_2:this.gfc.address2.value,country_id:this.gfc.country_id.value,organisation_id:this.gfc.organisation_id.value||0,selected_permissions:"",skills:"",is_active:this.gfc.status.value,role_id:this.gfc.role_id.value,branch_id:this.gfc.branch_id.value}).subscribe(t=>{200==t.status?(this.toastr.success(t.msg,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}),this.formIsSubmitted=!1,this.router.navigate(["users"])):this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}createUserForm(){return this._fb.group({saluation:["Mr.",o.z.required],first_name:[null,o.z.required],last_name:[null,o.z.required],role_id:["",o.z.required],contact:[null,o.z.required],initial:[null],gender:["male",o.z.required],status:[1,o.z.required],address1:[null],address2:[null],country_id:["",o.z.required],organisation_id:["",null],username:[null,o.z.required],email:[null,[o.z.required,o.z.email]],password:[null,[o.z.required,o.z.minLength(6)]],cpassword:[null,o.z.required],branch_id:[null]},{validator:this.passwordMatchValidator})}get gfc(){return this.newUserForm.controls}passwordMatchValidator(t){t.get("password").value!==t.get("cpassword").value&&t.get("cpassword").setErrors({NoPassswordMatch:!0})}getCountries(){this.commonService.getCountryList().subscribe(t=>{this.countries=t.countries})}getRoles(){this.userService.fetchRoles().subscribe(t=>{200==t.status?this.userRoles=t.data:this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}getOrganizations(){this.userService.fetchOrganizations().subscribe(t=>{200==t.status?this.organizations=t.Organization:this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}getOrgBranches(t){this.organizationBranches=null,this.commonService.getOrgBranches(t).subscribe(t=>{"data"==t.type&&(this.organizationBranches=t.Organization)})}buildError(t){this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(s.f),n.Qb(o.f),n.Qb(u),n.Qb(_.a),n.Qb(d.b))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-user-new"]],decls:141,vars:21,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","submit"],[1,"ui","grid"],[1,"eleven","wide","column"],[1,"shadow-sm","p-5","mb-5","bg-white","rounded"],[1,"three","wide","column"],[1,"field"],["for",""],["class","text-danger",4,"ngIf"],["formControlName","saluation",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],[1,"six","wide","column"],["type","text","formControlName","first_name"],["type","text","name","","formControlName","last_name"],["type","text","id","","formControlName","contact","placeholder","Contact number"],[1,"five","wide","column"],["type","text","id","","formControlName","initial","placeholder","Enter initial"],[1,"four","wide","column"],["formControlName","gender",1,"ui","dropdown","fluid"],["value","male"],["value","female"],["formControlName","status",1,"ui","dropdown","fluid"],["for","inputAddress"],["type","text","id","inputAddress","placeholder","1234 Main St","formControlName","address1"],["for","inputAddress2"],["type","text","id","inputAddress2","placeholder","Apartment, studio, or floor","formControlName","address2"],["formControlName","country_id",1,"ui","dropdown","fluid"],["value",""],["formControlName","organisation_id",1,"ui","dropdown","fluid",3,"change"],["formControlName","branch_id",1,"ui","dropdown","fluid"],["formControlName","role_id",1,"ui","dropdown","fluid"],[1,"twelve","wide","column"],["type","email","id","","formControlName","username","placeholder","User name"],["type","email","id","","formControlName","email","placeholder","Email address"],["type","email","id","","placeholder","Password","formControlName","password"],["type","email","id","","placeholder","Password","formControlName","cpassword"],[1,"twelve","wide","column","text-right"],["type","submit",1,"ui","primary","button"],[1,"text-danger"],[3,"value"]],template:function(t,e){1&t&&(n.Wb(0,"h3"),n.Wb(1,"span",0),n.Jc(2,"New User"),n.Vb(),n.Vb(),n.Wb(3,"div",1),n.Rb(4,"div",2),n.Wb(5,"div",3),n.Wb(6,"a",4),n.Wb(7,"span",5),n.Jc(8,"List Users"),n.Vb(),n.Vb(),n.Vb(),n.Wb(9,"div",6),n.Wb(10,"div",7),n.Wb(11,"div",8),n.Wb(12,"div",9),n.Wb(13,"form",10),n.ec("submit",(function(t){return e.btnSubmitHandler()})),n.Wb(14,"div",11),n.Wb(15,"div",12),n.Wb(16,"div",13),n.Wb(17,"div",11),n.Wb(18,"div",14),n.Wb(19,"div",15),n.Wb(20,"label",16),n.Jc(21,"Saluation "),n.Hc(22,C,2,0,"small",17),n.Vb(),n.Wb(23,"select",18),n.Hc(24,w,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(25,"div",20),n.Wb(26,"div",15),n.Wb(27,"label",16),n.Jc(28,"First Name "),n.Hc(29,O,2,0,"small",17),n.Vb(),n.Rb(30,"input",21),n.Vb(),n.Vb(),n.Wb(31,"div",20),n.Wb(32,"div",15),n.Wb(33,"label",16),n.Jc(34,"Last Name "),n.Hc(35,x,2,0,"small",17),n.Vb(),n.Rb(36,"input",22),n.Vb(),n.Vb(),n.Vb(),n.Wb(37,"div",11),n.Wb(38,"div",20),n.Wb(39,"div",15),n.Wb(40,"label",16),n.Jc(41,"Contact Number "),n.Hc(42,J,2,0,"small",17),n.Vb(),n.Rb(43,"input",23),n.Vb(),n.Vb(),n.Wb(44,"div",24),n.Wb(45,"div",15),n.Wb(46,"label",16),n.Jc(47,"Initial"),n.Vb(),n.Rb(48,"input",25),n.Vb(),n.Vb(),n.Wb(49,"div",26),n.Wb(50,"div",15),n.Wb(51,"label",16),n.Jc(52,"Gender "),n.Hc(53,S,2,0,"small",17),n.Vb(),n.Wb(54,"select",27),n.Wb(55,"option",28),n.Jc(56,"Male"),n.Vb(),n.Wb(57,"option",29),n.Jc(58,"Female"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(59,"div",24),n.Wb(60,"div",15),n.Wb(61,"label",16),n.Jc(62,"Status "),n.Hc(63,y,2,0,"small",17),n.Vb(),n.Wb(64,"select",30),n.Hc(65,I,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(66,"div",24),n.Wb(67,"div",15),n.Wb(68,"label",31),n.Jc(69,"Address"),n.Vb(),n.Rb(70,"input",32),n.Vb(),n.Vb(),n.Wb(71,"div",24),n.Wb(72,"div",15),n.Wb(73,"label",33),n.Jc(74,"Address 2"),n.Vb(),n.Rb(75,"input",34),n.Vb(),n.Vb(),n.Wb(76,"div",24),n.Wb(77,"div",15),n.Wb(78,"label",16),n.Jc(79,"Country "),n.Hc(80,P,2,0,"small",17),n.Vb(),n.Wb(81,"select",35),n.Wb(82,"option",36),n.Jc(83,"Select"),n.Vb(),n.Hc(84,M,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(85,"div",24),n.Wb(86,"div",15),n.Wb(87,"label",16),n.Jc(88,"POS "),n.Hc(89,F,2,0,"small",17),n.Vb(),n.Wb(90,"select",37),n.ec("change",(function(t){return e.getOrgBranches(t.target.value)})),n.Wb(91,"option",36),n.Jc(92,"Select"),n.Vb(),n.Hc(93,z,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(94,"div",24),n.Wb(95,"div",15),n.Wb(96,"label",16),n.Jc(97,"POS Branch"),n.Hc(98,N,2,0,"small",17),n.Vb(),n.Wb(99,"select",38),n.Wb(100,"option",36),n.Jc(101,"Select Branch"),n.Vb(),n.Hc(102,U,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(103,"div",20),n.Wb(104,"div",15),n.Wb(105,"label",16),n.Jc(106,"Role "),n.Hc(107,R,2,0,"small",17),n.Vb(),n.Wb(108,"select",39),n.Wb(109,"option",36),n.Jc(110,"Select"),n.Vb(),n.Hc(111,q,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(112,"div",24),n.Wb(113,"div",11),n.Wb(114,"div",40),n.Wb(115,"div",15),n.Wb(116,"label",16),n.Jc(117,"Username "),n.Hc(118,H,2,0,"small",17),n.Vb(),n.Rb(119,"input",41),n.Vb(),n.Vb(),n.Wb(120,"div",40),n.Wb(121,"div",15),n.Wb(122,"label",16),n.Jc(123,"Email "),n.Hc(124,A,2,0,"small",17),n.Vb(),n.Rb(125,"input",42),n.Vb(),n.Vb(),n.Wb(126,"div",40),n.Wb(127,"div",15),n.Wb(128,"label",16),n.Jc(129,"Password "),n.Hc(130,k,2,0,"small",17),n.Vb(),n.Rb(131,"input",43),n.Vb(),n.Vb(),n.Wb(132,"div",40),n.Wb(133,"div",15),n.Wb(134,"label",16),n.Jc(135,"Confirm Password "),n.Hc(136,E,2,0,"small",17),n.Vb(),n.Rb(137,"input",44),n.Vb(),n.Vb(),n.Wb(138,"div",45),n.Wb(139,"button",46),n.Jc(140,"Save User"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.Cb(13),n.pc("formGroup",e.newUserForm),n.Cb(9),n.pc("ngIf",e.gfc.saluation.errors),n.Cb(2),n.pc("ngForOf",e.saluteNames),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.first_name.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.last_name.errors),n.Cb(7),n.pc("ngIf",e.formIsSubmitted&&e.gfc.contact.errors),n.Cb(11),n.pc("ngIf",e.formIsSubmitted&&e.gfc.gender.errors),n.Cb(10),n.pc("ngIf",e.formIsSubmitted&&e.gfc.status.errors),n.Cb(2),n.pc("ngForOf",e.statusRow),n.Cb(15),n.pc("ngIf",e.formIsSubmitted&&e.gfc.country_id.errors),n.Cb(4),n.pc("ngForOf",e.countries),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.country_id.errors),n.Cb(4),n.pc("ngForOf",e.organizations),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.branch_id.errors),n.Cb(4),n.pc("ngForOf",e.organizationBranches),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.role_id.errors),n.Cb(4),n.pc("ngForOf",e.userRoles),n.Cb(7),n.pc("ngIf",e.formIsSubmitted&&e.gfc.username.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.email.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.password.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.cpassword.errors))},directives:[s.i,o.B,o.p,o.i,i.p,o.x,o.o,o.h,i.o,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.text-danger[_ngcontent-%COMP%]{color:red}"]}),t})()},{path:"edit/:id",component:(()=>{class t{constructor(t,e,r,i,o,s){this.activeRoute=t,this.router=e,this._fb=r,this.userService=i,this.commonService=o,this.toastr=s,this.formIsSubmitted=!1,this.displayTargets=!1,this.displayPermissions=!1,this.saluteNames=W.k,this.statusRow=W.o,this.userId=0,this.userData={},this.userRoles=[],this.organizations=[],this.organizationBranches=[],this.branches=[],this.countries=[]}ngOnInit(){this.editUserForm=this.createUserForm(null),this.userId=this.activeRoute.snapshot.params.id,this.getUser(this.userId),this.getCountries(),this.getRoles(),this.getOrganizations()}ngAfterViewInit(){$(document).ready((function(){$(".ui.dropdown").dropdown()}))}btnSubmitHandler(){this.formIsSubmitted=!0,this.editUserForm.invalid?this.buildError("Please fill all the required fields."):this.userService.updateUser({id:this.userId,salute:this.gfc.salute.value,first_name:this.gfc.first_name.value,last_name:this.gfc.last_name.value,sex:this.gfc.gender.value,password:this.gfc.password.value,initial:this.gfc.initial.value,mobile:this.gfc.contact.value,email:this.gfc.email.value,username:this.gfc.username.value,address_1:this.gfc.address1.value,address_2:this.gfc.address2.value,country_id:this.gfc.country_id.value,organisation_id:this.gfc.organisation_id.value||0,selected_permissions:"",skills:"",is_active:this.gfc.status.value,role_id:this.gfc.role_id.value,branch_id:this.gfc.branch_id.value}).subscribe(t=>{200==t.status?(this.displayTargets=!0,this.userData=t.data,this.formIsSubmitted=!1,this.toastr.success("Profile updated successfully.","Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})):this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}createUserForm(t){return this._fb.group({salute:[t?t.salute:null,o.z.required],first_name:[t?t.first_name:null,o.z.required],last_name:[t?t.last_name:null,o.z.required],role_id:[t?t.role_id:null,o.z.required],contact:[t?t.mobile:null,o.z.required],initial:[t?t.initial:null],gender:[t?t.sex:null,o.z.required],status:[t?t.is_active:null,o.z.required],address1:[t?t.address_1:null],address2:[t?t.address_2:null],country_id:[t?t.country_id:null,o.z.required],organisation_id:[t?t.organisation_id:null],branch_id:[t?t.branch_id:null],username:[t?t.username:null,o.z.required],email:[t?t.email:null,[o.z.required,o.z.email]],password:[null,[o.z.minLength(6)]],cpassword:[null]},{validator:this.passwordMatchValidator})}get gfc(){return this.editUserForm.controls}passwordMatchValidator(t){t.get("password").value!==t.get("cpassword").value&&t.get("cpassword").setErrors({NoPassswordMatch:!0})}buildError(t){this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}getUser(t){this.userService.fetchUser(t).subscribe(t=>{200==t.status?(this.userData=t.data,this.getOrgBranches(this.userData.organisation_id),this.editUserForm=this.createUserForm(this.userData)):this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}getCountries(){this.commonService.getCountryList().subscribe(t=>{this.countries=t.countries})}getRoles(){this.userService.fetchRoles().subscribe(t=>{200==t.status?this.userRoles=t.data:this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}getOrganizations(){this.userService.fetchOrganizations().subscribe(t=>{200==t.status?this.organizations=t.Organization:this.buildError(t.msg)},t=>{this.buildError(t.error.message)})}getOrgBranches(t){this.organizationBranches=null,this.commonService.getOrgBranches(t).subscribe(t=>{"data"==t.type&&(this.organizationBranches=t.Organization)})}loadTargets(){this.router.navigate(["users/targets",this.userId])}loadPermission(){this.router.navigate(["users/permissions",this.userId])}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(s.a),n.Qb(s.f),n.Qb(o.f),n.Qb(u),n.Qb(_.a),n.Qb(d.b))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-user-edit"]],decls:141,vars:21,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","submit"],[1,"ui","grid"],[1,"eleven","wide","column"],[1,"shadow-sm","p-5","mb-5","bg-white","rounded"],[1,"three","wide","column"],[1,"field"],["for",""],["class","text-danger",4,"ngIf"],["formControlName","salute",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],[1,"six","wide","column"],["type","text","formControlName","first_name"],["type","text","name","","formControlName","last_name"],["type","text","id","","formControlName","contact","placeholder","Contact number"],[1,"five","wide","column"],["type","text","id","","formControlName","initial","placeholder","Enter initial"],[1,"four","wide","column"],["formControlName","gender",1,"ui","dropdown","fluid"],["value","male"],["value","female"],["formControlName","status",1,"ui","dropdown","fluid"],["for","inputAddress"],["type","text","id","inputAddress","placeholder","1234 Main St","formControlName","address1"],["for","inputAddress2"],["type","text","id","inputAddress2","placeholder","Apartment, studio, or floor","formControlName","address2"],["formControlName","country_id",1,"ui","dropdown","fluid"],["value",""],["formControlName","organisation_id",1,"ui","dropdown","fluid"],["formControlName","branch_id",1,"ui","dropdown","fluid"],["formControlName","role_id",1,"ui","dropdown","fluid"],[1,"twelve","wide","column"],["type","email","id","","formControlName","username","placeholder","User name"],["type","email","id","","formControlName","email","placeholder","Email address"],["type","email","id","","placeholder","Password","formControlName","password"],["type","email","id","","placeholder","Password","formControlName","cpassword"],[1,"twelve","wide","column","text-right"],["type","submit",1,"ui","primary","button"],[1,"text-danger"],[3,"value"]],template:function(t,e){1&t&&(n.Wb(0,"h3"),n.Wb(1,"span",0),n.Jc(2,"Update User"),n.Vb(),n.Vb(),n.Wb(3,"div",1),n.Rb(4,"div",2),n.Wb(5,"div",3),n.Wb(6,"a",4),n.Wb(7,"span",5),n.Jc(8,"List Users"),n.Vb(),n.Vb(),n.Vb(),n.Wb(9,"div",6),n.Wb(10,"div",7),n.Wb(11,"div",8),n.Wb(12,"div",9),n.Wb(13,"form",10),n.ec("submit",(function(t){return e.btnSubmitHandler()})),n.Wb(14,"div",11),n.Wb(15,"div",12),n.Wb(16,"div",13),n.Wb(17,"div",11),n.Wb(18,"div",14),n.Wb(19,"div",15),n.Wb(20,"label",16),n.Jc(21,"Saluation "),n.Hc(22,B,2,0,"small",17),n.Vb(),n.Wb(23,"select",18),n.Hc(24,L,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(25,"div",20),n.Wb(26,"div",15),n.Wb(27,"label",16),n.Jc(28,"First Name "),n.Hc(29,T,2,0,"small",17),n.Vb(),n.Rb(30,"input",21),n.Vb(),n.Vb(),n.Wb(31,"div",20),n.Wb(32,"div",15),n.Wb(33,"label",16),n.Jc(34,"Last Name "),n.Hc(35,j,2,0,"small",17),n.Vb(),n.Rb(36,"input",22),n.Vb(),n.Vb(),n.Vb(),n.Wb(37,"div",11),n.Wb(38,"div",20),n.Wb(39,"div",15),n.Wb(40,"label",16),n.Jc(41,"Contact Number "),n.Hc(42,Q,2,0,"small",17),n.Vb(),n.Rb(43,"input",23),n.Vb(),n.Vb(),n.Wb(44,"div",24),n.Wb(45,"div",15),n.Wb(46,"label",16),n.Jc(47,"Initial"),n.Vb(),n.Rb(48,"input",25),n.Vb(),n.Vb(),n.Wb(49,"div",26),n.Wb(50,"div",15),n.Wb(51,"label",16),n.Jc(52,"Gender "),n.Hc(53,K,2,0,"small",17),n.Vb(),n.Wb(54,"select",27),n.Wb(55,"option",28),n.Jc(56,"Male"),n.Vb(),n.Wb(57,"option",29),n.Jc(58,"Female"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(59,"div",24),n.Wb(60,"div",15),n.Wb(61,"label",16),n.Jc(62,"Status "),n.Hc(63,G,2,0,"small",17),n.Vb(),n.Wb(64,"select",30),n.Hc(65,D,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(66,"div",24),n.Wb(67,"div",15),n.Wb(68,"label",31),n.Jc(69,"Address"),n.Vb(),n.Rb(70,"input",32),n.Vb(),n.Vb(),n.Wb(71,"div",24),n.Wb(72,"div",15),n.Wb(73,"label",33),n.Jc(74,"Address 2"),n.Vb(),n.Rb(75,"input",34),n.Vb(),n.Vb(),n.Wb(76,"div",24),n.Wb(77,"div",15),n.Wb(78,"label",16),n.Jc(79,"Country "),n.Hc(80,Y,2,0,"small",17),n.Vb(),n.Wb(81,"select",35),n.Wb(82,"option",36),n.Jc(83,"Select"),n.Vb(),n.Hc(84,X,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(85,"div",24),n.Wb(86,"div",15),n.Wb(87,"label",16),n.Jc(88,"POS "),n.Hc(89,Z,2,0,"small",17),n.Vb(),n.Wb(90,"select",37),n.Wb(91,"option",36),n.Jc(92,"Select"),n.Vb(),n.Hc(93,tt,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(94,"div",24),n.Wb(95,"div",15),n.Wb(96,"label",16),n.Jc(97,"POS Branch"),n.Hc(98,et,2,0,"small",17),n.Vb(),n.Wb(99,"select",38),n.Wb(100,"option",36),n.Jc(101,"Select Branch"),n.Vb(),n.Hc(102,rt,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Wb(103,"div",20),n.Wb(104,"div",15),n.Wb(105,"label",16),n.Jc(106,"Role "),n.Hc(107,it,2,0,"small",17),n.Vb(),n.Wb(108,"select",39),n.Wb(109,"option",36),n.Jc(110,"Select"),n.Vb(),n.Hc(111,ot,2,2,"option",19),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Wb(112,"div",24),n.Wb(113,"div",11),n.Wb(114,"div",40),n.Wb(115,"div",15),n.Wb(116,"label",16),n.Jc(117,"Username "),n.Hc(118,st,2,0,"small",17),n.Vb(),n.Rb(119,"input",41),n.Vb(),n.Vb(),n.Wb(120,"div",40),n.Wb(121,"div",15),n.Wb(122,"label",16),n.Jc(123,"Email "),n.Hc(124,nt,2,0,"small",17),n.Vb(),n.Rb(125,"input",42),n.Vb(),n.Vb(),n.Wb(126,"div",40),n.Wb(127,"div",15),n.Wb(128,"label",16),n.Jc(129,"Password "),n.Hc(130,at,2,0,"small",17),n.Vb(),n.Rb(131,"input",43),n.Vb(),n.Vb(),n.Wb(132,"div",40),n.Wb(133,"div",15),n.Wb(134,"label",16),n.Jc(135,"Confirm Password "),n.Hc(136,bt,2,0,"small",17),n.Vb(),n.Rb(137,"input",44),n.Vb(),n.Vb(),n.Wb(138,"div",45),n.Wb(139,"button",46),n.Jc(140,"Save User"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.Cb(13),n.pc("formGroup",e.editUserForm),n.Cb(9),n.pc("ngIf",e.gfc.salute.errors),n.Cb(2),n.pc("ngForOf",e.saluteNames),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.first_name.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.last_name.errors),n.Cb(7),n.pc("ngIf",e.formIsSubmitted&&e.gfc.contact.errors),n.Cb(11),n.pc("ngIf",e.formIsSubmitted&&e.gfc.gender.errors),n.Cb(10),n.pc("ngIf",e.formIsSubmitted&&e.gfc.status.errors),n.Cb(2),n.pc("ngForOf",e.statusRow),n.Cb(15),n.pc("ngIf",e.formIsSubmitted&&e.gfc.country_id.errors),n.Cb(4),n.pc("ngForOf",e.countries),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.country_id.errors),n.Cb(4),n.pc("ngForOf",e.organizations),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.branch_id.errors),n.Cb(4),n.pc("ngForOf",e.organizationBranches),n.Cb(5),n.pc("ngIf",e.formIsSubmitted&&e.gfc.role_id.errors),n.Cb(4),n.pc("ngForOf",e.userRoles),n.Cb(7),n.pc("ngIf",e.formIsSubmitted&&e.gfc.username.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.email.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.password.errors),n.Cb(6),n.pc("ngIf",e.formIsSubmitted&&e.gfc.cpassword.errors))},directives:[s.i,o.B,o.p,o.i,i.p,o.x,o.o,o.h,i.o,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:50px}.filter_btn[_ngcontent-%COMP%]{background-color:#3867b1}.filter_btn[_ngcontent-%COMP%], .filter_btn_reset[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filter_btn_reset[_ngcontent-%COMP%]{background-color:#4f4f4f}.filter_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:0;margin-top:10px;font-size:13px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.call[_ngcontent-%COMP%]{width:15px;margin-top:10px;margin-left:7px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.calll[_ngcontent-%COMP%]{width:20px;margin-top:10px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.ico[_ngcontent-%COMP%]{width:15px;margin-top:10px}.search-field-wrapper[_ngcontent-%COMP%]{padding-bottom:32px}.text-danger[_ngcontent-%COMP%]{color:red}"]}),t})()},{path:"targets/:id",component:(()=>{class t{constructor(t,e,r,i){this._fb=t,this.userService=e,this.toastr=r,this.activatedRoute=i,this.yearsList=[],this.monthsList=[new dt(1,"January"),new dt(2,"February"),new dt(3,"March"),new dt(4,"April"),new dt(5,"May"),new dt(6,"June"),new dt(7,"July"),new dt(8,"August"),new dt(9,"September"),new dt(10,"October"),new dt(11,"November"),new dt(12,"December")],this.currentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1}ngOnInit(){this.userTargetForm=this._fb.group({targets:this._fb.array([this.createUserTargetForm()])});for(let t=this.currentYear;t<=this.currentYear+5;t++)this.yearsList.push(t)}btnSubmitHandler(){const t=JSON.stringify({user_id:this.activatedRoute.snapshot.params.id,targets:this.userTargetForm.value.targets});return this.userService.saveTargets(t).subscribe(t=>{t.status?this.toastr.success(t.message,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.buildError(t.msg)},t=>{this.buildError(t.error.message)}),console.log(t),!1}createUserTargetForm(){return this._fb.group({year:[this.currentYear,o.z.required],month:[this.currentMonth,o.z.required],amount:[500,o.z.required]})}btnAddTarget(){this.targets=this.userTargetForm.get("targets"),this.targets.push(this.createUserTargetForm())}get gfc(){return this.userTargetForm.controls}buildError(t){this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(o.f),n.Qb(u),n.Qb(d.b),n.Qb(s.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-user-targets"]],decls:20,vars:2,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup"],[1,"ui","grid"],["class","sixteen wide column","formArrayName","targets",4,"ngFor","ngForOf"],[1,"ten","wide","column","text-right"],["type","button",1,"ui","button","primary",3,"click"],["formArrayName","targets",1,"sixteen","wide","column"],[1,"ui","grid",3,"formGroupName"],[1,"three","wide","column"],[1,"field"],["for","inputAddress2"],["formControlName","year","name","year",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],["formControlName","month","name","month",1,"ui","dropdown","fluid"],["type","text","placeholder","Target Amount","formControlName","amount","name","amount",1,"ui","dropdown","fluid"],[1,"four","wide","column"],[1,"ui","button",3,"click"],[1,"fa","fa-plus"],[3,"value"]],template:function(t,e){1&t&&(n.Wb(0,"h3"),n.Wb(1,"span",0),n.Jc(2,"Set User Targets"),n.Vb(),n.Vb(),n.Wb(3,"div",1),n.Rb(4,"div",2),n.Wb(5,"div",3),n.Wb(6,"a",4),n.Wb(7,"span",5),n.Jc(8,"List Users"),n.Vb(),n.Vb(),n.Vb(),n.Wb(9,"div",6),n.Wb(10,"div",7),n.Wb(11,"div",8),n.Wb(12,"div",9),n.Wb(13,"form",10),n.Wb(14,"div",11),n.Hc(15,ut,23,3,"div",12),n.Vb(),n.Wb(16,"div",11),n.Wb(17,"div",13),n.Wb(18,"button",14),n.ec("click",(function(t){return e.btnSubmitHandler()})),n.Jc(19,"Save Targets"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Vb()),2&t&&(n.Cb(13),n.pc("formGroup",e.userTargetForm),n.Cb(2),n.pc("ngForOf",e.userTargetForm.get.targets.controls))},directives:[s.i,o.B,o.p,o.i,i.o,o.e,o.j,o.x,o.o,o.h,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.text-danger[_ngcontent-%COMP%]{color:red}"]}),t})()}];let pt=(()=>{class t{}return t.\u0275mod=n.Ob({type:t}),t.\u0275inj=n.Nb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(mt)],s.j]}),t})();r.d(e,"UsersModule",(function(){return ft}));let ft=(()=>{class t{}return t.\u0275mod=n.Ob({type:t}),t.\u0275inj=n.Nb({factory:function(e){return new(e||t)},imports:[[i.c,pt,o.k,o.v]]}),t})()}}]);