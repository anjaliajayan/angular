function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"6qfD":function(t,e,o){"use strict";o.r(e);var n=o("ofXK"),i=o("lDzL"),r=o("QUrN"),a=o("3Pt+"),s=o("tyNb"),c=o("fXoL"),l=o("XE7E"),p=o("Fmdd"),u=o("5eHb"),d=o("PSD3"),b=o.n(d),m=o("AytR");function g(t,e){if(1&t&&(c.Wb(0,"option",51),c.Jc(1),c.Vb()),2&t){var o=e.$implicit;c.qc("value",o.organisation_id),c.Cb(1),c.Lc(" ",o.name," ")}}function f(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",52),c.ec("click",(function(t){return c.Ac(o),c.ic().addGroup(null)})),c.Wb(1,"span",53),c.Jc(2,"Save"),c.Vb(),c.Vb()}}function h(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",54),c.ec("click",(function(t){return c.Ac(o),c.ic().onUpdateGroup(null)})),c.Wb(1,"span",53),c.Jc(2,"Update"),c.Vb(),c.Vb()}}var _,k=function(t){return{error:t}},v=((_=function(){function t(e,o,n,i){_classCallCheck(this,t),this.MarkupConfigurationService=e,this.posService=o,this._formBuilder=n,this.toastr=i,this.allPos=[],this.isSubmitted=!1,this.orgArr=[],this.sendDataToParent=new c.n,this.initGroupForm()}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchAllPOS({limit:1500,page:0}),this.onEditRow(this.editRow),1==this.flagDet&&0==this.flgEditDet?(this.showSaveButton=!0,this.showUpdateButton=!1,this.addGroupForm.reset()):(this.showUpdateButton=!0,this.showSaveButton=!1)}},{key:"initGroupForm",value:function(){this.addGroupForm=this._formBuilder.group({name:["",a.z.required],organisation_id:[[],a.z.required],is_active:["",a.z.required],preference:["",a.z.required],start_date:[""],end_date:[""],is_stop_sale:[""],is_free_sale:[""],sale_type:[""],is_flight:[!1],is_hotel:[!1],is_car:[!1],is_transfers:[!1],is_activities:[!1],is_insurance:[!1],is_cruises:[!1],sale_id:[""],mode:[""]})}},{key:"addGroup",value:function(t){var e=this;this.isSubmitted=!0,this.addGroupForm.patchValue({name:this.addGroupForm.value.name,organisation_id:this.addGroupForm.value.organisation_id,is_active:this.addGroupForm.value.is_active,preference:this.addGroupForm.value.preference,start_date:this.addGroupForm.value.start_date?this.addGroupForm.value.start_date:"",end_date:this.addGroupForm.value.end_date?this.addGroupForm.value.end_date:"",is_stop_sale:this.addGroupForm.value.is_stop_sale?this.addGroupForm.value.is_stop_sale:"",is_free_sale:this.addGroupForm.value.is_free_sale?this.addGroupForm.value.is_free_sale:"",is_flight:!!this.addGroupForm.value.is_flight&&this.addGroupForm.value.is_flight,is_hotel:!!this.addGroupForm.value.is_hotel&&this.addGroupForm.value.is_hotel,is_car:!!this.addGroupForm.value.end_date&&this.addGroupForm.value.is_car,is_transfers:!!this.addGroupForm.value.is_transfers&&this.addGroupForm.value.is_transfers,is_activities:!!this.addGroupForm.value.is_activities&&this.addGroupForm.value.is_activities,is_insurance:!!this.addGroupForm.value.is_insurance&&this.addGroupForm.value.is_insurance,is_cruises:!!this.addGroupForm.value.is_cruises&&this.addGroupForm.value.is_cruises,mode:"Add"});var o=Object.assign({},this.addGroupForm.value);"freesale"==o.sale_type?(o.is_stop_sale=!1,o.is_free_sale=!0):(o.is_stop_sale=!0,o.is_free_sale=!1),this.MarkupConfigurationService.AddGroup(o).subscribe((function(n){1==n.status?(e.sendDataToParent.emit(t),e.toastr.success("Group added...!!!","Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})):e.toastr.error(null===(o.name||o.organisation_id||o.is_active||o.preference)?"Fill the mandatory fields":"Something bad happened at our end.","Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}),(function(t){console.log("erer ",t),e.toastr.success("Something bad happened at our end. ".concat(t),"Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"fetchAllPOS",value:function(t){var e=this;this.posService.fetchAllPointofSale(t).subscribe((function(t){t.status&&(e.allPos=t.result.data)}),(function(t){console.log("erer ",t)}))}},{key:"resetAddGroupForm",value:function(){}},{key:"ngAfterViewInit",value:function(){this.makeJqueryFields(),this.loadStartDate(),this.loadEndDate()}},{key:"loadStartDate",value:function(){var t=this;$((function(){$('input[name="start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,o,n){moment().diff(e,"years"),t.addGroupForm.get("start_date").setValue(moment(e).format("YYYY-MM-DD"))}))}))}},{key:"loadEndDate",value:function(){var t=this;$((function(){$('input[name="end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),minDate:moment(),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,o,n){moment().diff(e,"years"),t.addGroupForm.get("end_date").setValue(moment(e).format("YYYY-MM-DD"))}))}))}},{key:"onEditRow",value:function(t){var e,o,n=this;if(this.is_active=0!=t.is_active?"1":"0",null!=t.preference&&(this.preference=t.preference),null!=t.organisation_id){var i=t.organisation_id;(i=i.split(",")).forEach((function(t){n.orgArr.push(t)}))}0==t.is_free_sale&&1==t.is_stop_sale&&(this.saleType="stopsale",null==t.end_date&&""==t.end_date||(e=(e=(e=t.end_date).split("T"))[0]),null==t.start_date&&""==t.start_date||(o=(o=(o=t.start_date).split("T"))[0])),1==t.is_free_sale&&0==t.is_stop_sale&&(this.saleType="freesale",e="",o=""),this.addGroupForm.patchValue({name:t.name,organisation_id:this.orgArr,is_active:this.is_active,preference:this.preference,start_date:o,end_date:e,is_stop_sale:this.stopSale,is_free_sale:this.freeSale,is_flight:0!=t.is_flight,is_hotel:0!=t.is_hotel,is_car:0!=t.is_car,is_transfers:0!=t.is_transfers,is_activities:0!=t.is_activities,is_insurance:0!=t.is_insurance,is_cruises:0!=t.is_cruises,sale_type:this.saleType,sale_id:t.sale_id,mode:"Update"})}},{key:"onUpdateGroup",value:function(t){var e=this,o=Object.assign({},this.addGroupForm.value);"freesale"==o.sale_type?(o.is_stop_sale=!1,o.is_free_sale=!0):(o.is_stop_sale=!0,o.is_free_sale=!1),this.MarkupConfigurationService.editGroup(o).subscribe((function(o){o.status?(e.sendDataToParent.emit(t),e.toastr.success("Group updateddddddddddd...!!!","Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})):e.toastr.error("Something bad happened at our end.","Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}),(function(t){console.log("erer ",t),e.toastr.success("Something bad happened at our end. ".concat(t),"Error ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"resetForm",value:function(){this.addGroupForm.reset()}},{key:"makeJqueryFields",value:function(){$(document).ready((function(){this._globals=localStorage.getItem("_globals");var t=JSON.parse(this._globals).token;$(".dropdownThree").dropdown("refresh"),$(".dropdownThree").dropdown({placeholder:"Select POS"}),$(".ui.dropdownThree").dropdown({type:"category",responseAsync:!0,apiSettings:{url:m.a.serverURL+"/api/organization/fetch-pos/{query}",beforeXHR:function(e){return e.setRequestHeader("Authorization",t),e},onResponse:function(t){var e={success:!0,results:[]};return $.each(t.result,(function(t,o){e.results.push({name:o.name,value:o.organisation_id})})),e}}})}))}}]),t}()).\u0275fac=function(t){return new(t||_)(c.Qb(l.a),c.Qb(p.a),c.Qb(a.f),c.Qb(u.b))},_.\u0275cmp=c.Kb({type:_,selectors:[["app-add-group"]],inputs:{editRow:["change","editRow"],flagDet:["flag","flagDet"],flgEditDet:["flgEdit","flgEditDet"]},outputs:{sendDataToParent:"sendDataToParent"},decls:119,vars:18,consts:[[1,"outer-form"],[1,"ui","form","pos_basic_form",3,"formGroup"],[1,"field"],[1,"five","fields"],[1,"six","wide","field",3,"ngClass"],[1,"mandatory"],["type","text","formControlName","name","value","","name","groupSeasonName","placeholder","Group / Seasonality Name"],[1,"eight","wide","field",3,"ngClass"],["placeholder","Select POS","id","pos","value","","formControlName","organisation_id","multiple","","name","organisation_id",1,"ui","dropdownThree","fluid","search","multiple_search"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Status","id","dropdown-pos","formControlName","is_active","value","",1,"ui","fluid","dropdown"],["value",""],["value","1"],["value","0"],["palceholder","Preference","id","dropdown-preference","formControlName","preference","value","",1,"ui","fluid","dropdown"],["value","override"],["value","inherit"],[1,"two","wide","field","sale_check"],[1,"ui","checkbox"],["type","radio","value","freesale","name","freesale","formControlName","sale_type"],["for","freesale"],["type","radio","value","stopsale","name","stopsale","formControlName","sale_type"],["for","stopsale"],[1,"six","wide","field","bookings_pickers",3,"hidden"],[1,"ui","left","icon","input"],["type","text","placeholder","Start Date","formControlName","start_date","name","start_date","value",""],[1,"icon"],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","cal"],["type","text","placeholder","End Date","formControlName","end_date","name","end_date","value","","required",""],[1,"ui","header"],[1,"inline","fields","assign_prod"],["type","checkbox","name","flights","checked","checked","formControlName","is_flight"],["for","flights"],[1,"pos_product_check"],["type","checkbox","name","hotels","formControlName","is_hotel"],["for","hotels"],["type","checkbox","name","cars","formControlName","is_car"],["for","cars"],["type","checkbox","name","transfers","formControlName","is_transfers"],["for","transfers"],["type","checkbox","name","activities","formControlName","is_activities"],["for","activities"],["type","checkbox","name","insurances","formControlName","is_insurance"],["for","insurances"],["type","checkbox","name","cruises","formControlName","is_cruises"],["for","cruises"],[1,"pos_btn-panel","field"],[1,"bookings_btn-panel","save-btn-block"],["class","ui primary button commissionCode_btn fluid","type","submit",3,"click",4,"ngIf"],["class","ui primary button commissionCode_btn fluid",3,"click",4,"ngIf"],[3,"value"],["type","submit",1,"ui","primary","button","commissionCode_btn","fluid",3,"click"],[1,"tourCode_text"],[1,"ui","primary","button","commissionCode_btn","fluid",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"label"),c.Jc(6,"Group/Seasonality Name"),c.Wb(7,"span",5),c.Jc(8,"*"),c.Vb(),c.Vb(),c.Rb(9,"input",6),c.Vb(),c.Wb(10,"div",7),c.Wb(11,"label"),c.Jc(12,"POS"),c.Vb(),c.Wb(13,"select",8),c.Wb(14,"option",9),c.Jc(15,"Select one category "),c.Vb(),c.Hc(16,g,2,2,"option",10),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(17,"div",2),c.Wb(18,"div",3),c.Wb(19,"div",4),c.Wb(20,"label"),c.Jc(21,"Status"),c.Vb(),c.Wb(22,"select",11),c.Wb(23,"option",12),c.Jc(24," Status "),c.Vb(),c.Wb(25,"option",13),c.Jc(26,"Active"),c.Vb(),c.Wb(27,"option",14),c.Jc(28,"InActive"),c.Vb(),c.Vb(),c.Vb(),c.Wb(29,"div",4),c.Wb(30,"label"),c.Jc(31,"Preference"),c.Wb(32,"span",5),c.Jc(33,"*"),c.Vb(),c.Vb(),c.Wb(34,"select",15),c.Wb(35,"option",12),c.Jc(36," Preference "),c.Vb(),c.Wb(37,"option",16),c.Jc(38,"Override"),c.Vb(),c.Wb(39,"option",17),c.Jc(40,"Inherit"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(41,"div",2),c.Wb(42,"div",3),c.Wb(43,"div",18),c.Wb(44,"div",19),c.Rb(45,"input",20),c.Wb(46,"label",21),c.Jc(47,"Free Sale"),c.Vb(),c.Vb(),c.Vb(),c.Wb(48,"div",18),c.Wb(49,"div",19),c.Rb(50,"input",22),c.Wb(51,"label",23),c.Jc(52,"Stop Sale"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(53,"div",2),c.Wb(54,"div",3),c.Wb(55,"div",24),c.Wb(56,"label"),c.Jc(57,"Sale Start Date"),c.Vb(),c.Wb(58,"div",25),c.Rb(59,"input",26),c.Wb(60,"i",27),c.Rb(61,"img",28),c.Vb(),c.Vb(),c.Vb(),c.Wb(62,"div",24),c.Wb(63,"label"),c.Jc(64,"Sale End Date"),c.Vb(),c.Wb(65,"div",25),c.Rb(66,"input",29),c.Wb(67,"i",27),c.Rb(68,"img",28),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(69,"h4",30),c.Jc(70,"Assign Products"),c.Vb(),c.Wb(71,"div",2),c.Wb(72,"div",31),c.Wb(73,"div",2),c.Wb(74,"div",19),c.Rb(75,"input",32),c.Wb(76,"label",33),c.Wb(77,"span",34),c.Jc(78,"Flights"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(79,"div",2),c.Wb(80,"div",19),c.Rb(81,"input",35),c.Wb(82,"label",36),c.Wb(83,"span",34),c.Jc(84,"Hotels"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(85,"div",2),c.Wb(86,"div",19),c.Rb(87,"input",37),c.Wb(88,"label",38),c.Wb(89,"span",34),c.Jc(90,"Cars"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(91,"div",2),c.Wb(92,"div",19),c.Rb(93,"input",39),c.Wb(94,"label",40),c.Wb(95,"span",34),c.Jc(96,"Transfers"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(97,"div",2),c.Wb(98,"div",19),c.Rb(99,"input",41),c.Wb(100,"label",42),c.Wb(101,"span",34),c.Jc(102,"Activities"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(103,"div",2),c.Wb(104,"div",19),c.Rb(105,"input",43),c.Wb(106,"label",44),c.Wb(107,"span",34),c.Jc(108,"Insurances"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(109,"div",2),c.Wb(110,"div",19),c.Rb(111,"input",45),c.Wb(112,"label",46),c.Wb(113,"span",34),c.Jc(114,"Cruises"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(115,"div",47),c.Wb(116,"div",48),c.Hc(117,f,3,0,"button",49),c.Hc(118,h,3,0,"button",50),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.pc("formGroup",e.addGroupForm),c.Cb(3),c.pc("ngClass",c.uc(10,k,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.name.status)),c.Cb(6),c.pc("ngClass",c.uc(12,k,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.organisation_id.status)),c.Cb(6),c.pc("ngForOf",e.allPos),c.Cb(3),c.pc("ngClass",c.uc(14,k,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.is_active.status)),c.Cb(10),c.pc("ngClass",c.uc(16,k,e.isSubmitted&&"INVALID"==e.addGroupForm.controls.preference.status)),c.Cb(26),c.pc("hidden",e.addGroupForm.controls.sale_type&&"freesale"==e.addGroupForm.controls.sale_type.value),c.Cb(7),c.pc("hidden",e.addGroupForm.controls.sale_type&&"freesale"==e.addGroupForm.controls.sale_type.value),c.Cb(55),c.pc("ngIf",e.showSaveButton),c.Cb(1),c.pc("ngIf",e.showUpdateButton))},directives:[a.B,a.p,a.i,n.n,a.c,a.o,a.h,a.y,a.s,a.A,n.o,a.x,a.u,a.w,a.a,n.p],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.outer__add-pos__title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_btn[_ngcontent-%COMP%], .tourCode_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}div.upload[_ngcontent-%COMP%]{box-sizing:border-box;height:15px;width:123px;border-radius:3px;background-color:#fff;border:.5px solid grey;box-shadow:0 .25px .1px 0 rgba(0,0,0,.5)}div.upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block!important;width:123px!important;height:15px!important;opacity:0!important;overflow:hidden!important}.file_choose[_ngcontent-%COMP%]{position:relative;left:27px;bottom:6px;color:#4f4f4f;font-family:Roboto,sans-serif;font-size:9px;line-height:10px}.uploadinImg_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.save-next_btn__text[_ngcontent-%COMP%], .uploadinImg_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:12px}.file_table__img[_ngcontent-%COMP%]{border:none;background-color:rgba(223,234,251,.37)}.save-next_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px}.ui.pointing.secondary.menu[_ngcontent-%COMP%]{border:none}.item.stepper__progress[_ngcontent-%COMP%]{width:167px}.tab.segment.stepper__segment-outline[_ngcontent-%COMP%]{border:none;box-shadow:none}.office-info_icon[_ngcontent-%COMP%]{position:relative;top:20px;right:85px}.pos_access-rights[_ngcontent-%COMP%]{color:#828282;font-family:Roboto,sans-serif;font-size:11px;line-height:12px}.cancel_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.cancel_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.date_field[_ngcontent-%COMP%]{text-indent:17px}.assign_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.assign_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px}.circleIcon[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0d801c;border-radius:50%;display:inline-block;margin-top:6px}.plusIcon[_ngcontent-%COMP%]{color:#fff;font-size:17px;font-weight:100;line-height:28px;text-align:center;margin-left:0;margin-top:-3px} .mat-step-icon-content{height:19px;width:19px;color:#c8c8c8;background-color:#c8c8c8;border-radius:50%} .mat-step-icon-state-number.mat-step-icon.mat-step-icon-selected{border:1px solid #3867b1} .mat-horizontal-stepper-header-container{width:40%} .mat-step-label{color:#3867b1}.pos_btn-panel[_ngcontent-%COMP%]{right:68px;text-align:right;bottom:97px}.pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{width:104.87px;background-color:#4f4f4f}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%], .pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{width:124.87px;background-color:#3867b1}.icon[_ngcontent-%COMP%]{opacity:1;z-index:1}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:10px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:10px;margin-top:10px}.right.floated.two.wide.column.group_save-btn[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.wide.field.sale_check[_ngcontent-%COMP%]{margin-top:12px}.wide.field.sale_check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;top:-14px;left:0}input[_ngcontent-%COMP%]:placeholder{font-size:14px}.ui.form[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px}.assign_prod[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .sale_check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:relative;top:7px;left:0}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:before, .assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{border-radius:50%}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:1px solid #3867b1}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], .assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%], .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{color:#3867b1}.assign_prod[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after, .sale_check[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{font-size:12px;top:1px}.assign_prod[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{top:17px}@media(max-width:1440px){.result-block[_ngcontent-%COMP%]{width:auto;margin:24px}.ui.form[_ngcontent-%COMP%]{padding:30px 0}.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{width:auto;margin:0 auto;position:relative;top:60px;right:-16px}}@media(max-width:1280px){.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:120px}.outer-segment[_ngcontent-%COMP%]{margin-bottom:200px}}"]}),_);function M(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",11),c.ec("click",(function(t){return c.Ac(o),c.ic().onClickAddNewGroup(!0)})),c.Wb(1,"span",12),c.Jc(2,"Add New Groups"),c.Vb(),c.Vb()}}function C(t,e){if(1&t){var o=c.Xb();c.Wb(0,"a",13),c.ec("click",(function(t){return c.Ac(o),c.ic().onClickListGroup()})),c.Wb(1,"span",14),c.Rb(2,"img",15),c.Jc(3," Goto List Group "),c.Vb(),c.Vb()}}function x(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",16),c.Wb(1,"input",17),c.ec("ngModelChange",(function(t){return c.Ac(o),c.ic().searchObject.groupname=t})),c.Vb(),c.Wb(2,"div",18),c.Wb(3,"button",19),c.ec("click",(function(t){return c.Ac(o),c.ic().searchChange()})),c.Wb(4,"span",20),c.Jc(5,"Search "),c.Vb(),c.Vb(),c.Wb(6,"button",21),c.ec("click",(function(t){return c.Ac(o),c.ic().resetFilter()})),c.Wb(7,"span",20),c.Jc(8," Reset"),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){var n=c.ic();c.Cb(1),c.pc("ngModel",n.searchObject.groupname)}}var O=function(t){return{"list-code-block":t}};function P(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",22),c.Wb(1,"app-add-group",23),c.ec("sendDataToParent",(function(t){return c.Ac(o),c.ic().eventFromChild(t)})),c.Vb(),c.Vb()}if(2&t){var n=c.ic();c.pc("ngClass",c.uc(4,O,n.showAddGroupForm)),c.Cb(1),c.pc("change",n.groupRow)("flag",n.flag)("flgEdit",n.flgEdit)}}function V(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1,"---"),c.Vb())}function w(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.Vb()),2&t){var o=c.ic().value;c.Cb(1),c.Kc(o)}}function y(t,e){if(1&t&&(c.Hc(0,V,2,0,"span",36),c.Hc(1,w,2,1,"span",36)),2&t){var o=e.value;c.pc("ngIf",!o),c.Cb(1),c.pc("ngIf",o)}}function W(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.Vb()),2&t){var o=e.value;c.Cb(1),c.Kc(o)}}function F(t,e){if(1&t&&(c.Wb(0,"span"),c.Jc(1),c.jc(2,"date"),c.Vb()),2&t){var o=e.value;c.Cb(1),c.Kc(c.lc(2,1,o,"short"))}}function G(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Stop Sale "),c.Vb())}function A(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Free Sale "),c.Vb())}function I(t,e){if(1&t&&(c.Hc(0,G,2,0,"span",36),c.Hc(1,A,2,0,"span",36)),2&t){var o=e.row;c.pc("ngIf",1==o.is_stop_sale),c.Cb(1),c.pc("ngIf",1==o.is_free_sale)}}function S(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",39),c.ec("click",(function(t){c.Ac(o);var e=c.ic().row;return c.ic(2).statusToggle(e)})),c.Wb(1,"i",40),c.Rb(2,"img",41),c.Vb(),c.Vb()}}function J(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",42),c.ec("click",(function(t){c.Ac(o);var e=c.ic().row;return c.ic(2).statusToggle(e)})),c.Rb(1,"img",43),c.Vb()}}function N(t,e){if(1&t&&(c.Hc(0,S,3,0,"span",37),c.Hc(1,J,2,0,"span",38)),2&t){var o=e.value;c.pc("ngIf",1==o),c.Cb(1),c.pc("ngIf",1!=o)}}function R(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",44),c.ec("click",(function(t){c.Ac(o);var n=e.row;return c.ic(2).editGroup(n)})),c.Wb(1,"i",45),c.Rb(2,"img",46),c.Vb(),c.Vb(),c.Wb(3,"span",47),c.ec("click",(function(t){c.Ac(o);var n=e.row;return c.ic(2).deleteGroup(n)})),c.Wb(4,"i",45),c.Rb(5,"img",48),c.Vb(),c.Vb()}}var H=function(){return{prop:"created",dir:"desc"}},B=function(t){return[t]};function z(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",24),c.Wb(1,"div",25),c.Wb(2,"ngx-datatable",26,27),c.ec("page",(function(t){return c.Ac(o),c.ic().pageCallback(t)})),c.Rb(4,"ngx-datatable-column",28),c.Wb(5,"ngx-datatable-column",29),c.Hc(6,y,2,2,"ng-template",30),c.Vb(),c.Wb(7,"ngx-datatable-column",31),c.Hc(8,W,2,1,"ng-template",30),c.Vb(),c.Wb(9,"ngx-datatable-column",32),c.Hc(10,F,3,4,"ng-template",30),c.Vb(),c.Wb(11,"ngx-datatable-column",33),c.Hc(12,I,2,2,"ng-template",30),c.Vb(),c.Wb(13,"ngx-datatable-column",34),c.Hc(14,N,2,2,"ng-template",30),c.Vb(),c.Wb(15,"ngx-datatable-column",35),c.Hc(16,R,6,0,"ng-template",30),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){var n=c.ic();c.Cb(2),c.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",n.FilteredGroups)("count",n.totalCount)("offset",n.offset)("externalPaging",!0)("sorts",c.uc(10,B,c.tc(9,H)))}}var L,D=function(t){return{"head-search-block":t}},T=function(t){return{"list-search-block":t}},U=((L=function(){function t(e,o,n){var i=this;_classCallCheck(this,t),this.MarkupConfigurationService=e,this.posService=o,this.toastr=n,this.errMsg="",this.showListForm=!0,this.showAddGroupForm=!1,this.allPos=[],this.NewGroupSeasonality=[],this.FilteredGroups=[],this.FilteredGroupsArr=[],this.searchObject={groupname:""},this.toggleObj={},this.searchObject1={},this.groupRow=[],this.offset=0,this.totalCount=0,this.filterParams={name:null,page:this.offset},this.filterPagination=!1,this.onClickAddNewGroup=function(t){i.flag=t,i.flgEdit=!1,i.showListForm=!1,i.showAddGroupForm=!0,i.makeJqueryFields()},this.onClickListGroup=function(){i.showListForm=!0,i.showAddGroupForm=!1,i.flag=!1,i.flgEdit=!1}}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchAllGroups(this.filterParams)}},{key:"searchChange",value:function(){var t=this;this.filterPagination=!0,this.filterParams.name=this.searchObject.groupname,this.MarkupConfigurationService.searchGroupByName(this.filterParams).subscribe((function(e){if(e.status){var o=e.result.data.filter((function(t){return 1!=t.status}));t.FilteredGroups=o,t.totalCount=e.result.total,t.offset=e.result.page}else t.toastr.error("".concat(e.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"editGroup",value:function(t){this.makeJqueryFields(),this.groupRow=t,this.flgEdit=!1,this.showListForm=!1,this.showAddGroupForm=!0}},{key:"deleteGroup",value:function(t){var e=this;b.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(o){o.value&&e.MarkupConfigurationService.deleteGroup(t.sale_id).subscribe((function(t){"error"==t.type?e.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):(e.toastr.success("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),e.fetchAllGroups(e.filterParams))}))}))}},{key:"mapOrganisationIds",value:function(t){var e=this.allPos,o=[];try{if(t){for(var n=t.split(","),i=function(t){var i=n[t];i&&""!=i&&(a=e.filter((function(t){return t.organisation_id==i}))).length>0&&o.push(String(a[0].organisation_id))},r=0;r<n.length;r++){var a;i(r)}return o}return[]}catch(s){return console.log("er ",s),[]}}},{key:"fetchAllGroups",value:function(t){var e=this;this.MarkupConfigurationService.GetAllGroups(t).subscribe((function(t){if(t.status){var o=t.result.data.filter((function(t){return 1!=t.status}));e.FilteredGroups=o,e.totalCount=t.result.total,e.offset=t.result.page}else e.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-top-right"})}))}},{key:"onItemSelect",value:function(t){console.log(t)}},{key:"onSelectAll",value:function(t){console.log(t)}},{key:"ngAfterViewInit",value:function(){this.makeJqueryFields()}},{key:"makeJqueryFields",value:function(){$(document).ready((function(){$(".ui .dropdown").dropdown(),$(".dropdown").dropdown({placeholder:"Select POS"})}))}},{key:"resetFilter",value:function(){this.searchObject.groupname="",this.fetchAllGroups(this.filterParams)}},{key:"eventFromChild",value:function(t){this.showListForm=!0,this.showAddGroupForm=!1,this.fetchAllGroups(this.filterParams)}},{key:"statusToggle",value:function(t){var e=this;this.toggleObj.id=t.sale_id,this.toggleObj.status=t.is_active,this.toggleObj.table="sale",this.MarkupConfigurationService.onStatusToggle(this.toggleObj).subscribe((function(t){t.status?e.fetchAllGroups(e.filterParams):e.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"pageCallback",value:function(t){this.filterParams.page=t.offset,this.filterPagination?this.searchChange():this.fetchAllGroups(this.filterParams)}}]),t}()).\u0275fac=function(t){return new(t||L)(c.Qb(l.a),c.Qb(p.a),c.Qb(u.b))},L.\u0275cmp=c.Kb({type:L,selectors:[["app-sale"]],decls:11,vars:11,consts:[[1,"ui","fluid","container"],["name","form","novalidate","",1,"ui","form"],["f","ngForm"],[3,"ngClass"],[1,"fields","search-section",3,"ngClass"],[1,"four","wide","field","bookings_btn-panel","add-btn"],["class","ui primary button filterMarkUp_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui filterMarkUp_btn goto_list","tabindex","0",3,"click",4,"ngIf"],["class","twelve wide field search-btn-block",4,"ngIf"],["class","list-group result-block",3,"ngClass",4,"ngIf"],["class","list-group result-block",4,"ngIf"],["tabindex","0",1,"ui","primary","button","filterMarkUp_btn",3,"click"],[1,"filterMarkUp_list"],["href","javascript:void(0)","tabindex","0",1,"ui","filterMarkUp_btn","goto_list",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"twelve","wide","field","search-btn-block"],["type","text","placeholder","Group / Seasonality Name","name","groupname",3,"ngModel","ngModelChange"],[1,"bookings_btn-panel"],["tabindex","0",1,"ui","primary","button","addNewGroup_btn",3,"click"],[1,"addNewGroup-text"],["tabindex","0",1,"ui","reset","button","addNewGroup_btn",3,"click"],[1,"list-group","result-block",3,"ngClass"],[3,"change","flag","flgEdit","sendDataToParent"],[1,"list-group","result-block"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","count","offset","externalPaging","sorts","page"],["table",""],["name","Group name","prop","name"],["name","Organisation","prop","organisation"],["ngx-datatable-cell-template",""],["name","Preference","prop","preference"],["name","Date","prop","created"],["name","Sale Type","prop","is_stop_sale, is_free_sale"],["name","Status","prop","is_active"],["name","Actions"],[4,"ngIf"],["title","Active",3,"click",4,"ngIf"],["title","click to activate",3,"click",4,"ngIf"],["title","Active",3,"click"],["title","click to deactivate",1,"icon"],["src","./../../../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["title","click to activate",3,"click"],["src","./../../../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","cal"],["title","Edit user",1,"action",3,"click"],[1,"icon"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete User",1,"action",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1,2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"div",5),c.Hc(6,M,3,0,"button",6),c.Hc(7,C,4,0,"a",7),c.Vb(),c.Hc(8,x,9,1,"div",8),c.Vb(),c.Vb(),c.Hc(9,P,2,6,"div",9),c.Hc(10,z,17,12,"div",10),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.pc("ngClass",c.uc(7,D,e.showAddGroupForm)),c.Cb(1),c.pc("ngClass",c.uc(9,T,e.showAddGroupForm)),c.Cb(2),c.pc("ngIf",e.showListForm),c.Cb(1),c.pc("ngIf",e.showAddGroupForm),c.Cb(1),c.pc("ngIf",e.showListForm),c.Cb(1),c.pc("ngIf",e.showAddGroupForm),c.Cb(1),c.pc("ngIf",e.showListForm))},directives:[a.B,a.p,a.q,n.n,n.p,a.c,a.o,a.r,v,i.c,i.b,i.a],pipes:[n.f],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0 20px 0 15px}.markup_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;color:#181b20;font-size:14px}.addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{font-size:14px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}.addMarkUp[_ngcontent-%COMP%], span.action[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}span.action[_ngcontent-%COMP%]{margin:0 5px;font-weight:700;text-decoration:underline}.pages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid grey}.date_picker_custom[_ngcontent-%COMP%]   .dp_icon[_ngcontent-%COMP%]{margin-top:-40px!important;right:28px;display:grid}.alert.alert-danger[_ngcontent-%COMP%]{color:rgba(255,0,0,.68);margin-left:20px;margin-top:5px}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:10px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:18px;margin-top:10px}.text_field[_ngcontent-%COMP%]{padding-left:30px}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin:24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{position:relative}.ui.form[_ngcontent-%COMP%]   .search-section.list-search-block[_ngcontent-%COMP%]{margin:0;width:1100px!important;padding-left:0}.ui.form[_ngcontent-%COMP%]   .search-section.list-search-block[_ngcontent-%COMP%]   .bookings_btn-panel[_ngcontent-%COMP%]{padding-left:0;padding-top:20px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .ui.reset.button[_ngcontent-%COMP%]{margin-right:0}.search-btn-block[_ngcontent-%COMP%]{text-align:right}.search-btn-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30%;margin-right:12px}.search-btn-block[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}.search-btn-block[_ngcontent-%COMP%]   .field.input_field[_ngcontent-%COMP%]{position:relative;top:-8px}.ui.primary.addNewGroup_btn[_ngcontent-%COMP%]{top:8px;margin-right:12px}.list-code-block[_ngcontent-%COMP%]{margin:24px 24px 200px}.head-search-block[_ngcontent-%COMP%]{padding:0 24px}@media(max-width:1440px){.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}.search-section[_ngcontent-%COMP%]   .wide.field[_ngcontent-%COMP%]{padding:0}.list-group.result-block.list-code-block[_ngcontent-%COMP%]{margin-bottom:200px!important}}@media(max-width:1280px){.head-search-block[_ngcontent-%COMP%]{padding:0 20px}}"]}),L),E=o("FtGj"),q=o("7o2P"),j=o("kmnG"),X=o("A5z7"),Y=o("NFeN");function K(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){var o=e.$implicit;c.qc("value",o.sale_id),c.Cb(1),c.Lc(" ",o.name," ")}}function Q(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){var o=e.$implicit;c.qc("value",o.supplier_id),c.Cb(1),c.Lc(" ",o.name," ")}}function Z(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){var o=e.$implicit;c.qc("value",o.AirportCode),c.Cb(1),c.Lc(" ",o.AirportCode," ")}}function tt(t,e){if(1&t&&(c.Wb(0,"option",35),c.Jc(1),c.Vb()),2&t){var o=e.$implicit;c.qc("value",o.AirportCode),c.Cb(1),c.Lc(" ",o.AirportCode," ")}}function et(t,e){1&t&&(c.Wb(0,"mat-icon",74),c.Jc(1,"x"),c.Vb())}function ot(t,e){if(1&t){var o=c.Xb();c.Wb(0,"mat-chip",72),c.ec("removed",(function(t){c.Ac(o);var n=e.$implicit;return c.ic(3).remove(n,3)})),c.Jc(1),c.Hc(2,et,2,0,"mat-icon",73),c.Vb()}if(2&t){var n=e.$implicit,i=c.ic(3);c.pc("selectable",i.selectable)("removable",i.removable),c.Cb(1),c.Lc(" ",n.name," "),c.Cb(1),c.pc("ngIf",i.removable)}}function nt(t,e){1&t&&(c.Wb(0,"mat-icon",74),c.Jc(1,"x"),c.Vb())}function it(t,e){if(1&t){var o=c.Xb();c.Wb(0,"mat-chip",72),c.ec("removed",(function(t){c.Ac(o);var n=e.$implicit;return c.ic(3).remove(n,4)})),c.Jc(1),c.Hc(2,nt,2,0,"mat-icon",73),c.Vb()}if(2&t){var n=e.$implicit,i=c.ic(3);c.pc("selectable",i.selectable)("removable",i.removable),c.Cb(1),c.Lc(" ",n.name," "),c.Cb(1),c.pc("ngIf",i.removable)}}function rt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",57),c.Wb(1,"div",3),c.Wb(2,"div",58),c.Wb(3,"label"),c.Jc(4,"Origin Airport"),c.Vb(),c.Wb(5,"select",59),c.Hc(6,Z,2,2,"option",22),c.Vb(),c.Vb(),c.Wb(7,"div",58),c.Wb(8,"label"),c.Jc(9,"Destination Airport"),c.Vb(),c.Wb(10,"select",60),c.Hc(11,tt,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",3),c.Wb(13,"div",58),c.Wb(14,"label"),c.Jc(15,"Marketing Careers"),c.Vb(),c.Wb(16,"mat-form-field",61),c.Wb(17,"mat-chip-list",null,62),c.Hc(19,ot,3,4,"mat-chip",63),c.Vb(),c.Wb(20,"input",64),c.ec("matChipInputTokenEnd",(function(t){return c.Ac(o),c.ic(2).add(t,3)})),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(21,"div",3),c.Wb(22,"div",58),c.Wb(23,"label"),c.Jc(24,"Service Classes"),c.Vb(),c.Wb(25,"mat-form-field",61),c.Wb(26,"mat-chip-list",null,65),c.Hc(28,it,3,4,"mat-chip",63),c.Vb(),c.Wb(29,"input",66),c.ec("matChipInputTokenEnd",(function(t){return c.Ac(o),c.ic(2).add(t,4)})),c.Vb(),c.Vb(),c.Vb(),c.Wb(30,"div",67),c.Wb(31,"label"),c.Jc(32,"Trip Type"),c.Vb(),c.Wb(33,"select",68),c.Wb(34,"option",38),c.Jc(35,"Trip Type"),c.Vb(),c.Wb(36,"option",69),c.Jc(37,"One Way"),c.Vb(),c.Wb(38,"option",70),c.Jc(39,"Round Trip"),c.Vb(),c.Wb(40,"option",71),c.Jc(41,"Both"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){var n=c.yc(18),i=c.yc(27),r=c.ic(2);c.Cb(6),c.pc("ngForOf",r.airports),c.Cb(5),c.pc("ngForOf",r.airports),c.Cb(8),c.pc("ngForOf",r.addMarkupForm.controls.flightsMarkup.controls.marketing_carriers.value),c.Cb(1),c.pc("matChipInputFor",n)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes)("matChipInputAddOnBlur",r.addOnBlur),c.Cb(8),c.pc("ngForOf",r.addMarkupForm.controls.flightsMarkup.controls.service_class.value),c.Cb(1),c.pc("matChipInputFor",i)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes)("matChipInputAddOnBlur",r.addOnBlur)}}var at=function(t){return{error:t}};function st(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",36),c.Wb(1,"div",3),c.Wb(2,"div",4),c.Wb(3,"label"),c.Jc(4,"Calculation Basis"),c.Vb(),c.Wb(5,"select",37),c.ec("change",(function(t){return c.Ac(o),c.ic().makeJqueryFields()})),c.Wb(6,"option",38),c.Jc(7,"Calculation Basis"),c.Vb(),c.Wb(8,"option",39),c.Jc(9,"By Person"),c.Vb(),c.Wb(10,"option",40),c.Jc(11,"By Airline"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",4),c.Wb(13,"label"),c.Jc(14,"Calculation Type"),c.Vb(),c.Wb(15,"select",41),c.Wb(16,"option",38),c.Jc(17,"Calculation Type"),c.Vb(),c.Wb(18,"option",42),c.Jc(19,"Base Amount"),c.Vb(),c.Wb(20,"option",43),c.Jc(21,"Total"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(22,"div",3),c.Wb(23,"div",4),c.Wb(24,"label"),c.Jc(25,"Markup"),c.Vb(),c.Rb(26,"input",44),c.Vb(),c.Wb(27,"div",4),c.Wb(28,"label"),c.Jc(29,"Markup Mode"),c.Vb(),c.Wb(30,"select",45),c.Wb(31,"option",38),c.Jc(32,"Markup Mode"),c.Vb(),c.Wb(33,"option",46),c.Jc(34,"Percentage"),c.Vb(),c.Wb(35,"option",47),c.Jc(36,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(37,"div",3),c.Wb(38,"div",48),c.Wb(39,"label",49),c.Jc(40,"Pax Type (s)"),c.Vb(),c.Wb(41,"div",50),c.Wb(42,"div",51),c.Rb(43,"input",52),c.Wb(44,"label"),c.Jc(45,"Adult"),c.Vb(),c.Vb(),c.Vb(),c.Wb(46,"div",50),c.Wb(47,"div",51),c.Rb(48,"input",53),c.Wb(49,"label"),c.Jc(50,"Child"),c.Vb(),c.Vb(),c.Vb(),c.Wb(51,"div",50),c.Wb(52,"div",51),c.Rb(53,"input",54),c.Wb(54,"label"),c.Jc(55,"Infant"),c.Vb(),c.Vb(),c.Vb(),c.Wb(56,"div",50),c.Wb(57,"div",51),c.Rb(58,"input",55),c.Wb(59,"label"),c.Jc(60,"All"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Hc(61,rt,42,10,"div",56),c.Vb()}if(2&t){var n=c.ic();c.Cb(2),c.pc("ngClass",c.uc(5,at,n.isSubmitted&&"INVALID"==n.addMarkupForm.controls.flightsMarkup.controls.calculation_basis.status)),c.Cb(10),c.pc("ngClass",c.uc(7,at,n.isSubmitted&&"INVALID"==n.addMarkupForm.controls.flightsMarkup.controls.calculation_type.status)),c.Cb(11),c.pc("ngClass",c.uc(9,at,n.isSubmitted&&"INVALID"==n.addMarkupForm.controls.flightsMarkup.controls.markup.status)),c.Cb(4),c.pc("ngClass",c.uc(11,at,n.isSubmitted&&"INVALID"==n.addMarkupForm.controls.flightsMarkup.controls.markup_mode.status)),c.Cb(34),c.pc("ngIf","by_airline"==n.addMarkupForm.controls.flightsMarkup.controls.calculation_basis.value)}}function ct(t,e){if(1&t&&(c.Wb(0,"div",75),c.Wb(1,"h4",76),c.Jc(2,"Hotel Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.hotelsMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.hotelsMarkup.controls.markup_mode.value)}}function lt(t,e){if(1&t&&(c.Wb(0,"div",82),c.Wb(1,"h4",76),c.Jc(2,"Activities Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.activitiesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.activitiesMarkup.controls.markup_mode.value)}}function pt(t,e){if(1&t&&(c.Wb(0,"div",83),c.Wb(1,"h4",76),c.Jc(2,"Cars Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.carsMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.carsMarkup.controls.markup_mode.value)}}function ut(t,e){if(1&t&&(c.Wb(0,"div",84),c.Wb(1,"h4",76),c.Jc(2,"Transfer Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.transfersMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.transfersMarkup.controls.markup_mode.value)}}function dt(t,e){if(1&t&&(c.Wb(0,"div",85),c.Wb(1,"h4",76),c.Jc(2,"Insurance Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.insurancesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.insurancesMarkup.controls.markup_mode.value)}}function bt(t,e){if(1&t&&(c.Wb(0,"div",86),c.Wb(1,"h4",76),c.Jc(2,"Cruises Markup Rules"),c.Vb(),c.Wb(3,"div",3),c.Wb(4,"div",77),c.Rb(5,"input",44),c.Vb(),c.Wb(6,"div",77),c.Wb(7,"select",45),c.Wb(8,"option",46),c.Jc(9,"Percentage"),c.Vb(),c.Wb(10,"option",47),c.Jc(11,"Amount"),c.Vb(),c.Vb(),c.Vb(),c.Wb(12,"div",78),c.Rb(13,"input",79),c.Vb(),c.Wb(14,"div",78),c.Rb(15,"input",80),c.Vb(),c.Vb(),c.Rb(16,"div",81),c.Vb()),2&t){var o=c.ic();c.Cb(12),c.pc("hidden","by_amount"==o.addMarkupForm.controls.cruisesMarkup.controls.markup_mode.value),c.Cb(2),c.pc("hidden","by_amount"==o.addMarkupForm.controls.cruisesMarkup.controls.markup_mode.value)}}function mt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",87),c.ec("click",(function(t){return c.Ac(o),c.ic().addMark(null)})),c.Wb(1,"span",88),c.Jc(2,"Save"),c.Vb(),c.Vb()}}function gt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",89),c.ec("click",(function(t){return c.Ac(o),c.ic().onUpdateMarkup(null)})),c.Wb(1,"span",88),c.Jc(2,"Update"),c.Vb(),c.Vb()}}var ft,ht=((ft=function(){function t(e,o,n,i,r){var a=this;_classCallCheck(this,t),this.MarkupConfigurationService=e,this.posService=o,this._formBuilder=n,this.toastr=i,this.CommonService=r,this.allSuppliers=[],this.filteredSuppliers=[],this.allGroups=[],this.isSubmitted=!1,this.orgArr=[],this.destArr=[],this.carrierArr=[],this.serviceArr=[],this.pax=[],this.airports=[],this.filterGroup={limit:1500},this.change=new c.n,this.dataToParent=new c.n,this.separatorKeysCodes=[E.g,E.c],this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.suppliersList=[],this.getAirportDetails=function(){a.CommonService.getAirportsList().subscribe((function(t){t.status?a.airports=t.result:a.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initMarkupForm(),this.fetchAllGroups(this.filterGroup),this.fetchAllSuppliers({}),this.onEditMarkUpRow(this.row),this.getAirportDetails(),1==this.flagOnAdd&&0==this.flagOnEdit?(this.showSaveButton=!0,this.showUpdateButton=!1,this.fetchAllGroups(this.filterGroup),this.addMarkupForm.reset()):(this.showUpdateButton=!0,this.showSaveButton=!1)}},{key:"initMarkupForm",value:function(){this.addMarkupForm=this._formBuilder.group({supplier_id:["",a.z.required],sale_id:["",a.z.required],title:["",a.z.required],is_active:["",a.z.required],priority:["",a.z.required],markup_id:[""],markup_flight_id:[""]})}},{key:"addFlightMarkupFormGroup",value:function(){this.addMarkupForm.addControl("flightsMarkup",this._formBuilder.group({markup_mode:[""],markup:["",[a.z.required]],calculation_basis:["",[a.z.required]],calculation_type:["",[a.z.required]],itinerary_type:["",[a.z.required]],orgin_airport:[[]],destination_airport:[[]],marketing_carriers:[[]],service_class:[[]],is_adult:[""],is_infant:[""],is_child:[""],is_all:[""],markup_id:[""],markup_flight_id:[""],pax_types:[""],org_airport:[""],dest_airport:[""],mode:[""]})),this.makeJqueryFields()}},{key:"removeFlightMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("flightsMarkup")}},{key:"addHotelMarkupFormGroup",value:function(){this.addMarkupForm.addControl("hotelsMarkup",this._formBuilder.group({markup_hotel_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeHotelMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("hotelsMarkup")}},{key:"addActivitiesMarkupFormGroup",value:function(){this.addMarkupForm.addControl("activitiesMarkup",this._formBuilder.group({markup_activitie_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeActivitiesMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("activitiesMarkup")}},{key:"addCarsMarkupFormGroup",value:function(){this.addMarkupForm.addControl("carsMarkup",this._formBuilder.group({markup_car_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeCarsMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("carsMarkup")}},{key:"addTransfersMarkupFormGroup",value:function(){this.addMarkupForm.addControl("transfersMarkup",this._formBuilder.group({markup_transfer_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeTransfersMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("transfersMarkup")}},{key:"addInsuranceMarkupFormGroup",value:function(){this.addMarkupForm.addControl("insurancesMarkup",this._formBuilder.group({markup_insurance_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeInsuranceMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("insurancesMarkup")}},{key:"addCruisesMarkupFormGroup",value:function(){this.addMarkupForm.addControl("cruisesMarkup",this._formBuilder.group({markup_cruise_id:[""],markup:[""],markup_mode:[""],min_markup:[""],max_markup:[""]})),this.makeJqueryFields()}},{key:"removeCruisesMarkupFormGroup",value:function(){this.addMarkupForm.removeControl("cruisesMarkup")}},{key:"addMark",value:function(t){var e=this;this.isSubmitted=!0;var o={},n={},i={},r={},a={},s={},c={};o=this.addMarkupForm.controls.flightsMarkup?this.convertFlightsData(o=this.addMarkupForm.controls.flightsMarkup.value):"",this.addMarkupForm.controls.hotelsMarkup&&(n=this.addMarkupForm.controls.hotelsMarkup.value||!1),this.addMarkupForm.controls.activitiesMarkup&&(i=this.addMarkupForm.controls.activitiesMarkup.value||!1),this.addMarkupForm.controls.transfersMarkup&&(r=this.addMarkupForm.controls.transfersMarkup.value||!1),this.addMarkupForm.controls.carsMarkup&&(a=this.addMarkupForm.controls.carsMarkup.value||!1),this.addMarkupForm.controls.cruisesMarkup&&(s=this.addMarkupForm.controls.cruisesMarkup.value||!1),this.addMarkupForm.controls.insurancesMarkup&&(c=this.addMarkupForm.controls.insurancesMarkup.value||!1),this.MarkupConfigurationService.AddMarkup({markup:{supplier_id:this.addMarkupForm.controls.supplier_id.value,sale_id:this.addMarkupForm.controls.sale_id.value,title:this.addMarkupForm.controls.title.value,is_active:this.addMarkupForm.controls.is_active.value,priority:this.addMarkupForm.controls.priority.value,markup_id:"",mode:"Add"},editions:{hotels:n,flights:o,activities:i,cars:a,transfers:r,insurances:c,cruises:s}}).subscribe((function(o){if(o.status){var n=o.result;e.dataToParent.emit(t),e.toastr.success("".concat(o.message),"Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"}),e.change.emit({component:"markup",action:"add",markup:n})}else e.toastr.error("".concat(o.message)," ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"fetchAllSuppliers",value:function(t){var e=this;this.MarkupConfigurationService.FetchAllSuppliers(t).subscribe((function(t){t.status&&(e.allSuppliers=t.result,e.filteredSuppliers=e.allSuppliers)}),(function(t){console.log("erer ",t)}))}},{key:"fetchAllGroups",value:function(t){var e=this;this.MarkupConfigurationService.GetAllGroups(this.filterGroup).subscribe((function(t){if(t.status){var o=t.result.data.filter((function(t){return 1!=t.status}));e.allGroups=o,console.log("===fetchAllGroups====",e.allGroups)}}),(function(t){console.log("erer ",t)}))}},{key:"groupChanged",value:function(t){var e=this.allSuppliers;this.addMarkupForm.patchValue({supplier_id:""}),this.makeJqueryFields();var o=this.allGroups.filter((function(e){return e.sale_id==Number(t)}));if(o.length){var n=o[0],i=e.filter((function(t){return!(n.is_activities&&!t.is_activities||n.is_flight&&!t.is_flight||n.is_car&&!t.is_car||n.is_cruises&&!t.is_cruises||n.is_holidays&&!t.is_holidays||n.is_hotel&&!t.is_hotel||n.is_insurance&&!t.is_insurance||n.is_transfers&&!t.is_transfers||n.is_visa&&!t.is_visa)}));this.filteredSuppliers=i}}},{key:"supplierChanged",value:function(t){var e=this.addMarkupForm.controls.sale_id.value;if(t&&e){var o=this.allGroups.filter((function(t){return t.sale_id==Number(e)})),n=this.allSuppliers.filter((function(e){return e.supplier_id==Number(t)}));if(o.length&&n.length){var i=o[0],r=n[0];i.is_flight&&r.is_flight?this.addFlightMarkupFormGroup():this.addMarkupForm.removeControl("flightsMarkup"),i.is_hotel&&r.is_hotel?this.addHotelMarkupFormGroup():this.addMarkupForm.removeControl("hotelsMarkup"),i.is_car&&r.is_car?this.addCarsMarkupFormGroup():this.addMarkupForm.removeControl("carsMarkup"),i.is_activities&&r.is_activities?this.addActivitiesMarkupFormGroup():this.addMarkupForm.removeControl("activitiesMarkup"),i.is_transfers&&r.is_transfers?this.addTransfersMarkupFormGroup():this.addMarkupForm.removeControl("transfersMarkup"),i.is_cruises&&r.is_cruises?this.addCruisesMarkupFormGroup():this.addMarkupForm.removeControl("cruisesMarkup"),i.is_insurance&&r.is_insurance?this.addInsuranceMarkupFormGroup():this.addMarkupForm.removeControl("insurancesMarkup")}}}},{key:"add",value:function(t,e){var o=t.input,n=t.value;(n||"").trim()&&(1==e&&this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.push({name:n.trim()}),2==e&&this.addMarkupForm.controls.flightsMarkup.value.destination_airport.push({name:n.trim()}),3==e&&this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.push({name:n.trim()}),4==e&&this.addMarkupForm.controls.flightsMarkup.value.service_class.push({name:n.trim()})),o&&(o.value="")}},{key:"remove",value:function(t,e){var o=this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.indexOf(t),n=this.addMarkupForm.controls.flightsMarkup.value.destination_airport.indexOf(t),i=this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.indexOf(t),r=this.addMarkupForm.controls.flightsMarkup.value.service_class.indexOf(t);1==e&&this.addMarkupForm.controls.flightsMarkup.value.orgin_airport.splice(o,1),2==e&&this.addMarkupForm.controls.flightsMarkup.value.destination_airport.splice(n,1),3==e&&this.addMarkupForm.controls.flightsMarkup.value.marketing_carriers.splice(i,1),4==e&&this.addMarkupForm.controls.flightsMarkup.value.service_class.splice(r,1)}},{key:"convertFlightsData",value:function(t){if(""!=t)var e=Object.assign({},t);if(e.orgin_airport=e.orgin_airport.map((function(t){return t.name})).join(),e.destination_airport=e.destination_airport.map((function(t){return t.name})).join(),e.marketing_carriers=e.marketing_carriers.map((function(t){return t.name})).join(),e.service_class=e.service_class.map((function(t){return t.name})).join(),e.is_all)e.pax_types="ALL";else{var o="";e.is_child&&(o+="CHD,"),e.is_adult&&(o+="ADT,"),e.is_infant&&(o+="INF,"),o.length>0&&(o=o.substring(0,o.length-1)),e.pax_types=o}return e}},{key:"ngAfterViewInit",value:function(){this.makeJqueryFields()}},{key:"makeJqueryFields",value:function(){$(".ui.dropdown-group").dropdown(),$(".ui.dropdown").dropdown(),$(document).ready((function(){$(".ui.dropdown-group").dropdown(),$(".ui.dropdown").dropdown()}))}},{key:"onEditMarkUpRow",value:function(t){var e=this;if(0!=t.length){if(this.supplierId=t.supplier_id,this.saleId=t.sale_id,null!=t.markup_flight){var o=t.markup_flight.pax_types.split(",");if(o.length&&(this.is_all=!1,this.is_child=!1,this.is_infant=!1,this.is_adult=!1,o.forEach((function(t){"ALL"==t?(e.is_all=!0,e.is_child=!0,e.is_infant=!0,e.is_adult=!0):(e.is_all=!1,"CHD"==t&&(e.is_child=!0),"INF"==t&&(e.is_infant=!0),"ADT"==t&&(e.is_adult=!0))}))),null!=t.markup_flight.orgin_airport){var n=t.markup_flight.orgin_airport;(n=n.split(",")).forEach((function(t){e.orgArr.push({name:t})}))}if(null!=t.markup_flight.destination_airport){var i=t.markup_flight.destination_airport;(i=i.split(",")).forEach((function(t){e.destArr.push({name:t})}))}if(null!=t.markup_flight.marketing_carriers){var r=t.markup_flight.marketing_carriers;(r=r.split(",")).forEach((function(t){e.carrierArr.push({name:t})}))}if(null!=t.markup_flight.service_class){var a=t.markup_flight.service_class;(a=a.split(",")).forEach((function(t){e.serviceArr.push({name:t})}))}}if(this.supplierId&&this.saleId){this.groupChanged(this.saleId),this.supplierChanged(this.supplierId);var s=this.allGroupdatas.filter((function(t){return t.sale_id==Number(e.saleId)}));if(0!=this.allSupplierDatas.length)var c=this.allSupplierDatas.filter((function(t){return t.supplier_id==Number(e.supplierId)}));if(s.length&&c.length){var l=s[0],p=c[0];null!=t.markup_flight&&(l.is_flight&&p.is_flight?(this.addFlightMarkupFormGroup(),this.addMarkupForm.controls.flightsMarkup.patchValue({markup_mode:t.markup_flight.markup_mode||"",markup:t.markup_flight.markup||"",calculation_basis:t.markup_flight.calculation_basis||"",calculation_type:t.markup_flight.calculation_type||"",itinerary_type:t.markup_flight.itinerary_type||"",orgin_airport:this.orgArr||"",destination_airport:this.destArr||"",marketing_carriers:this.carrierArr||"",service_class:this.serviceArr||"",is_adult:this.is_adult||"",is_infant:this.is_infant||"",is_child:this.is_child||"",is_all:this.is_all||"",markup_id:t.markup_flight.markup_id||"",markup_flight_id:t.markup_flight.markup_flight_id||"",pax_types:t.markup_flight.pax_types||""})):this.addMarkupForm.removeControl("flightsMarkup")),null!=t.markup_hotel&&(l.is_hotel&&p.is_hotel?(this.addHotelMarkupFormGroup(),this.addMarkupForm.controls.hotelsMarkup.patchValue({markup_hotel_id:t.markup_hotel.markup_hotel_id,markup_mode:t.markup_hotel.markup_mode,markup:t.markup_hotel.markup,min_markup:t.markup_hotel.min_markup,max_markup:t.markup_hotel.max_markup})):this.addMarkupForm.removeControl("hotelsMarkup")),null!=t.markup_activity&&(l.is_activities&&p.is_activities?(this.addActivitiesMarkupFormGroup(),this.addMarkupForm.controls.activitiesMarkup.patchValue({markup_activitie_id:t.markup_activity.markup_activitie_id,markup_mode:t.markup_activity.markup_mode,markup:t.markup_activity.markup,min_markup:t.markup_activity.min_markup,max_markup:t.markup_activity.max_markup})):this.addMarkupForm.removeControl("activitiesMarkup")),null!=t.markup_car&&(l.is_car&&p.is_car?(this.addCarsMarkupFormGroup(),this.addMarkupForm.controls.carsMarkup.patchValue({markup_car_id:t.markup_car.markup_car_id,markup_mode:t.markup_car.markup_mode,markup:t.markup_car.markup,min_markup:t.markup_car.min_markup,max_markup:t.markup_car.max_markup})):this.addMarkupForm.removeControl("carsMarkup")),null!=t.markup_transfer&&(l.is_transfers&&p.is_transfers?(this.addTransfersMarkupFormGroup(),this.addMarkupForm.controls.transfersMarkup.patchValue({markup_transfer_id:t.markup_transfer.markup_transfer_id,markup_mode:t.markup_transfer.markup_mode,markup:t.markup_transfer.markup,min_markup:t.markup_transfer.min_markup,max_markup:t.markup_transfer.max_markup})):this.addMarkupForm.removeControl("transfersMarkup")),null!=t.markup_insurance&&(l.is_insurance&&p.is_insurance?(this.addInsuranceMarkupFormGroup(),this.addMarkupForm.controls.insurancesMarkup.patchValue({markup_insurance_id:t.markup_insurance.markup_insurance_id,markup_mode:t.markup_insurance.markup_mode,markup:t.markup_insurance.markup,min_markup:t.markup_insurance.min_markup,max_markup:t.markup_insurance.max_markup})):this.addMarkupForm.removeControl("insurancesMarkup")),null!=t.markup_cruise&&(l.is_cruises&&p.is_cruises?(this.addCruisesMarkupFormGroup(),this.addMarkupForm.controls.cruisesMarkup.patchValue({markup_cruise_id:t.cruisesMarkup.markup_cruise_id,markup_mode:t.markup_cruise.markup_mode,markup:t.markup_cruise.markup,min_markup:t.markup_cruise.min_markup,max_markup:t.markup_cruise.max_markup})):this.addMarkupForm.removeControl("cruisesMarkup"))}}this.addMarkupForm.patchValue({supplier_id:t.supplier_id,sale_id:t.sale_id,title:t.title,is_active:t.is_active,priority:t.priority,markup_id:t.markup_id,markup_flight_id:null!=t.markup_flight?t.markup_flight.markup_flight_id:""})}}},{key:"onUpdateMarkup",value:function(t){var e=this;this.isSubmitted=!0;var o={},n={},i={},r={},a={},s={},c={};o=this.addMarkupForm.controls.flightsMarkup?this.convertFlightsData(o=this.addMarkupForm.controls.flightsMarkup.value):"",this.addMarkupForm.controls.hotelsMarkup&&(n=this.addMarkupForm.controls.hotelsMarkup.value||!1),this.addMarkupForm.controls.activitiesMarkup&&(i=this.addMarkupForm.controls.activitiesMarkup.value||!1),this.addMarkupForm.controls.transfersMarkup&&(r=this.addMarkupForm.controls.transfersMarkup.value||!1),this.addMarkupForm.controls.carsMarkup&&(a=this.addMarkupForm.controls.carsMarkup.value||!1),console.log("carsdata---",a),this.addMarkupForm.controls.cruisesMarkup&&(s=this.addMarkupForm.controls.cruisesMarkup.value||!1),this.addMarkupForm.controls.insurancesMarkup&&(c=this.addMarkupForm.controls.insurancesMarkup.value||!1),this.MarkupConfigurationService.editMarkup({markup:{supplier_id:this.addMarkupForm.controls.supplier_id.value,sale_id:this.addMarkupForm.controls.sale_id.value,title:this.addMarkupForm.controls.title.value,is_active:this.addMarkupForm.controls.is_active.value,priority:this.addMarkupForm.controls.priority.value,markup_id:this.addMarkupForm.value.markup_id,mode:"Update"},editions:{hotels:n,flights:o,activities:i,cars:a,transfers:r,insurances:c,cruises:s}}).subscribe((function(o){if(o.status){var n=o.result;e.dataToParent.emit(t),e.toastr.success("".concat(o.message),"Success ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"}),e.change.emit({component:"markup",action:"update",markup:n})}else e.toastr.error("".concat(o.message)," ",{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"})}),(function(t){console.log("er ",t)}))}}]),t}()).\u0275fac=function(t){return new(t||ft)(c.Qb(l.a),c.Qb(p.a),c.Qb(a.f),c.Qb(u.b),c.Qb(q.a))},ft.\u0275cmp=c.Kb({type:ft,selectors:[["app-add-markup"]],inputs:{groupId:"groupId",row:["mark","row"],allGroupdatas:["groupData","allGroupdatas"],allSupplierDatas:["supplierData","allSupplierDatas"],flagOnAdd:["flag","flagOnAdd"],flagOnEdit:["flagEdit","flagOnEdit"]},outputs:{change:"change",dataToParent:"dataToParent"},decls:72,vars:27,consts:[[1,"outer-form"],[1,"ui","form","pos_basic_form",3,"formGroup"],[1,"ui","form","pos_basic_form"],[1,"fields"],[1,"six","wide","field",3,"ngClass"],["type","text","formControlName","title","placeholder","Markup Title"],["formControlName","priority",1,"ui","fluid","selection","dropdown"],["value","","selected",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["formControlName","is_active",1,"ui","fluid","selection","dropdown"],["value","0"],["formControlName","sale_id",1,"ui","dropdown","fluid","search","selection","dropdown-group",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"mandatory"],["formControlName","supplier_id",1,"ui","fluid","search","selection","dropdown",3,"change"],["class","markup-block","formGroupName","flightsMarkup",4,"ngIf"],["class","markup-block","formGroupName","hotelsMarkup",4,"ngIf"],["class","markup-block","formGroupName","activitiesMarkup",4,"ngIf"],["class","markup-block","formGroupName","carsMarkup",4,"ngIf"],["class","markup-block","formGroupName","transfersMarkup",4,"ngIf"],["class","markup-block","formGroupName","insurancesMarkup",4,"ngIf"],["class","markup-block","formGroupName","cruisesMarkup",4,"ngIf"],[1,"bookings_btn-panel","group_save-btn","save-btn-block"],["class","ui primary button commissionCode_btn fluid","type","submit",3,"click",4,"ngIf"],["class","ui primary button commissionCode_btn fluid",3,"click",4,"ngIf"],[3,"value"],["formGroupName","flightsMarkup",1,"markup-block"],["formControlName","calculation_basis",1,"ui","fluid","selection","dropdown",3,"change"],["value","","selected","","disabled","","hidden",""],["value","per_person"],["value","by_airline"],["formControlName","calculation_type",1,"ui","fluid","selection","dropdown"],["value","far_base"],["value","far_total"],["type","number","name","markup","placeholder","Markup Value","formControlName","markup"],["formControlName","markup_mode",1,"ui","fluid","selection","dropdown"],["value","by_percentage"],["value","by_amount"],[1,"six","wide","field","field-inline"],[1,"checkbox-field"],[1,"four","wide","field"],[1,"ui","checkbox"],["type","checkbox","formControlName","is_adult"],["type","checkbox","formControlName","is_child"],["type","checkbox","formControlName","is_infant"],["type","checkbox","formControlName","is_all"],["class","",4,"ngIf"],[1,""],[1,"six","wide","field","input-tagbased","mb-0"],["formControlName","org_airport","multiple","",1,"ui","fluid","search","dropdown"],["formControlName","dest_airport","multiple","",1,"ui","fluid","search","dropdown"],[2,"width","100%","top","-10px"],["chipList3",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","Marketing Careers",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["chipList4",""],["placeholder","Service Classes",1,"input_mat",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"six","wide","field"],["formControlName","itinerary_type",1,"ui","fluid","selection","dropdown"],["value","oneway"],["value","roundtrip"],["value","both"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["formGroupName","hotelsMarkup",1,"markup-block"],[1,"ui","header"],[1,"three","wide","field"],[1,"three","wide","field",3,"hidden"],["type","number","name","minMarkup","placeholder","Minimum Markup","formControlName","min_markup"],["type","number","name","maxMarkup","placeholder","Maximum Markup","formControlName","max_markup"],[1,"ui","fitted","divider"],["formGroupName","activitiesMarkup",1,"markup-block"],["formGroupName","carsMarkup",1,"markup-block"],["formGroupName","transfersMarkup",1,"markup-block"],["formGroupName","insurancesMarkup",1,"markup-block"],["formGroupName","cruisesMarkup",1,"markup-block"],["type","submit",1,"ui","primary","button","commissionCode_btn","fluid",3,"click"],[1,"tourCode_text"],[1,"ui","primary","button","commissionCode_btn","fluid",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"label"),c.Jc(6,"Markup Title"),c.Vb(),c.Rb(7,"input",5),c.Vb(),c.Wb(8,"div",4),c.Wb(9,"label"),c.Jc(10,"Priority"),c.Vb(),c.Wb(11,"select",6),c.Wb(12,"option",7),c.Jc(13,"Priority"),c.Vb(),c.Wb(14,"option",8),c.Jc(15,"1"),c.Vb(),c.Wb(16,"option",9),c.Jc(17,"2"),c.Vb(),c.Wb(18,"option",10),c.Jc(19,"3"),c.Vb(),c.Wb(20,"option",11),c.Jc(21,"4"),c.Vb(),c.Wb(22,"option",12),c.Jc(23,"5"),c.Vb(),c.Wb(24,"option",13),c.Jc(25,"6"),c.Vb(),c.Wb(26,"option",14),c.Jc(27,"7"),c.Vb(),c.Wb(28,"option",15),c.Jc(29,"8"),c.Vb(),c.Wb(30,"option",16),c.Jc(31,"9"),c.Vb(),c.Wb(32,"option",17),c.Jc(33,"10"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(34,"div",3),c.Wb(35,"div",4),c.Wb(36,"label"),c.Jc(37,"Status"),c.Vb(),c.Wb(38,"select",18),c.Wb(39,"option",7),c.Jc(40,"Status"),c.Vb(),c.Wb(41,"option",8),c.Jc(42,"Active"),c.Vb(),c.Wb(43,"option",19),c.Jc(44,"InActive"),c.Vb(),c.Vb(),c.Vb(),c.Wb(45,"div",4),c.Wb(46,"label"),c.Jc(47,"Sales Configuration"),c.Vb(),c.Wb(48,"select",20),c.ec("change",(function(t){return e.groupChanged(t.target.value)})),c.Wb(49,"option",21),c.Jc(50,"Select Group"),c.Vb(),c.Hc(51,K,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Wb(52,"div",3),c.Wb(53,"div",4),c.Wb(54,"label"),c.Jc(55,"Supplier"),c.Wb(56,"span",23),c.Jc(57,"*"),c.Vb(),c.Vb(),c.Wb(58,"select",24),c.ec("change",(function(t){return e.supplierChanged(t.target.value)})),c.Wb(59,"option",7),c.Jc(60,"Select Supplier"),c.Vb(),c.Hc(61,Q,2,2,"option",22),c.Vb(),c.Vb(),c.Vb(),c.Hc(62,st,62,13,"div",25),c.Hc(63,ct,17,2,"div",26),c.Hc(64,lt,17,2,"div",27),c.Hc(65,pt,17,2,"div",28),c.Hc(66,ut,17,2,"div",29),c.Hc(67,dt,17,2,"div",30),c.Hc(68,bt,17,2,"div",31),c.Vb(),c.Wb(69,"div",32),c.Hc(70,mt,3,0,"button",33),c.Hc(71,gt,3,0,"button",34),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.pc("formGroup",e.addMarkupForm),c.Cb(3),c.pc("ngClass",c.uc(17,at,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.title.status)),c.Cb(4),c.pc("ngClass",c.uc(19,at,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.priority.status)),c.Cb(27),c.pc("ngClass",c.uc(21,at,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.is_active.status)),c.Cb(10),c.pc("ngClass",c.uc(23,at,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.sale_id.status)),c.Cb(6),c.pc("ngForOf",e.allGroups),c.Cb(2),c.pc("ngClass",c.uc(25,at,e.isSubmitted&&"INVALID"==e.addMarkupForm.controls.supplier_id.status)),c.Cb(8),c.pc("ngForOf",e.filteredSuppliers),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.flightsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.hotelsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.activitiesMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.carsMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.transfersMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.insurancesMarkup),c.Cb(1),c.pc("ngIf",e.addMarkupForm.controls.cruisesMarkup),c.Cb(2),c.pc("ngIf",e.showSaveButton),c.Cb(1),c.pc("ngIf",e.showUpdateButton))},directives:[a.B,a.p,a.i,n.n,a.c,a.o,a.h,a.x,a.s,a.A,n.o,n.p,a.j,a.t,a.a,a.y,j.b,X.c,X.b,X.a,Y.a,X.d],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.outer__add-pos__title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_btn[_ngcontent-%COMP%], .tourCode_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}div.upload[_ngcontent-%COMP%]{box-sizing:border-box;height:15px;width:123px;border-radius:3px;background-color:#fff;border:.5px solid grey;box-shadow:0 .25px .1px 0 rgba(0,0,0,.5)}div.upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block!important;width:123px!important;height:15px!important;opacity:0!important;overflow:hidden!important}.file_choose[_ngcontent-%COMP%]{position:relative;left:27px;bottom:6px;color:#4f4f4f;font-family:Roboto,sans-serif;font-size:9px;line-height:10px}.uploadinImg_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.save-next_btn__text[_ngcontent-%COMP%], .uploadinImg_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:12px}.file_table__img[_ngcontent-%COMP%]{border:none;background-color:rgba(223,234,251,.37)}.save-next_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{font-size:14px}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .input_mat[_ngcontent-%COMP%]{font-size:14px}.ui.pointing.secondary.menu[_ngcontent-%COMP%]{border:none}.item.stepper__progress[_ngcontent-%COMP%]{width:167px}.tab.segment.stepper__segment-outline[_ngcontent-%COMP%]{border:none;box-shadow:none}.office-info_icon[_ngcontent-%COMP%]{position:relative;top:20px;right:85px}.pos_access-rights[_ngcontent-%COMP%]{color:#828282;font-family:Roboto,sans-serif;font-size:11px;line-height:12px}.cancel_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.cancel_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.issue_date[_ngcontent-%COMP%]{text-indent:17px}.wide.field.sale_check[_ngcontent-%COMP%]{margin-top:10px}.assign_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.assign_btn__text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px}.circleIcon[_ngcontent-%COMP%]{height:20px;width:20px;background-color:#0d801c;border-radius:50%;display:inline-block;margin-top:6px}.plusIcon[_ngcontent-%COMP%]{color:#fff;font-size:17px;font-weight:100;line-height:28px;text-align:center;margin-left:0;margin-top:-3px} .mat-step-icon-content{height:19px;width:19px;color:#c8c8c8;background-color:#c8c8c8;border-radius:50%} .mat-step-icon-state-number.mat-step-icon.mat-step-icon-selected{border:1px solid #3867b1} .mat-horizontal-stepper-header-container{width:40%} .mat-step-label{color:#3867b1}.pos_btn-panel[_ngcontent-%COMP%]{position:static;right:68px;bottom:97px;text-align:right}.pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{width:104.87px;background-color:#4f4f4f}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%], .pos_btn-panel[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.pos_btn-panel[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{width:124.87px;background-color:#3867b1}.field-inline[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{display:inline-block}.markup-block[_ngcontent-%COMP%]{margin-top:50px}.right.floated.two.wide.column.group_save-btn[_ngcontent-%COMP%]{display:-webkit-box;display:flex}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.ui.form[_ngcontent-%COMP%]   .six.wide.field.mb-0[_ngcontent-%COMP%]{margin-bottom:0}.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}  .mat-form-field-underline{display:none} .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:0}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px}@media(max-width:1440px){.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{width:auto;margin:0 auto;position:relative;top:24px;right:-16px}}@media(max-width:1280px){.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:120px}}"]}),ft);function _t(t,e){if(1&t){var o=c.Xb();c.Wb(0,"button",11),c.ec("click",(function(t){return c.Ac(o),c.ic().onClickAddNewMarkup(!0)})),c.Wb(1,"span",12),c.Jc(2,"Add New Markup"),c.Vb(),c.Vb()}}function kt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"a",13),c.ec("click",(function(t){return c.Ac(o),c.ic().onClickListMarkup()})),c.Wb(1,"span",14),c.Rb(2,"img",15),c.Jc(3," Goto List Markup "),c.Vb(),c.Vb()}}function vt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",16),c.Wb(1,"input",17),c.ec("ngModelChange",(function(t){return c.Ac(o),c.ic().searchObject.markupname=t})),c.Vb(),c.Wb(2,"div",18),c.Wb(3,"button",19),c.ec("click",(function(t){return c.Ac(o),c.ic().searchChange()})),c.Wb(4,"span",20),c.Jc(5," Search "),c.Vb(),c.Vb(),c.Wb(6,"button",21),c.ec("click",(function(t){return c.Ac(o),c.ic().resetFilter()})),c.Wb(7,"span",20),c.Jc(8," Reset "),c.Vb(),c.Vb(),c.Vb(),c.Vb()}if(2&t){var n=c.ic();c.Cb(1),c.pc("ngModel",n.searchObject.markupname)}}var Mt=function(t){return{"list-code-block":t}};function Ct(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",22),c.Wb(1,"app-add-markup",23),c.ec("dataToParent",(function(t){return c.Ac(o),c.ic().eventFromChild(t)})),c.Vb(),c.Vb()}if(2&t){var n=c.ic();c.pc("ngClass",c.uc(7,Mt,n.showAddMarkupForm)),c.Cb(1),c.pc("groupId",n.groupId)("groupData",n.groups)("supplierData",n.allSuppliers)("flag",n.flag)("mark",n.markupRow)("flagEdit",n.flagEdit)}}function xt(t,e){1&t&&c.Jc(0),2&t&&c.Lc(" ",e.value.name," ")}function Ot(t,e){1&t&&c.Sb(0)}function Pt(t,e){if(1&t&&c.Jc(0),2&t){var o=c.ic().row;c.Lc(" ",o.title," ")}}function Vt(t,e){1&t&&c.Jc(0," --- ")}function wt(t,e){if(1&t&&(c.Hc(0,Ot,1,0,"ng-container",39),c.Hc(1,Pt,1,1,"ng-template",null,40,c.Ic),c.Hc(3,Vt,1,0,"ng-template",null,41,c.Ic)),2&t){var o=e.row,n=c.yc(2),i=c.yc(4);c.pc("ngIf",o.title&&null!=o.title)("ngIfThen",n)("ngIfElse",i)}}function yt(t,e){1&t&&c.Jc(0),2&t&&c.Lc(" ",e.value," ")}function Wt(t,e){1&t&&c.Sb(0)}function Ft(t,e){if(1&t&&c.Jc(0),2&t){var o=c.ic().value;c.Lc(" ",o.markup,"% ")}}function Gt(t,e){if(1&t&&c.Jc(0),2&t){var o=c.ic().value;c.Lc(" ",o.markup," ")}}function At(t,e){if(1&t&&(c.Hc(0,Wt,1,0,"ng-container",39),c.Hc(1,Ft,1,1,"ng-template",null,42,c.Ic),c.Hc(3,Gt,1,1,"ng-template",null,43,c.Ic)),2&t){var o=e.value,n=c.yc(2),i=c.yc(4);c.pc("ngIf","by_percentage"==o.markup_mode)("ngIfThen",n)("ngIfElse",i)}}function It(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Inherit "),c.Vb())}function St(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Override "),c.Vb())}function Jt(t,e){if(1&t&&(c.Hc(0,It,2,0,"span",44),c.Hc(1,St,2,0,"span",44)),2&t){var o=e.value;c.pc("ngIf",1==o),c.Cb(1),c.pc("ngIf",1!=o)}}function Nt(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Stop Sale "),c.Vb())}function Rt(t,e){1&t&&(c.Wb(0,"span"),c.Jc(1," Free Sale "),c.Vb())}function Ht(t,e){if(1&t&&(c.Hc(0,Nt,2,0,"span",44),c.Hc(1,Rt,2,0,"span",44)),2&t){var o=e.value;c.pc("ngIf",1==o.is_stop_sale),c.Cb(1),c.pc("ngIf",1==o.is_free_sale)}}function Bt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",47),c.ec("click",(function(t){c.Ac(o);var e=c.ic().row;return c.ic(3).statusToggle(e)})),c.Wb(1,"i",48),c.Rb(2,"img",49),c.Vb(),c.Vb()}}function zt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",50),c.ec("click",(function(t){c.Ac(o);var e=c.ic().row;return c.ic(3).statusToggle(e)})),c.Wb(1,"i",51),c.Rb(2,"img",52),c.Vb(),c.Vb()}}function Lt(t,e){if(1&t&&(c.Hc(0,Bt,3,0,"span",45),c.Hc(1,zt,3,0,"span",46)),2&t){var o=e.value;c.pc("ngIf",1==o),c.Cb(1),c.pc("ngIf",1!=o)}}function Dt(t,e){1&t&&(c.Jc(0),c.jc(1,"date")),2&t&&c.Kc(c.lc(1,1,e.value,"dd/MM/yyyy"))}function Tt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"span",53),c.ec("click",(function(t){c.Ac(o);var n=e.row;return c.ic(3).editMark(n)})),c.Wb(1,"i",54),c.Rb(2,"img",55),c.Vb(),c.Vb(),c.Wb(3,"span",56),c.ec("click",(function(t){c.Ac(o);var n=e.row;return c.ic(3).deleteMark(n)})),c.Wb(4,"i",54),c.Rb(5,"img",57),c.Vb(),c.Vb()}}var Ut=function(){return{prop:"created",dir:"desc"}},Et=function(t){return[t]};function qt(t,e){if(1&t){var o=c.Xb();c.Wb(0,"div",26),c.Wb(1,"ngx-datatable",27,28),c.ec("page",(function(t){return c.Ac(o),c.ic(2).pageCallback(t)})),c.Wb(3,"ngx-datatable-column",29),c.Hc(4,xt,1,1,"ng-template",30),c.Vb(),c.Wb(5,"ngx-datatable-column",31),c.Hc(6,wt,5,3,"ng-template",30),c.Vb(),c.Wb(7,"ngx-datatable-column",32),c.Hc(8,yt,1,1,"ng-template",30),c.Vb(),c.Wb(9,"ngx-datatable-column",33),c.Hc(10,At,5,3,"ng-template",30),c.Vb(),c.Wb(11,"ngx-datatable-column",34),c.Hc(12,Jt,2,2,"ng-template",30),c.Vb(),c.Wb(13,"ngx-datatable-column",35),c.Hc(14,Ht,2,2,"ng-template",30),c.Vb(),c.Wb(15,"ngx-datatable-column",36),c.Hc(16,Lt,2,2,"ng-template",30),c.Vb(),c.Wb(17,"ngx-datatable-column",37),c.Hc(18,Dt,2,4,"ng-template",30),c.Vb(),c.Wb(19,"ngx-datatable-column",38),c.Hc(20,Tt,6,0,"ng-template",30),c.Vb(),c.Vb(),c.Vb()}if(2&t){var n=c.ic(2);c.Cb(1),c.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",n.filteredMarkupsList)("count",n.totalCount)("offset",n.offset)("externalPaging",!0)("sorts",c.uc(10,Et,c.tc(9,Ut)))}}function jt(t,e){if(1&t&&(c.Wb(0,"div",24),c.Hc(1,qt,21,12,"div",25),c.Vb()),2&t){var o=c.ic();c.Cb(1),c.pc("ngIf",o.showListMarkup)}}var $t,Xt,Yt,Kt=function(t){return{"head-search-block":t}},Qt=function(t){return{"list-search-block":t}},Zt=(($t=function(){function t(e,o){var n=this;_classCallCheck(this,t),this.MarkupConfigurationService=e,this.toastr=o,this.markupsList=[],this.filteredMarkupsList=[],this.showListMarkup=!0,this.showAddMarkupForm=!1,this.filteredSuppliers=[],this.errMsg="",this.searchObject={markupname:""},this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.markupRow=[],this.groups=[],this.toggleObj={},this.separatorKeysCodes=[E.g,E.c],this.offset=0,this.totalCount=0,this.filterParams={title:null,page:this.offset},this.filterGroup={limit:1500},this.filterPagination=!1,this.onClickAddNewMarkup=function(t){n.flag=t,n.flagEdit=!1,n.showAddMarkupForm=!0,n.showListMarkup=!1,n.makeJqueryFields(),n.fetchAllGroups(n.filterGroup)},this.onClickListMarkup=function(){n.flag=!1,n.flagEdit=!1,n.showListMarkup=!0,n.showAddMarkupForm=!1}}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchAllMarkups(this.filterParams),this.fetchAllSuppliers({}),this.fetchAllGroups(this.filterGroup)}},{key:"fetchAllSuppliers",value:function(t){var e=this;this.MarkupConfigurationService.FetchAllSuppliers(t).subscribe((function(t){t.status&&(e.allSuppliers=t.result,e.filteredSuppliers=e.allSuppliers)}),(function(t){console.log("erer ",t)}))}},{key:"ngOnChanges",value:function(t){Object.keys(t).indexOf("sale_id")}},{key:"searchChange",value:function(){var t=this;this.filterPagination=!0,this.filterParams.title=this.searchObject.markupname,this.MarkupConfigurationService.searchMarkupByName(this.filterParams).subscribe((function(e){e.status?(t.filteredMarkupsList=e.result.data,t.totalCount=e.result.total,t.offset=e.result.page):t.toastr.error("".concat(e.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"editMark",value:function(t){this.makeJqueryFields(),this.markupRow=t,this.flag=!1,this.flagEdit=!0,this.showAddMarkupForm=!0,this.showListMarkup=!1,this.fetchAllGroups(this.filterGroup)}},{key:"fetchAllGroups",value:function(t){var e=this;this.MarkupConfigurationService.GetAllGroups(this.filterGroup).subscribe((function(t){if(t.status){var o=t.result.data.filter((function(t){return 1!=t.status}));e.allGroups=o,e.groups=e.allGroups}}),(function(t){console.log("erer ",t)}))}},{key:"deleteMark",value:function(t){var e=this;b.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(o){o.value&&e.MarkupConfigurationService.deleteMarkup(t.markup_id).subscribe((function(t){t.status?(e.toastr.success("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),e.fetchAllMarkups(e.filterParams)):e.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}))}},{key:"fetchAllMarkups",value:function(t){var e=this;this.MarkupConfigurationService.GetAllMarkups(this.filterParams).subscribe((function(t){t.status?(e.markupsList=t.result.data,e.filteredMarkupsList=t.result.data,e.totalCount=t.result.total,e.offset=t.result.page):e.toastr.error("".concat(t.message),"".concat(t.message),{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"ngAfterViewInit",value:function(){}},{key:"makeJqueryFields",value:function(){$(document).ready((function(){$(".dropdown-supplier").dropdown({placeholder:"Select Supplier"}),$(".dropdown-group").dropdown({placeholder:"Select Group"}),$(".tagsinput").dropdown({placeholder:"Select Origin Airport"})}))}},{key:"eventFromChild",value:function(t){this.showAddMarkupForm=!1,this.showListMarkup=!0,this.fetchAllMarkups(this.filterParams)}},{key:"resetFilter",value:function(){this.searchObject.markupname="",this.fetchAllMarkups(this.filterParams)}},{key:"statusToggle",value:function(t){var e=this;this.toggleObj.id=t.markup_id,this.toggleObj.status=t.is_active,this.toggleObj.table="markup",this.MarkupConfigurationService.onStatusToggle(this.toggleObj).subscribe((function(t){200==t.status?e.fetchAllMarkups(e.filterParams):e.toastr.error("".concat(t.msg),"".concat(t.msg),{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"pageCallback",value:function(t){this.filterParams.page=t.offset,this.filterPagination?this.searchChange():this.fetchAllMarkups(this.filterParams)}}]),t}()).\u0275fac=function(t){return new(t||$t)(c.Qb(l.a),c.Qb(u.b))},$t.\u0275cmp=c.Kb({type:$t,selectors:[["app-mark"]],inputs:{sale_id:"sale_id",allGroups:"allGroups",allSuppliers:"allSuppliers",showListMarkup:"showListMarkup",showAddMarkupForm:"showAddMarkupForm"},features:[c.Ab()],decls:11,vars:11,consts:[[1,"ui","fluid","container"],["name","form","novalidate","",1,"ui","form"],["f","ngForm"],[3,"ngClass"],[1,"fields","search-section",3,"ngClass"],[1,"four","wide","field","bookings_btn-panel"],["class","ui primary button filterMarkUp_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui filterMarkUp_btn goto_list","tabindex","0",3,"click",4,"ngIf"],["class","twelve wide field search-btn-block",4,"ngIf"],["class","list-markup result-block",3,"ngClass",4,"ngIf"],["class","list-markup result-block",4,"ngIf"],["tabindex","0",1,"ui","primary","button","filterMarkUp_btn",3,"click"],[1,"filterMarkUp_list"],["href","javascript:void(0)","tabindex","0",1,"ui","filterMarkUp_btn","goto_list",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"twelve","wide","field","search-btn-block"],["type","text","placeholder","Markup Name","name","markupname",3,"ngModel","ngModelChange"],[1,"bookings_btn-panel"],["tabindex","0",1,"ui","primary","button","addNewGroup_btn",3,"click"],[1,"addNewGroup-text"],["tabindex","0",1,"ui","reset","button","addNewGroup_btn",3,"click"],[1,"list-markup","result-block",3,"ngClass"],[3,"groupId","groupData","supplierData","flag","mark","flagEdit","dataToParent"],[1,"list-markup","result-block"],["class","user-table-list b2c-list-user-table",4,"ngIf"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","count","offset","externalPaging","sorts","page"],["table",""],["name","Group Name","prop","sale"],["ngx-datatable-cell-template",""],["name","Markup Name"],["name","Markup id","prop","markup_id"],["name","Mark up Value","prop","markup_flight"],["name","Preference","prop","priority"],["name","Sale Type","prop","sale"],["name","Status","prop","is_active"],["name","Created","prop","created"],["name","Actions"],[4,"ngIf","ngIfThen","ngIfElse"],["showTitle",""],["noTitle",""],["showPer",""],["noPer",""],[4,"ngIf"],["title","Active",3,"click",4,"ngIf"],["title","Inactive",3,"click",4,"ngIf"],["title","Active",3,"click"],["title","click to deactivate",1,"icon"],["src","./../../../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["title","Inactive",3,"click"],["title","click to activate",1,"icon"],["src","./../../../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","cal"],["title","Edit User",1,"action",3,"click"],[1,"icon"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete",1,"action",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1,2),c.Wb(3,"div",3),c.Wb(4,"div",4),c.Wb(5,"div",5),c.Hc(6,_t,3,0,"button",6),c.Hc(7,kt,4,0,"a",7),c.Vb(),c.Hc(8,vt,9,1,"div",8),c.Vb(),c.Vb(),c.Hc(9,Ct,2,9,"div",9),c.Hc(10,jt,2,1,"div",10),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.pc("ngClass",c.uc(7,Kt,e.showAddMarkupForm)),c.Cb(1),c.pc("ngClass",c.uc(9,Qt,e.showAddMarkupForm)),c.Cb(2),c.pc("ngIf",e.showListMarkup),c.Cb(1),c.pc("ngIf",e.showAddMarkupForm),c.Cb(1),c.pc("ngIf",e.showListMarkup),c.Cb(1),c.pc("ngIf",e.showAddMarkupForm),c.Cb(1),c.pc("ngIf",e.showListMarkup))},directives:[a.B,a.p,a.q,n.n,n.p,a.c,a.o,a.r,ht,i.c,i.b,i.a],pipes:[n.f],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0 20px 0 15px}.markup_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;color:#181b20;font-size:14px}.filterMarkUp_list[_ngcontent-%COMP%]{white-space:nowrap}.addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{font-size:14px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%], .filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{display:inline-block;color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;cursor:pointer;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}.markup-block[_ngcontent-%COMP%]{margin-top:50px}.right[_ngcontent-%COMP%]{text-align:right}.field-inline[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%], span.action[_ngcontent-%COMP%]{display:inline-block}span.action[_ngcontent-%COMP%]{margin:0 5px;font-weight:700;text-decoration:underline;cursor:pointer}mat-chip[_ngcontent-%COMP%]{margin-bottom:12px}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:14px;margin-top:10px}.field-inline_label[_ngcontent-%COMP%]{margin-bottom:15px}.matForm[_ngcontent-%COMP%]{width:100%}.chip-list[_ngcontent-%COMP%]{margin-top:12px}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.search-section[_ngcontent-%COMP%]{padding:0 32px}.search-section.list-search-block[_ngcontent-%COMP%]{margin:0;width:1100px!important;padding-left:0}.search-section.list-search-block[_ngcontent-%COMP%]   .bookings_btn-panel[_ngcontent-%COMP%]{padding-left:0;padding-bottom:20px}.search-section[_ngcontent-%COMP%]   .search-btn-block[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30%;margin-right:12px}.search-btn-block[_ngcontent-%COMP%]{text-align:right}.search-btn-block[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}.search-btn-block[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%]{position:relative;top:0;width:100%!important}.search-btn-block[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%]   .reset.button[_ngcontent-%COMP%]{margin-right:0}.list-code-block[_ngcontent-%COMP%]{margin:24px 24px 48px}.head-search-block[_ngcontent-%COMP%]{padding:0 24px}.ui.primary.addNewGroup_btn[_ngcontent-%COMP%]{top:8px;margin-right:12px}.ui.form[_ngcontent-%COMP%]{margin-bottom:200px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:0;margin-top:24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0}.ui.form[_ngcontent-%COMP%]   .list-search-block[_ngcontent-%COMP%]{margin-top:20px}@media(max-width:1440px){.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}}@media(max-width:1280px){.head-search-block[_ngcontent-%COMP%]{padding:0 20px}}"]}),$t),te=[{path:"",component:(Xt=function(){function t(e,o,n){_classCallCheck(this,t),this.MarkupConfigurationService=e,this.posService=o,this.toastr=n,this.showListForm=!0,this.showAddGroupForm=!1,this.showListMarkup=!0,this.showAddMarkupForm=!1,this.allPos=[],this.allSuppliers=[],this.NewGroupSeasonality=[],this.filteredGroupSeasonality=[],this.saleIdClicked="-1",this.offset=0,this.totalCount=0,this.filterParams={page:this.offset}}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchAllGroups(this.filterParams),this.fetchAllSuppliers({})}},{key:"fetchAllGroups",value:function(t){var e=this;this.MarkupConfigurationService.GetAllGroups(t).subscribe((function(t){t.status?(e.NewGroupSeasonality=t.result.data,e.totalCount=t.result.total,e.offset=t.result.page):e.toastr.error("".concat(t.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"fetchAllPOS",value:function(t){var e=this;this.posService.fetchAllPointofSale(t).subscribe((function(t){t.status?e.allPos=t.result.data:e.toastr.error("".concat(t.msg),"".concat(t.msg),{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"fetchAllSuppliers",value:function(t){var e=this;this.MarkupConfigurationService.GetAllSuppliers(t).subscribe((function(t){t.status?e.allSuppliers=t.result:e.toastr.error("".concat(t.msg),"".concat(t.msg),{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"addMarkupingroup",value:function(t){this.saleIdClicked=t.sale_id,this.showAddMarkupForm=!0,this.showListMarkup=!1,$("#tab-2").click()}},{key:"ngAfterViewInit",value:function(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown()}))}},{key:"pageCallback",value:function(t){this.filterParams.page=t.offset,this.fetchAllGroups(this.filterParams)}}]),t}(),Xt.\u0275fac=function(t){return new(t||Xt)(c.Qb(l.a),c.Qb(p.a),c.Qb(u.b))},Xt.\u0275cmp=c.Kb({type:Xt,selectors:[["app-markup-configuration"]],decls:13,vars:5,consts:[[1,"outer-segment","animated","fadeIn"],[1,"markup_list","title-block"],[1,"markup_title","title"],[1,"ui","top","attached","tabular","menu"],["id","tab-1","data-tab","first",1,"active","item","create_b2b_title"],["id","tab-2","data-tab","second",1,"item","corporate_staff_list"],["data-tab","first",1,"ui","bottom","attached","active","tab","segment","tabContent-block"],["data-tab","second",1,"ui","bottom","attached","tab","segment","tabContent-block"],[3,"allSuppliers","allGroups","sale_id","showListMarkup","showAddMarkupForm"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"h3",2),c.Jc(3,"Mark Up Configurations"),c.Vb(),c.Vb(),c.Wb(4,"div",3),c.Wb(5,"div",4),c.Jc(6,"Group / Seasonality"),c.Vb(),c.Wb(7,"div",5),c.Jc(8,"Markup Rules"),c.Vb(),c.Vb(),c.Wb(9,"div",6),c.Rb(10,"app-sale"),c.Vb(),c.Wb(11,"div",7),c.Rb(12,"app-mark",8),c.Vb(),c.Vb()),2&t&&(c.Cb(12),c.pc("allSuppliers",e.allSuppliers)("allGroups",e.NewGroupSeasonality)("sale_id",e.saleIdClicked)("showListMarkup",e.showListMarkup)("showAddMarkupForm",e.showAddMarkupForm))},directives:[U,Zt],styles:[".outer-segment[_ngcontent-%COMP%]{margin:0}.markup_list[_ngcontent-%COMP%]{padding:0 20px}.markup_title[_ngcontent-%COMP%]{margin:0;font-style:normal;font-weight:700!important;font-size:20px;line-height:23px;color:#181b20}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.filterMarkUp_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filterMarkUp_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.addNewGroup_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#4f4f4f;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.addNewGroup-text[_ngcontent-%COMP%]{font-size:13px;line-height:15px}.addMarkUp[_ngcontent-%COMP%], .addNewGroup-text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-weight:500;text-align:center}.addMarkUp[_ngcontent-%COMP%]{font-size:10px;line-height:11px;position:relative;left:35px;bottom:5px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.date-field[_ngcontent-%COMP%]{text-indent:17px}.addNewGroup_btn[_ngcontent-%COMP%], .save-apply_btn[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.addNewGroup-text[_ngcontent-%COMP%], .save-apply_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.addMarkUp[_ngcontent-%COMP%]{display:inline-block;color:#333!important;padding:3px 10px;bottom:0;position:inherit!important;cursor:pointer;font-weight:700!important;border-radius:3px;box-shadow:0 0 6px 0 grey;border:1px solid grey}@media(max-width:1440px){.markup_list[_ngcontent-%COMP%]{margin-left:24px;padding:0}}@media(max-width:1280px){.markup_list[_ngcontent-%COMP%]{margin-left:20px}}"]}),Xt)}],ee=((Yt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:Yt}),Yt.\u0275inj=c.Nb({factory:function(t){return new(t||Yt)},imports:[[s.j.forChild(te)],s.j]}),Yt),oe=o("iadO"),ne=o("FKr1"),ie=o("qFsG"),re=o("/1cH");o.d(e,"MarkupConfigurationModule",(function(){return se}));var ae,se=((ae=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:ae}),ae.\u0275inj=c.Nb({factory:function(t){return new(t||ae)},imports:[[n.c,ee,r.c,a.v,i.d,a.k,oe.a,j.d,ne.l,ie.c,X.e,Y.b,re.b]]}),ae)}}]);