(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{"/Hw4":function(t,e,i){"use strict";i.r(e);var o=i("ofXK"),n=i("lDzL"),s=i("QUrN"),r=i("AytR"),a=i("fXoL"),c=i("lM/l"),l=i("PSD3"),d=i.n(l),b=i("3Pt+"),p=i("XE7E"),g=i("5eHb"),u=i("8laU"),m=i("7o2P");function h(t,e){1&t&&(a.Wb(0,"div",11),a.Wb(1,"h4",12),a.Jc(2,"Tour Code / Deal Code"),a.Vb(),a.Vb())}function f(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",13),a.ec("click",(function(e){return a.Ac(t),a.ic().onClickAddCode()})),a.Jc(1," Add Tour Code "),a.Vb()}}function C(t,e){if(1&t){const t=a.Xb();a.Wb(0,"a",14),a.ec("click",(function(e){return a.Ac(t),a.ic().onClickListCode()})),a.Wb(1,"span",15),a.Rb(2,"img",16),a.Jc(3," Goto List Tour Codes "),a.Vb(),a.Vb()}}function _(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t," ")}}function O(t,e){1&t&&a.Hc(0,_,2,1,"div",39),2&t&&a.pc("ngForOf",e.row.supplier)}function v(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function x(t,e){1&t&&a.Hc(0,v,2,1,"div",39),2&t&&a.pc("ngForOf",e.row.orgin)}function P(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function M(t,e){1&t&&a.Hc(0,P,2,1,"div",39),2&t&&a.pc("ngForOf",e.row.destination)}function w(t,e){if(1&t&&(a.Ub(0),a.Jc(1),a.Tb()),2&t){const t=e.$implicit,i=e.index,o=a.ic(2).row;a.Cb(1),a.Mc(" ",t.text," ",o.rbd.length-i<o.rbd.length?",":""," ")}}function V(t,e){if(1&t&&(a.Ub(0),a.Hc(1,w,2,2,"ng-container",39),a.Tb()),2&t){const t=a.ic().row;a.Cb(1),a.pc("ngForOf",t.rbd)}}function W(t,e){1&t&&a.Hc(0,V,2,1,"ng-container",40),2&t&&a.pc("ngIf",e.row.rbd)}function A(t,e){1&t&&a.Jc(0),2&t&&a.Lc("",e.value," ")}function k(t,e){1&t&&a.Jc(0),2&t&&a.Lc("",e.value," ")}function y(t,e){1&t&&a.Jc(0),2&t&&a.Lc("",e.value," ")}function J(t,e){1&t&&a.Jc(0),2&t&&a.Lc("",e.value," ")}function D(t,e){1&t&&a.Jc(0),2&t&&a.Lc("",e.value," ")}function S(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",42),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",43),a.Rb(2,"img",44),a.Vb(),a.Vb()}}function T(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",42),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",43),a.Rb(2,"img",45),a.Vb(),a.Vb()}}function R(t,e){if(1&t&&(a.Hc(0,S,3,0,"span",41),a.Hc(1,T,3,0,"span",41)),2&t){const t=e.value;a.pc("ngIf",1==t),a.Cb(1),a.pc("ngIf",0==t)}}function H(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",46),a.ec("click",(function(i){a.Ac(t);const o=e.row;return a.ic(2).editTourCode(o)})),a.Wb(1,"i",43),a.Rb(2,"img",47),a.Vb(),a.Vb()}}function F(t,e){if(1&t){const t=a.Xb();a.Ub(0),a.Wb(1,"span",48),a.Wb(2,"i",49),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).deleteTourCode(i)})),a.Rb(3,"img",50),a.Vb(),a.Vb(),a.Tb()}}function L(t,e){1&t&&(a.Ub(0),a.Wb(1,"span",48),a.Jc(2," --- "),a.Vb(),a.Tb())}function I(t,e){if(1&t&&(a.Hc(0,F,4,0,"ng-container",40),a.Hc(1,L,3,0,"ng-container",40)),2&t){const t=e.row;a.pc("ngIf",0==t.is_deleted),a.Cb(1),a.pc("ngIf",1==t.is_deleted)}}function Y(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",17),a.Wb(1,"ngx-datatable",18,19),a.ec("page",(function(e){return a.Ac(t),a.ic().pageCallback(e)})),a.Rb(3,"ngx-datatable-column",20),a.Rb(4,"ngx-datatable-column",21),a.Rb(5,"ngx-datatable-column",22),a.Rb(6,"ngx-datatable-column",23),a.Rb(7,"ngx-datatable-column",24),a.Wb(8,"ngx-datatable-column",25),a.Hc(9,O,1,1,"ng-template",26),a.Vb(),a.Wb(10,"ngx-datatable-column",27),a.Hc(11,x,1,1,"ng-template",26),a.Vb(),a.Wb(12,"ngx-datatable-column",28),a.Hc(13,M,1,1,"ng-template",26),a.Vb(),a.Rb(14,"ngx-datatable-column",29),a.Wb(15,"ngx-datatable-column",30),a.Hc(16,W,1,1,"ng-template",26),a.Vb(),a.Wb(17,"ngx-datatable-column",31),a.Hc(18,A,1,1,"ng-template",26),a.Vb(),a.Wb(19,"ngx-datatable-column",32),a.Hc(20,k,1,1,"ng-template",26),a.Vb(),a.Wb(21,"ngx-datatable-column",33),a.Hc(22,y,1,1,"ng-template",26),a.Vb(),a.Wb(23,"ngx-datatable-column",34),a.Hc(24,J,1,1,"ng-template",26),a.Vb(),a.Wb(25,"ngx-datatable-column",35),a.Hc(26,D,1,1,"ng-template",26),a.Vb(),a.Wb(27,"ngx-datatable-column",36),a.Hc(28,R,2,2,"ng-template",26),a.Vb(),a.Wb(29,"ngx-datatable-column",37),a.Hc(30,H,3,0,"ng-template",26),a.Vb(),a.Wb(31,"ngx-datatable-column",38),a.Hc(32,I,2,2,"ng-template",26),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=a.ic();a.Cb(1),a.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",t.NewAirlineDeals)("externalPaging",!0)("count",t.totalCount)("offset",t.offset)}}function B(t,e){if(1&t&&(a.Wb(0,"option",99),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.name),a.Cb(1),a.Lc(" ",t.name,"")}}function N(t,e){if(1&t&&(a.Wb(0,"option",99),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.name),a.Cb(1),a.Lc("",t.name," ")}}function q(t,e){if(1&t&&(a.Wb(0,"option",99),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function E(t,e){if(1&t&&(a.Wb(0,"option",99),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function X(t,e){if(1&t&&(a.Wb(0,"option",99),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t),a.Cb(1),a.Lc(" ",t," ")}}function z(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",102),a.ec("click",(function(e){return a.Ac(t),a.ic(3).saveTourCode()})),a.Wb(1,"span",103),a.Jc(2,"Save"),a.Vb(),a.Vb()}}function U(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",102),a.ec("click",(function(e){return a.Ac(t),a.ic(3).updateTourCode()})),a.Wb(1,"span",103),a.Jc(2,"Update"),a.Vb(),a.Vb()}}function j(t,e){if(1&t&&(a.Wb(0,"div",100),a.Hc(1,z,3,0,"button",101),a.Hc(2,U,3,0,"button",101),a.Vb()),2&t){const t=a.ic(2);a.Cb(1),a.pc("ngIf",t.showSaveBtn),a.Cb(1),a.pc("ngIf",!t.showSaveBtn)}}function Q(t,e){if(1&t&&(a.Wb(0,"div",51),a.Wb(1,"form",52,53),a.Wb(3,"div",54),a.Wb(4,"div",55),a.Wb(5,"label"),a.Jc(6,"Supplier"),a.Vb(),a.Wb(7,"select",56),a.Hc(8,B,2,2,"option",57),a.Vb(),a.Vb(),a.Wb(9,"div",55),a.Wb(10,"label"),a.Jc(11,"Airline"),a.Vb(),a.Wb(12,"select",58),a.Hc(13,N,2,2,"option",57),a.Vb(),a.Vb(),a.Wb(14,"div",55),a.Wb(15,"label"),a.Jc(16,"Cabin Class"),a.Vb(),a.Wb(17,"select",59),a.Wb(18,"option",60),a.Jc(19,"Cabin Class"),a.Vb(),a.Wb(20,"option",61),a.Jc(21,"All"),a.Vb(),a.Wb(22,"option",62),a.Jc(23,"Economy/Coach"),a.Vb(),a.Wb(24,"option",63),a.Jc(25,"First Class"),a.Vb(),a.Wb(26,"option",64),a.Jc(27,"Bussiness "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(28,"div",54),a.Wb(29,"div",55),a.Wb(30,"label"),a.Jc(31,"Trip Type"),a.Vb(),a.Wb(32,"select",65),a.Wb(33,"option",60),a.Jc(34,"Trip Type"),a.Vb(),a.Wb(35,"option",61),a.Jc(36,"All"),a.Vb(),a.Wb(37,"option",66),a.Jc(38,"One way"),a.Vb(),a.Wb(39,"option",67),a.Jc(40,"Round Trip"),a.Vb(),a.Wb(41,"option",68),a.Jc(42,"Multi Trip"),a.Vb(),a.Vb(),a.Vb(),a.Wb(43,"div",55),a.Wb(44,"label"),a.Jc(45,"Code Type"),a.Vb(),a.Wb(46,"select",69),a.Wb(47,"option",60),a.Jc(48,"Code Type"),a.Vb(),a.Wb(49,"option",70),a.Jc(50,"Account Code"),a.Vb(),a.Wb(51,"option",71),a.Jc(52,"Nego Fare"),a.Vb(),a.Wb(53,"option",72),a.Jc(54,"Military Fares"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(55,"div",54),a.Wb(56,"div",55),a.Wb(57,"label"),a.Jc(58,"Tourcode Apply Type"),a.Vb(),a.Wb(59,"select",73),a.Wb(60,"option",60),a.Jc(61,"Tour code Apply Type"),a.Vb(),a.Wb(62,"option",74),a.Jc(63,"Search"),a.Vb(),a.Wb(64,"option",75),a.Jc(65,"Ticketing"),a.Vb(),a.Vb(),a.Vb(),a.Wb(66,"div",55),a.Wb(67,"label"),a.Jc(68,"Tourcode Name"),a.Wb(69,"span",76),a.Jc(70,"*"),a.Vb(),a.Vb(),a.Rb(71,"input",77),a.Vb(),a.Wb(72,"div",55),a.Wb(73,"label"),a.Jc(74,"Tourcode"),a.Wb(75,"span",76),a.Jc(76,"*"),a.Vb(),a.Vb(),a.Rb(77,"input",78),a.Vb(),a.Vb(),a.Wb(78,"div",79),a.Wb(79,"div",54),a.Wb(80,"div",55),a.Wb(81,"label"),a.Jc(82," Origin Airport "),a.Wb(83,"i",80),a.Wb(84,"span",81),a.Jc(85," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(86,"select",82),a.Hc(87,q,2,2,"option",57),a.Vb(),a.Vb(),a.Wb(88,"div",55),a.Wb(89,"label"),a.Jc(90," Destination Airport "),a.Wb(91,"i",80),a.Wb(92,"span",81),a.Jc(93," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(94,"select",83),a.Hc(95,E,2,2,"option",57),a.Vb(),a.Vb(),a.Vb(),a.Wb(96,"div",54),a.Wb(97,"div",55),a.Wb(98,"label"),a.Jc(99," RBD "),a.Wb(100,"i",80),a.Wb(101,"span",81),a.Jc(102," Comma-separated list of class of services e.g. N or N , Q , K (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(103,"select",84),a.Hc(104,X,2,2,"option",57),a.Vb(),a.Vb(),a.Vb(),a.Wb(105,"div",54),a.Wb(106,"div",55),a.Wb(107,"label"),a.Jc(108,"Airline Commission"),a.Vb(),a.Rb(109,"input",85),a.Vb(),a.Wb(110,"div",55),a.Wb(111,"label"),a.Jc(112,"Commission Mode"),a.Vb(),a.Wb(113,"select",86),a.Wb(114,"option",87),a.Jc(115,"Commission Mode"),a.Vb(),a.Wb(116,"option",88),a.Jc(117,"Percentage"),a.Vb(),a.Wb(118,"option",89),a.Jc(119,"Amount"),a.Vb(),a.Vb(),a.Vb(),a.Wb(120,"div",55),a.Wb(121,"label"),a.Jc(122,"Shared Commission (in %)"),a.Vb(),a.Rb(123,"input",90),a.Vb(),a.Vb(),a.Wb(124,"div",54),a.Wb(125,"div",91),a.Wb(126,"label"),a.Jc(127,"Sale Start Date"),a.Vb(),a.Wb(128,"div",92),a.Rb(129,"input",93),a.Wb(130,"i",43),a.Rb(131,"img",94),a.Vb(),a.Vb(),a.Vb(),a.Wb(132,"div",91),a.Wb(133,"label"),a.Jc(134,"Sale End Date"),a.Vb(),a.Wb(135,"div",92),a.Rb(136,"input",95),a.Wb(137,"i",43),a.Rb(138,"img",94),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(139,"div",54),a.Wb(140,"div",91),a.Wb(141,"label"),a.Jc(142,"Travel Outbound Start Date"),a.Vb(),a.Wb(143,"div",92),a.Rb(144,"input",96),a.Wb(145,"i",43),a.Rb(146,"img",94),a.Vb(),a.Vb(),a.Vb(),a.Wb(147,"div",91),a.Wb(148,"label"),a.Jc(149,"Travel Outbound End Date"),a.Vb(),a.Wb(150,"div",92),a.Rb(151,"input",97),a.Wb(152,"i",43),a.Rb(153,"img",94),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(154,j,3,2,"div",98),a.Vb(),a.Vb()),2&t){const t=a.ic();a.Cb(1),a.pc("formGroup",t.newAddTourCodeForm),a.Cb(7),a.pc("ngForOf",t.suppliers),a.Cb(5),a.pc("ngForOf",t.airlines),a.Cb(74),a.pc("ngForOf",t.destinations),a.Cb(8),a.pc("ngForOf",t.destinations),a.Cb(9),a.pc("ngForOf",t.rbdArrayList),a.Cb(50),a.pc("ngIf",t.showListCode)}}const G=function(t){return{"list-code-ui":t}},K=function(t){return{"list-code":t}},Z=function(t){return{"list-code-block":t}};let tt=(()=>{class t{constructor(t,e,i,o,n){this.fb=t,this.AirlineDealService=e,this.toastr=i,this.reportService=o,this.commonService=n,this.showAddCode=!0,this.showListCode=!1,this.showSaveBtn=!0,this.limit=15,this.pageIndex=1,this.pageAirline=0,this.NewAirlineDeals=[],this.totalAirlineDeals=0,this.pages=0,this.airlines=[],this.suppliers=[],this.origins=[],this.destinations=[],this.rbdArrayList=[],this.airlineForm={page:this.pageAirline},this.offset=0,this.totalCount=0,this.filterParams={page:this.offset},this.airlinePage=0,this.rbdArr=[],this.destArr=[],this.orgArr=[],this.supplierArr=[],this.toggleObj={},this.newAddTourCodeForm=this.fb.group({tourcode_id:[""],airline:[""],supplier:[""],tourcode:[""],trip_type:[""],code_type:[""],cabin_class:[""],tourcode_name:[""],apply_type:[""],orgin:[""],destination:[""],rbd:[""],airline_commission:[""],shared_commission:[""],tour_commission:[""],sale_start_date:[""],sale_end_date:[""],travel_start_date:[""],travel_end_date:[""],mode:[""]}),this.fetchAllAirportDetails=()=>{this.commonService.getAirportsList().subscribe(t=>{t.status?this.destinations=t.result:this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}ngOnInit(){this.fetchAllAirlineDeals(this.filterParams),this.rbdArrayList=c.j,this.fetchAllAirlines(),this.fetchAllSuppliers(),this.searchAirport()}ngAfterViewInit(){this.loadConfig(),this.loadSaleEndDate(),this.loadSaleStartDate(),this.loadTravelStartDate(),this.loadTravelEndDate()}fetchAllAirlineDeals(t){this.AirlineDealService.GetAllAirlines(this.filterParams).subscribe(t=>{t.status?(this.totalCount=t.result.total,this.offset=t.result.page,t.result.data.map(t=>{t.orgin&&(t.orgin=JSON.parse(t.orgin)),t.destination&&(t.destination=JSON.parse(t.destination)),t.rbd&&(t.rbd=JSON.parse(t.rbd)),t.supplier&&(t.supplier=JSON.parse(t.supplier))}),this.NewAirlineDeals=t.result.data):this.toastr.error(`${t.message}`,`${t.message}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}onClickAddCode(){this.loadConfig(),this.loadSaleEndDate(),this.loadSaleStartDate(),this.loadTravelStartDate(),this.loadTravelEndDate(),this.showAddCode=!1,this.showListCode=!0,this.showSaveBtn=!0,this.newAddTourCodeForm.reset()}onClickListCode(){this.loadConfig(),this.newAddTourCodeForm.reset(),this.showAddCode=!0,this.showListCode=!1}fetchAllSuppliers(){this.commonService.getSupplierList().subscribe(t=>{"error"!=t.type?this.suppliers=t.listData:this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllAirlines(){this.commonService.getAirlines().subscribe(t=>{"data"==t.type?this.airlines=t.airlines:this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}loadSaleStartDate(){var t=this;$((function(){$('input[name="sale_start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddTourCodeForm.get("sale_start_date").setValue(moment(e).format("DD/MM/YYYY"))}))}))}loadSaleEndDate(){var t=this;$((function(){$('input[name="sale_end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddTourCodeForm.get("sale_end_date").setValue(moment(e).format("DD/MM/YYYY"))}))}))}loadTravelStartDate(){var t=this;$((function(){$('input[name="travel_start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddTourCodeForm.get("travel_start_date").setValue(moment(e).format("DD/MM/YYYY"))}))}))}loadTravelEndDate(){var t=this;$((function(){$('input[name="travel_end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddTourCodeForm.get("travel_end_date").setValue(moment(e).format("DD/MM/YYYY"))}))}))}saveTourCode(){this.newAddTourCodeForm.patchValue({mode:"Add",tourcode_id:""}),this.AirlineDealService.addTourCodeSupplier(this.newAddTourCodeForm.value).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineDeals(this.filterParams),this.resetForm()):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}pageCallback(t){this.filterParams.page=t.offset,this.fetchAllAirlineDeals(this.filterParams)}deleteTourCode(t){let e={};e={tourcode_id:t.tourcode_id},d.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&this.AirlineDealService.deleteTourcode(e).subscribe(t=>{t.status?this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):(this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineDeals(this.filterParams))})})}editTourCode(t){let e=JSON.parse(t.rbd_commission).commission,i=JSON.parse(t.rbd_commission).commissionmode,o=JSON.parse(t.rbd_commission).sharedcommission;console.log("valObj:typeof::",typeof t.rbd),t.rbd.forEach(t=>{this.rbdArr.push(t.text)}),t.destination.forEach(t=>{this.destArr.push(t.text)}),t.orgin.forEach(t=>{this.orgArr.push(t.text)}),this.loadConfig(),this.showSaveBtn=!1,this.showAddCode=!1,this.showListCode=!0;const n=new Set(this.orgArr),s=new Set(this.destArr),r=new Set(this.rbdArr);this.newAddTourCodeForm.patchValue({tourcode_id:t.tourcode_id,airline:t.airline,supplier:t.supplier,tourcode:t.tourcode,trip_type:t.trip_type,code_type:t.code_type,cabin_class:t.cabin_class,tourcode_name:t.tourcode_name,apply_type:t.apply_type,orgin:[...n],destination:[...s],rbd:[...r],airline_commission:e,shared_commission:o,tour_commission:i,sale_start_date:t.sale_start_date,sale_end_date:t.sale_end_date,travel_start_date:t.travel_end_date,travel_end_date:t.travel_start_date})}updateTourCode(){this.newAddTourCodeForm.patchValue({mode:"Update"}),this.AirlineDealService.getUpdateTourCode(this.newAddTourCodeForm.value.tourcode_id,this.newAddTourCodeForm.value).subscribe(t=>{t.status?this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineDeals(this.filterParams),this.resetForm()})}resetForm(){this.newAddTourCodeForm.reset(),this.onClickListCode()}loadConfig(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown(),$(".dropdown1").dropdown({placeholder:"RBD"}),$(".dropdown2").dropdown({placeholder:"Choose suppliers"}),$(".dropdown3").dropdown({placeholder:"Choose airlines"}),$(".dropdown4").dropdown({placeholder:"Choose origin airports"}),$(".dropdown5").dropdown({placeholder:"Choose Destination airports"}),this._globals=localStorage.getItem("_globals");let t=JSON.parse(this._globals).token;$(".ui.dropdown4").dropdown({type:"category",minCharacters:2,maxCharacters:3,responseAsync:!0,apiSettings:{url:r.a.serverURL+"/api/get-airports-cache/{query}",beforeXHR:function(e){return e.setRequestHeader("Authorization",t),e},onResponse:function(t){const e={success:!0,results:[]};return $.each(t.result,(function(t,i){e.results.push({name:i.AirportCode,value:i.AirportCode})})),e}}})}))}statusToggle(t){this.toggleObj.id=t.tourcode_id,this.toggleObj.status=t.is_active,this.toggleObj.table="tourcodes",this.AirlineDealService.onStatusToggle(this.toggleObj).subscribe(t=>{200==t.status?this.fetchAllAirlineDeals(this.filterParams):this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}searchAirport(){}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(b.f),a.Qb(p.a),a.Qb(g.b),a.Qb(u.a),a.Qb(m.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-tourcode"]],decls:11,vars:14,consts:[[1,"ui","fluid","container"],[1,"ui","form",3,"ngClass"],[1,"ui","segment"],[1,"two","fields","search-section"],["class","eight wide field",4,"ngIf"],[1,"eight","wide","field","bookings_btn-panel",3,"ngClass"],["class","ui primary button tourCode_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui goto_list tourCode_btn","tabindex","0",3,"click",4,"ngIf"],[1,"result-block",3,"ngClass"],["class","user-table-list b2c-list-user-table",4,"ngIf"],["class","listCodeWrapper",4,"ngIf"],[1,"eight","wide","field"],[1,"ui","header","main_head"],["tabindex","0",1,"ui","primary","button","tourCode_btn",3,"click"],["href","javascript:void(0)","tabindex","0",1,"ui","goto_list","tourCode_btn",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","externalPaging","count","offset","page"],["table",""],["name","Tourcode Name","prop","tourcode_name"],["name","Airline","prop","airline"],["name","Trip Type","prop","trip_type"],["name","Code Type","prop","code_type"],["name","Cabin Type","prop","cabin_class"],["name","Supplier"],["ngx-datatable-cell-template",""],["name","Origin"],["name","Destination"],["name","Tour Code","prop","tourcode"],["name","RBD","prop","rbd"],["name","Sale Start Date","prop","sale_start_date"],["name","Sale End Date","prop","sale_end_date"],["name","Travel Start Date","prop","travel_start_date"],["name","Travel End Date","prop","travel_end_date"],["name","Created","prop","created"],["name","Status","prop","is_active"],["name","Edit"],["name","Delete"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"click",4,"ngIf"],[3,"click"],[1,"icon"],["src","./.././../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["src","./.././../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","call"],["title","Edit user",1,"action",3,"click"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete",1,"action"],[1,"icon",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"],[1,"listCodeWrapper"],[1,"ui","form",3,"formGroup"],["Form","ngForm"],[1,"six","fields"],[1,"five","wide","field"],["formControlName","supplier","name","supplier","required","","multiple","",1,"ui","fluid","search","dropdown2","multiple_search"],["class","item",3,"value",4,"ngFor","ngForOf"],["formControlName","airline","name","airline","required","",1,"ui","fluid","search","dropdown3"],["formControlName","cabin_class","required","",1,"ui","fluid","search","dropdown"],["value","",1,"item"],["value","All",1,"item"],["value","Economy/Coach",1,"item"],["value","First Class",1,"item"],["value","Bussiness",1,"item"],["formControlName","trip_type","required","",1,"ui","fluid","search","dropdown"],["value","One way",1,"item"],["value","Round Trip",1,"item"],["value","Multi Trip",1,"item"],["formControlName","code_type","required","",1,"ui","fluid","search","dropdown"],["value","Account Code",1,"item"],["value","Nego Fare",1,"item"],["value","Military Fares",1,"item"],["formControlName","apply_type","required","",1,"ui","fluid","search","dropdown"],["value","4",1,"item"],["value","3",1,"item"],[1,"mandatory"],["type","text","name","tourcode_name","formControlName","tourcode_name","placeholder","Tour code name","required",""],["type","text","name","tourcode","placeholder","Tour code","formControlName","tourcode","required",""],[1,"ui","segment","detail-segment"],[1,"fa","fa-exclamation-circle","tooltip"],[1,"tooltiptext"],["formControlName","orgin","required","","multiple","",1,"ui","fluid","search","dropdown4","multiple_search"],["formControlName","destination","required","","multiple","",1,"ui","fluid","search","dropdown4","multiple_search"],["name","rbd","multiple","","formControlName","rbd",1,"ui","search","fluid","dropdown1","multiple_search"],["type","number","name","airline_commission","placeholder","Airline Commission","formControlName","airline_commission","required",""],["formControlName","tour_commission",1,"ui","fluid","selection","dropdown"],["value","","selected","","hidden","","disabled",""],["value","by_percentage"],["value","by_amount"],["type","number","name","sharedCommision","formControlName","shared_commission","placeholder","Shared Commission (%)"],[1,"five","wide","field","bookings_pickers"],[1,"ui","left","icon","input"],["type","text","placeholder","sale start date","formControlName","sale_start_date","name","sale_start_date","value","","required",""],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","calender"],["type","text","placeholder","sale end date","formControlName","sale_end_date","name","sale_end_date","value","","required",""],["type","text","placeholder","Travel Start date","formControlName","travel_start_date","name","travel_start_date","value","","required",""],["type","text","placeholder","travel end date","formControlName","travel_end_date","name","travel_end_date","value","","required",""],["class","bookings_btn-panel save-btn-block",4,"ngIf"],[1,"item",3,"value"],[1,"bookings_btn-panel","save-btn-block"],["class","ui primary button tourCode_btn fluid",3,"click",4,"ngIf"],[1,"ui","primary","button","tourCode_btn","fluid",3,"click"],[1,"tourCode_text"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Wb(3,"div",3),a.Hc(4,h,3,0,"div",4),a.Wb(5,"div",5),a.Hc(6,f,2,0,"button",6),a.Hc(7,C,4,0,"a",7),a.Vb(),a.Vb(),a.Wb(8,"div",8),a.Hc(9,Y,33,8,"div",9),a.Hc(10,Q,155,7,"div",10),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(1),a.pc("ngClass",a.uc(8,G,e.showListCode)),a.Cb(3),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngClass",a.uc(10,K,e.showListCode)),a.Cb(1),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngIf",e.showListCode),a.Cb(1),a.pc("ngClass",a.uc(12,Z,e.showListCode)),a.Cb(1),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngIf",e.showListCode))},directives:[o.n,o.p,n.c,n.b,n.a,o.o,b.B,b.p,b.i,b.y,b.o,b.h,b.w,b.x,b.s,b.A,b.c,b.t],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.airline_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;font-size:14px}.goto_list[_ngcontent-%COMP%], .goto_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.b2c-list-user-table[_ngcontent-%COMP%]{overflow-x:auto}.b2c-list-user-table[_ngcontent-%COMP%]   .ui.table[_ngcontent-%COMP%]{width:calc(100% + 540px)}.date-field[_ngcontent-%COMP%]{text-indent:17px}.ui.form[_ngcontent-%COMP%]{padding:24px 0}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:10px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.calender[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{z-index:0}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.ui.segment[_ngcontent-%COMP%]{margin-bottom:60px}.detail-segment[_ngcontent-%COMP%]{margin-bottom:0}.search-section[_ngcontent-%COMP%]{padding:0 30px;text-align:right}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{text-align:left;font-weight:500!important;font-size:13px;line-height:15px;color:#1b1f26}.search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{text-align:left;margin:0 auto 20px;padding-left:0}.listCodeWrapper[_ngcontent-%COMP%]{padding:0}.listCodeWrapper[_ngcontent-%COMP%] > .ui.form[_ngcontent-%COMP%]{padding:20px 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.four.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .five.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:12px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{margin-bottom:0;padding:0}.ui.form.list-code-ui[_ngcontent-%COMP%]{padding:20px 0}.ui.form.list-code-ui[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:24px}.detail-segment[_ngcontent-%COMP%]{padding:0;margin-top:0}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:rgba(0,0,0,.8);color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:100%;left:50%;margin-left:0}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.list-code-block[_ngcontent-%COMP%]{margin:24px}.ui.form[_ngcontent-%COMP%]   .eight.wide.field.list-code[_ngcontent-%COMP%]{margin-left:0}.listCodeWrapper[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]{padding:12px 0 0!important}.save-btn-block[_ngcontent-%COMP%]{margin:0 auto;position:relative;top:32px;right:-8px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;right:-16px;margin-right:0;margin-top:20px}@media(max-width:1440px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:24px}.ui.form[_ngcontent-%COMP%]{padding:24px 0}.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:-4px}.ui.form[_ngcontent-%COMP%]   .eight.wide.field.list-code[_ngcontent-%COMP%]{width:auto;margin:0}.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}}@media(max-width:1280px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:20px}.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}}"]}),t})();function et(t,e){1&t&&(a.Wb(0,"div",11),a.Wb(1,"h4",12),a.Jc(2,"Commission"),a.Vb(),a.Vb())}function it(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",13),a.ec("click",(function(e){return a.Ac(t),a.ic().onAddCommision()})),a.Jc(1," Add Commission "),a.Vb()}}function ot(t,e){if(1&t){const t=a.Xb();a.Wb(0,"a",14),a.ec("click",(function(e){return a.Ac(t),a.ic().onListCommission()})),a.Wb(1,"span",15),a.Rb(2,"img",16),a.Jc(3," Goto List Commission "),a.Vb(),a.Vb()}}function nt(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t," ")}}function st(t,e){1&t&&a.Hc(0,nt,2,1,"div",36),2&t&&a.pc("ngForOf",e.row.supplier)}function rt(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function at(t,e){1&t&&a.Hc(0,rt,2,1,"div",36),2&t&&a.pc("ngForOf",e.row.orgin)}function ct(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function lt(t,e){1&t&&a.Hc(0,ct,2,1,"div",36),2&t&&a.pc("ngForOf",e.row.destination)}function dt(t,e){if(1&t&&(a.Ub(0),a.Jc(1),a.Tb()),2&t){const t=e.$implicit,i=e.index,o=a.ic().row;a.Cb(1),a.Mc(" ",t.text," ",o.rbd.length-i<o.rbd.length?",":""," ")}}function bt(t,e){1&t&&a.Hc(0,dt,2,2,"ng-container",36),2&t&&a.pc("ngForOf",e.row.rbd)}function pt(t,e){1&t&&(a.Jc(0),a.jc(1,"date")),2&t&&a.Lc("",a.lc(1,1,e.value,"dd/MM/yyyy")," ")}function gt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",38),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",39),a.Rb(2,"img",40),a.Vb(),a.Vb()}}function ut(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",38),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",39),a.Rb(2,"img",41),a.Vb(),a.Vb()}}function mt(t,e){if(1&t&&(a.Hc(0,gt,3,0,"span",37),a.Hc(1,ut,3,0,"span",37)),2&t){const t=e.value;a.pc("ngIf",1==t),a.Cb(1),a.pc("ngIf",0==t)}}function ht(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",42),a.ec("click",(function(i){a.Ac(t);const o=e.row;return a.ic(2).editCommission(o)})),a.Wb(1,"i",39),a.Rb(2,"img",43),a.Vb(),a.Vb()}}function ft(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",44),a.ec("click",(function(i){a.Ac(t);const o=e.row;return a.ic(2).deleteCommission(o)})),a.Wb(1,"i",39),a.Rb(2,"img",45),a.Vb(),a.Vb()}}function Ct(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",17),a.Wb(1,"ngx-datatable",18,19),a.ec("page",(function(e){return a.Ac(t),a.ic().pageCallback(e)})),a.Rb(3,"ngx-datatable-column",20),a.Rb(4,"ngx-datatable-column",21),a.Rb(5,"ngx-datatable-column",22),a.Wb(6,"ngx-datatable-column",23),a.Hc(7,st,1,1,"ng-template",24),a.Vb(),a.Wb(8,"ngx-datatable-column",25),a.Hc(9,at,1,1,"ng-template",24),a.Vb(),a.Wb(10,"ngx-datatable-column",26),a.Hc(11,lt,1,1,"ng-template",24),a.Vb(),a.Wb(12,"ngx-datatable-column",27),a.Hc(13,bt,1,1,"ng-template",24),a.Vb(),a.Rb(14,"ngx-datatable-column",28),a.Rb(15,"ngx-datatable-column",29),a.Rb(16,"ngx-datatable-column",30),a.Rb(17,"ngx-datatable-column",31),a.Wb(18,"ngx-datatable-column",32),a.Hc(19,pt,2,4,"ng-template",24),a.Vb(),a.Wb(20,"ngx-datatable-column",33),a.Hc(21,mt,2,2,"ng-template",24),a.Vb(),a.Wb(22,"ngx-datatable-column",34),a.Hc(23,ht,3,0,"ng-template",24),a.Vb(),a.Wb(24,"ngx-datatable-column",35),a.Hc(25,ft,3,0,"ng-template",24),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=a.ic();a.Cb(1),a.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",t.NewAirlineCommission)("externalPaging",!0)("count",t.totalCount)("offset",t.offset)}}function _t(t,e){if(1&t&&(a.Wb(0,"option",86),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.name),a.Cb(1),a.Lc("",t.name," ")}}function Ot(t,e){if(1&t&&(a.Wb(0,"option",86),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.name),a.Cb(1),a.Lc(" ",t.name,"")}}function vt(t,e){if(1&t&&(a.Wb(0,"option",86),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function xt(t,e){if(1&t&&(a.Wb(0,"option",86),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function Pt(t,e){if(1&t&&(a.Wb(0,"option",86),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t),a.Cb(1),a.Lc(" ",t," ")}}function Mt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",89),a.ec("click",(function(e){return a.Ac(t),a.ic(3).addCommission()})),a.Wb(1,"span",90),a.Jc(2,"Save"),a.Vb(),a.Vb()}}function wt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",89),a.ec("click",(function(e){return a.Ac(t),a.ic(3).updateCommission()})),a.Wb(1,"span",90),a.Jc(2,"Update"),a.Vb(),a.Vb()}}function Vt(t,e){if(1&t&&(a.Wb(0,"div",87),a.Hc(1,Mt,3,0,"button",88),a.Hc(2,wt,3,0,"button",88),a.Vb()),2&t){const t=a.ic(2);a.Cb(1),a.pc("ngIf",t.showSaveBtn),a.Cb(1),a.pc("ngIf",!t.showSaveBtn)}}const Wt=function(t){return{error:t}};function At(t,e){if(1&t&&(a.Wb(0,"div",46),a.Wb(1,"form",47,48),a.Wb(3,"div",49),a.Wb(4,"div",50),a.Wb(5,"label"),a.Jc(6,"Airline"),a.Vb(),a.Wb(7,"select",51),a.Hc(8,_t,2,2,"option",52),a.Vb(),a.Vb(),a.Wb(9,"div",53),a.Wb(10,"label"),a.Jc(11,"Select Supplier"),a.Vb(),a.Wb(12,"select",54),a.Hc(13,Ot,2,2,"option",52),a.Vb(),a.Vb(),a.Wb(14,"div",53),a.Wb(15,"label"),a.Jc(16,"Cabin Class"),a.Vb(),a.Wb(17,"select",55),a.Wb(18,"option",56),a.Jc(19,"Cabin Class"),a.Vb(),a.Wb(20,"option",57),a.Jc(21,"All"),a.Vb(),a.Wb(22,"option",58),a.Jc(23,"Economy/Coach"),a.Vb(),a.Wb(24,"option",59),a.Jc(25,"First Class"),a.Vb(),a.Wb(26,"option",60),a.Jc(27,"Bussiness "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(28,"div",49),a.Wb(29,"div",53),a.Wb(30,"label"),a.Jc(31,"Trip Type"),a.Vb(),a.Wb(32,"select",61),a.Wb(33,"option",56),a.Jc(34,"Trip Type"),a.Vb(),a.Wb(35,"option",57),a.Jc(36,"All"),a.Vb(),a.Wb(37,"option",62),a.Jc(38,"One way"),a.Vb(),a.Wb(39,"option",63),a.Jc(40,"Round Trip"),a.Vb(),a.Wb(41,"option",64),a.Jc(42,"Multi Trip"),a.Vb(),a.Vb(),a.Vb(),a.Wb(43,"div",53),a.Wb(44,"label"),a.Jc(45,"Airline Commission"),a.Wb(46,"span",65),a.Jc(47,"*"),a.Vb(),a.Vb(),a.Rb(48,"input",66),a.Vb(),a.Wb(49,"div",53),a.Wb(50,"label"),a.Jc(51,"Commission Mode"),a.Vb(),a.Wb(52,"select",67),a.Wb(53,"option",68),a.Jc(54,"Commission Mode"),a.Vb(),a.Wb(55,"option",69),a.Jc(56,"Percentage"),a.Vb(),a.Wb(57,"option",70),a.Jc(58,"Amount"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(59,"div",71),a.Wb(60,"div",49),a.Wb(61,"div",53),a.Wb(62,"label"),a.Jc(63," Origin Airport "),a.Wb(64,"i",72),a.Wb(65,"span",73),a.Jc(66," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(67,"select",74),a.Wb(68,"option",75),a.Jc(69,"Origin Airport "),a.Vb(),a.Hc(70,vt,2,2,"option",52),a.Vb(),a.Vb(),a.Wb(71,"div",53),a.Wb(72,"label"),a.Jc(73," Destination Airport "),a.Wb(74,"i",72),a.Wb(75,"span",73),a.Jc(76," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(77,"select",76),a.Wb(78,"option",75),a.Jc(79,"Destination Airport "),a.Vb(),a.Hc(80,xt,2,2,"option",52),a.Vb(),a.Vb(),a.Wb(81,"div",53),a.Wb(82,"label"),a.Jc(83," RBD "),a.Wb(84,"i",72),a.Wb(85,"span",73),a.Jc(86," Comma-separated list of class of services e.g. N or N , Q , K (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(87,"select",77),a.Hc(88,Pt,2,2,"option",52),a.Vb(),a.Vb(),a.Vb(),a.Wb(89,"div",49),a.Wb(90,"div",78),a.Wb(91,"label"),a.Jc(92,"Sale Start Date"),a.Vb(),a.Wb(93,"div",79),a.Rb(94,"input",80),a.Wb(95,"i",39),a.Rb(96,"img",81),a.Vb(),a.Vb(),a.Vb(),a.Wb(97,"div",78),a.Wb(98,"label"),a.Jc(99,"Sale End Date"),a.Vb(),a.Wb(100,"div",79),a.Rb(101,"input",82),a.Wb(102,"i",39),a.Rb(103,"img",81),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(104,"div",49),a.Wb(105,"div",78),a.Wb(106,"label"),a.Jc(107,"Travel Start Date"),a.Vb(),a.Wb(108,"div",79),a.Rb(109,"input",83),a.Wb(110,"i",39),a.Rb(111,"img",81),a.Vb(),a.Vb(),a.Vb(),a.Wb(112,"div",78),a.Wb(113,"label"),a.Jc(114,"Travel End Date"),a.Vb(),a.Wb(115,"div",79),a.Rb(116,"input",84),a.Wb(117,"i",39),a.Rb(118,"img",81),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(119,Vt,3,2,"div",85),a.Vb(),a.Vb()),2&t){const t=a.ic();a.Cb(1),a.pc("formGroup",t.newAddCommissionForm),a.Cb(3),a.pc("ngClass",a.uc(8,Wt,t.submitted&&t.fc.airline.errors&&t.fc.airline.errors.required)),a.Cb(4),a.pc("ngForOf",t.airlines),a.Cb(5),a.pc("ngForOf",t.suppliers),a.Cb(57),a.pc("ngForOf",t.origins),a.Cb(10),a.pc("ngForOf",t.origins),a.Cb(8),a.pc("ngForOf",t.rbdArrayList),a.Cb(31),a.pc("ngIf",t.showListCommision)}}const kt=function(t){return{"list-code-ui":t}},yt=function(t){return{"list-code":t}},Jt=function(t){return{"list-code-block":t}};let Dt=(()=>{class t{constructor(t,e,i,o,n){this.fb=t,this.AirlineDealService=e,this.toastr=i,this.reportService=o,this.commonService=n,this.submitted=!1,this.showAddCommision=!0,this.showListCommision=!1,this.NewAirlineCommission=[],this.totalAirlineCommissions=0,this.pageCommission=0,this.airlines=[],this.suppliers=[],this.origins=[],this.destinations=[],this.rbdArrayList=[],this.limit=15,this.pageIndex=1,this.pages=0,this.showSaveBtn=!0,this.commissionForm={page:this.pageCommission},this.offset=0,this.totalCount=0,this.filterParams={page:this.offset},this.commissionPage=0,this.rbdArr=[],this.destArr=[],this.orgArr=[],this.supplierArr=[],this.toggleObj={},this.newAddCommissionForm=this.fb.group({commission_id:[""],supplier:[""],airline:[""],trip_type:[""],cabin_class:[""],commission:[""],commissionmode:[""],orgin:[""],destination:[""],sale_start_date:[""],sale_end_date:[""],travel_start_date:[""],travel_end_date:[""],rbd:[""],mode:[""]}),this.fetchAllAirportDetails=()=>{this.commonService.getAirportsList().subscribe(t=>{t.status?(this.origins=t.result,this.destinations=t.result):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})},this.addCommission=()=>{this.newAddCommissionForm.patchValue({mode:"Add",commission_id:""}),this.AirlineDealService.addCommission(this.newAddCommissionForm.value).subscribe(t=>{t.status?(this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineCommissions(this.filterParams),this.resetForm()):this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}onAddCommision(){this.loadConfig(),this.loadSaleEndDate(),this.loadSaleStartDate(),this.loadTravelStartDate(),this.loadTravelEndDate(),this.showAddCommision=!1,this.showListCommision=!0}fetchAllSuppliers(){this.reportService.GetAllSuppliers().subscribe(t=>{t.status?this.suppliers=t.result.filter(t=>""!==t.name):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllAirlines(){this.commonService.getAirlines().subscribe(t=>{"data"==t.type?this.airlines=t.airlines:this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllAirlineCommissions(t){this.AirlineDealService.GetAllAirCommissions(this.filterParams).subscribe(t=>{t.status?(this.totalCount=t.result.total,this.offset=t.result.page,t.result.data.map(t=>{t.orgin&&(t.orgin=JSON.parse(t.orgin)),t.destination&&(t.destination=JSON.parse(t.destination)),t.rbd&&(t.rbd=JSON.parse(t.rbd)),t.supplier&&(t.supplier=JSON.parse(t.supplier))}),this.NewAirlineCommission=t.result.data):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}onListCommission(){this.loadConfig(),this.showAddCommision=!0,this.showListCommision=!1}get fc(){return this.newAddCommissionForm.controls}editCommission(t){let e=JSON.parse(t.rbd_commission).commission,i=JSON.parse(t.rbd_commission).commissionmode;t.rbd.forEach(t=>{this.rbdArr.push(t.text)}),t.destination.forEach(t=>{this.destArr.push(t.text)}),t.orgin.forEach(t=>{this.orgArr.push(t.text)}),this.loadConfig(),this.showAddCommision=!1,this.showSaveBtn=!1,this.showListCommision=!0,this.newAddCommissionForm.patchValue({commission_id:t.commission_id,airline:t.airline,supplier:t.supplier,tourcode:t.tourcode,trip_type:t.trip_type,code_type:t.code_type,cabin_class:t.cabin_class,tourcode_name:t.tourcode_name,apply_type:t.apply_type,commission:e,commissionmode:i,orgin:this.orgArr,destination:this.destArr,rbd:this.rbdArr,sale_start_date:t.sale_start_date,sale_end_date:t.sale_end_date,travel_start_date:t.travel_end_date,travel_end_date:t.travel_start_date})}updateCommission(){this.newAddCommissionForm.patchValue({mode:"Update"}),this.AirlineDealService.getUpdateCommission(this.newAddCommissionForm.value.commission_id,this.newAddCommissionForm.value).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineCommissions(this.filterParams),this.resetForm()):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}deleteCommission(t){d.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&this.AirlineDealService.deleteCommission(t.commission_id).subscribe(t=>{console.log("result:::",t),"error"==t.type?this.toastr.error(`${t.msg}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):(this.toastr.success(`${t.msg}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineCommissions(this.filterParams))})})}ngOnInit(){this.fetchAllAirlineCommissions(this.filterParams),this.fetchAllSuppliers(),this.fetchAllAirportDetails(),this.rbdArrayList=c.j,this.fetchAllAirlines(),this.loadConfig()}ngAfterViewInit(){this.loadConfig(),this.loadSaleEndDate(),this.loadSaleStartDate(),this.loadTravelStartDate(),this.loadTravelEndDate()}loadConfig(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown(),$(".dropdown1").dropdown({placeholder:"RBD"}),$(".dropdown2").dropdown({placeholder:"Choose suppliers"}),$(".dropdown3").dropdown({placeholder:"Choose airlines"}),$(".dropdown4").dropdown({placeholder:"Choose origin airports"}),$(".dropdown5").dropdown({placeholder:"Choose Destination airports"})})),$(document).ready((function(){this._globals=localStorage.getItem("_globals");let t=JSON.parse(this._globals).token;$(".ui.dropdown4").dropdown({type:"category",minCharacters:2,maxCharacters:3,responseAsync:!0,apiSettings:{url:r.a.serverURL+"/api/get-airports-cache/{query}",beforeXHR:function(e){return e.setRequestHeader("Authorization",t),e},onResponse:function(t){const e={success:!0,results:[]};return $.each(t.result,(function(t,i){e.results.push({name:i.AirportCode,value:i.AirportCode})})),e}}})}))}loadSaleStartDate(){var t=this;$((function(){$('input[name="sale_start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddCommissionForm.get("sale_start_date").setValue(moment(e).format("DD-MM-YYYY"))}))}))}loadSaleEndDate(){var t=this;$((function(){$('input[name="sale_end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),minDate:moment(),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddCommissionForm.get("sale_end_date").setValue(moment(e).format("DD-MM-YYYY"))}))}))}loadTravelStartDate(){var t=this;$((function(){$('input[name="travel_start_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1980,startDate:moment().subtract(90,"day"),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddCommissionForm.get("travel_start_date").setValue(moment(e).format("DD-MM-YYYY"))}))}))}loadTravelEndDate(){var t=this;$((function(){$('input[name="travel_end_date"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),minDate:moment(),autoUpdateInput:!1,maxYear:parseInt(moment().format("YYYY"),10)},(function(e,i,o){moment().diff(e,"years"),t.newAddCommissionForm.get("travel_end_date").setValue(moment(e).format("DD-MM-YYYY"))}))}))}resetForm(){this.newAddCommissionForm.reset(),this.onListCommission()}pageCallback(t){this.commissionForm.page=t.offset,this.fetchAllAirlineCommissions(this.filterParams)}statusToggle(t){this.toggleObj.id=t.commission_id,this.toggleObj.status=t.is_active,this.toggleObj.table="commissions",this.AirlineDealService.onStatusToggle(this.toggleObj).subscribe(t=>{200==t.status?this.fetchAllAirlineCommissions(this.filterParams):this.toastr.error(`${t.msg}`,`${t.msg}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(b.f),a.Qb(p.a),a.Qb(g.b),a.Qb(u.a),a.Qb(m.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-commission"]],decls:11,vars:14,consts:[[1,"ui","fluid","container"],[1,"ui","form",3,"ngClass"],[1,"ui","segment"],[1,"two","fields","search-section"],["class","eight wide field",4,"ngIf"],[1,"eight","wide","field","bookings_btn-panel",3,"ngClass"],["class","ui primary button addTogg_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui goto_list addTogg_btn","tabindex","0",3,"click",4,"ngIf"],[1,"result-block",3,"ngClass"],["class","user-table-list b2c-list-user-table",4,"ngIf"],["class","listCodeWrapper",4,"ngIf"],[1,"eight","wide","field"],[1,"ui","header","main_head"],["tabindex","0",1,"ui","primary","button","addTogg_btn",3,"click"],["href","javascript:void(0)","tabindex","0",1,"ui","goto_list","addTogg_btn",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","externalPaging","count","offset","page"],["table",""],["name","Airline","prop","airline"],["name","Trip Type","prop","trip_type"],["name","Cabin Class","prop","cabin_class"],["name","Suppier"],["ngx-datatable-cell-template",""],["name","Origin"],["name","Destination"],["name","RBD","prop","rbd"],["name","Sale Start Date","prop","sale_start_date"],["name","Sale End Date","prop","sale_end_date"],["name","Travel Start Date","prop","travel_start_date"],["name","Travel End Date","prop","travel_end_date"],["name","Created","prop","created"],["name","Status","prop","is_active"],["name","Edit"],["name","Delete"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"icon"],["src","./../../../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["src","./.././../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","call"],[1,"action",3,"click"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],["title","Delete User",1,"action",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"],[1,"listCodeWrapper"],[1,"ui","form",3,"formGroup"],["Form","ngForm"],[1,"six","fields"],[1,"five","wide","field",3,"ngClass"],["formControlName","airline","required","","name","airline",1,"ui","fluid","search","dropdown3"],["class","item",3,"value",4,"ngFor","ngForOf"],[1,"five","wide","field"],["formControlName","supplier","name","supplier","multiple","",1,"ui","fluid","search","dropdown2","multiple_search"],["formControlName","cabin_class","name","cabin_class","required","",1,"ui","fluid","search","dropdown"],["value","",1,"item"],["value","All",1,"item"],["value","Economy/Coach",1,"item"],["value","First Class",1,"item"],["value","Bussiness",1,"item"],["formControlName","trip_type","name","trip_type","required","",1,"ui","fluid","search","dropdown"],["value","One way",1,"item"],["value","Round Trip",1,"item"],["value","Multi Trip",1,"item"],[1,"mandatory"],["type","number","name","commission","placeholder","Airline Commission","formControlName","commission","value","","required",""],["formControlName","commissionmode",1,"ui","fluid","selection","dropdown"],["value","","selected","","hidden","","disabled",""],["value","by_percentage"],["value","by_amount"],[1,"ui","segment","detail-segment"],[1,"fa","fa-exclamation-circle","tooltip"],[1,"tooltiptext"],["formControlName","orgin","name","orgin","required","","multiple","",1,"ui","fluid","search","dropdown4","multiple_search"],["value",""],["formControlName","destination","name","destination","required","","multiple","",1,"ui","fluid","search","dropdown4","multiple_search"],["name","rbd","multiple","","formControlName","rbd",1,"ui","search","fluid","dropdown1","multiple_search"],[1,"five","wide","field","bookings_pickers"],[1,"ui","left","icon","input"],["type","text","placeholder","sale start date","formControlName","sale_start_date","name","sale_start_date","value","","required",""],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","calender"],["type","text","placeholder","sale start date","formControlName","sale_end_date","name","sale_end_date","value","","required",""],["type","text","placeholder","travel start date","formControlName","travel_start_date","name","travel_start_date","value","","required",""],["type","text","placeholder","travel end date","formControlName","travel_end_date","name","travel_end_date","value","","required",""],["class","bookings_btn-panel save-btn-block",4,"ngIf"],[1,"item",3,"value"],[1,"bookings_btn-panel","save-btn-block"],["class","ui primary button commissionCode_btn fluid",3,"click",4,"ngIf"],[1,"ui","primary","button","commissionCode_btn","fluid",3,"click"],[1,"tourCode_text"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Wb(3,"div",3),a.Hc(4,et,3,0,"div",4),a.Wb(5,"div",5),a.Hc(6,it,2,0,"button",6),a.Hc(7,ot,4,0,"a",7),a.Vb(),a.Vb(),a.Wb(8,"div",8),a.Hc(9,Ct,26,8,"div",9),a.Hc(10,At,120,10,"div",10),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(1),a.pc("ngClass",a.uc(8,kt,e.showListCommision)),a.Cb(3),a.pc("ngIf",e.showAddCommision),a.Cb(1),a.pc("ngClass",a.uc(10,yt,e.showListCommision)),a.Cb(1),a.pc("ngIf",e.showAddCommision),a.Cb(1),a.pc("ngIf",e.showListCommision),a.Cb(1),a.pc("ngClass",a.uc(12,Jt,e.showAddCommision)),a.Cb(1),a.pc("ngIf",e.showAddCommision),a.Cb(1),a.pc("ngIf",e.showListCommision))},directives:[o.n,o.p,n.c,n.b,n.a,o.o,b.B,b.p,b.i,b.x,b.o,b.h,b.w,b.y,b.s,b.A,b.t,b.c],pipes:[o.f],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.airline_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_btn[_ngcontent-%COMP%], .tourCode_btn[_ngcontent-%COMP%]{border-radius:3px;width:auto!important;background-color:#3867b1;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;font-size:14px}.goto_list[_ngcontent-%COMP%], .goto_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.b2c-list-user-table[_ngcontent-%COMP%]{overflow-x:auto}.b2c-list-user-table[_ngcontent-%COMP%]   .ui.table[_ngcontent-%COMP%]{width:calc(100% + 540px)}.date-field[_ngcontent-%COMP%]{text-indent:17px}.ui.form[_ngcontent-%COMP%]{padding:24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{padding:0;margin-bottom:24px}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:10px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.calender[_ngcontent-%COMP%]{width:18px!important;margin-top:10px!important}button.ui.button.commissionCode_btn.fluid[_ngcontent-%COMP%]{background:#3867b1}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{z-index:0}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1;z-index:0}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.search-section[_ngcontent-%COMP%]{padding-bottom:30px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.four.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .five.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:12px}.detail-segment[_ngcontent-%COMP%]{padding:0;margin-top:0}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:rgba(0,0,0,.8);color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:100%;left:50%;margin-left:0}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.listCodeWrapper[_ngcontent-%COMP%]{padding:0}.listCodeWrapper[_ngcontent-%COMP%] > .ui.form[_ngcontent-%COMP%]{padding:20px 8px}.ui.segment[_ngcontent-%COMP%]{margin-bottom:60px}.search-section[_ngcontent-%COMP%]{padding:0 0 8px 6px;text-align:right}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{text-align:left;font-weight:500!important;font-size:13px;line-height:15px;color:#1b1f26}.search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{text-align:left;margin:0 auto 20px;padding-left:0}.search-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.list-code-block[_ngcontent-%COMP%]{width:100%;margin:0}.ui.form[_ngcontent-%COMP%]   .eight.wide.field.list-code[_ngcontent-%COMP%]{margin-left:24px}.listCodeWrapper[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]{padding:12px 0 0!important}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px;position:relative}.ui.form.list-code-ui[_ngcontent-%COMP%]{padding:20px 0}.ui.form.list-code-ui[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:24px}@media(max-width:1440px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:24px}.result-block[_ngcontent-%COMP%]{width:auto;margin:24px}.ui.form[_ngcontent-%COMP%]{padding:30px 0}.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin:0 20px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .eight.wide.field.list-code[_ngcontent-%COMP%]{width:auto;margin:0}.save-btn-block[_ngcontent-%COMP%]{right:16px;top:36px}.list-code-block[_ngcontent-%COMP%]{width:auto;margin:24px}}@media(max-width:1280px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:20px}.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.save-btn-block[_ngcontent-%COMP%]{right:38px;top:30px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:120px}}"]}),t})();var St=i("FtGj"),Tt=i("kmnG"),Rt=i("A5z7"),Ht=i("NFeN");function Ft(t,e){1&t&&(a.Wb(0,"div",11),a.Wb(1,"h4",12),a.Jc(2,"Airline Routes"),a.Vb(),a.Vb())}function $t(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",13),a.ec("click",(function(e){return a.Ac(t),a.ic().onClickAddCode()})),a.Jc(1," Add Airline Routes "),a.Vb()}}function Lt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"a",14),a.ec("click",(function(e){return a.Ac(t),a.ic().onClickListCode()})),a.Wb(1,"span",15),a.Rb(2,"img",16),a.Jc(3," Goto List Airline Routes "),a.Vb(),a.Vb()}}function It(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function Yt(t,e){1&t&&a.Hc(0,It,2,1,"div",29),2&t&&a.pc("ngForOf",e.row.origin)}function Bt(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.text," ")}}function Nt(t,e){1&t&&a.Hc(0,Bt,2,1,"div",29),2&t&&a.pc("ngForOf",e.row.destination)}function qt(t,e){if(1&t&&(a.Wb(0,"div"),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.Lc(" ",t.name," ")}}function Et(t,e){1&t&&a.Hc(0,qt,2,1,"div",29),2&t&&a.pc("ngForOf",e.row.routes)}function Xt(t,e){1&t&&(a.Jc(0),a.jc(1,"date")),2&t&&a.Lc("",a.lc(1,1,e.value,"dd/MM/yyyy")," ")}function zt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",31),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",32),a.Rb(2,"img",33),a.Vb(),a.Vb()}}function Ut(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",31),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).statusToggle(i)})),a.Wb(1,"i",32),a.Rb(2,"img",34),a.Vb(),a.Vb()}}function jt(t,e){if(1&t&&(a.Hc(0,zt,3,0,"span",30),a.Hc(1,Ut,3,0,"span",30)),2&t){const t=e.value;a.pc("ngIf",1==t),a.Cb(1),a.pc("ngIf",0==t)}}function Qt(t,e){if(1&t){const t=a.Xb();a.Wb(0,"span",35),a.ec("click",(function(i){a.Ac(t);const o=e.row;return a.ic(2).editAirlineRoutes(o)})),a.Wb(1,"i",32),a.Rb(2,"img",36),a.Vb(),a.Vb()}}function Gt(t,e){if(1&t){const t=a.Xb();a.Ub(0),a.Wb(1,"span",38),a.Wb(2,"i",39),a.ec("click",(function(e){a.Ac(t);const i=a.ic().row;return a.ic(2).deleteAirlineRoutes(i)})),a.Rb(3,"img",40),a.Vb(),a.Vb(),a.Tb()}}function Kt(t,e){1&t&&(a.Ub(0),a.Wb(1,"span",38),a.Jc(2," --- "),a.Vb(),a.Tb())}function Zt(t,e){if(1&t&&(a.Hc(0,Gt,4,0,"ng-container",37),a.Hc(1,Kt,3,0,"ng-container",37)),2&t){const t=e.row;a.pc("ngIf",0==t.is_deleted),a.Cb(1),a.pc("ngIf",1==t.is_deleted)}}function te(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",17),a.Wb(1,"ngx-datatable",18,19),a.ec("page",(function(e){return a.Ac(t),a.ic().pageCallback(e)})),a.Rb(3,"ngx-datatable-column",20),a.Wb(4,"ngx-datatable-column",21),a.Hc(5,Yt,1,1,"ng-template",22),a.Vb(),a.Wb(6,"ngx-datatable-column",23),a.Hc(7,Nt,1,1,"ng-template",22),a.Vb(),a.Wb(8,"ngx-datatable-column",24),a.Hc(9,Et,1,1,"ng-template",22),a.Vb(),a.Wb(10,"ngx-datatable-column",25),a.Hc(11,Xt,2,4,"ng-template",22),a.Vb(),a.Wb(12,"ngx-datatable-column",26),a.Hc(13,jt,2,2,"ng-template",22),a.Vb(),a.Wb(14,"ngx-datatable-column",27),a.Hc(15,Qt,3,0,"ng-template",22),a.Vb(),a.Wb(16,"ngx-datatable-column",28),a.Hc(17,Zt,2,2,"ng-template",22),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=a.ic();a.Cb(1),a.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("rows",t.allAirlineRoutes)("externalPaging",!0)("count",t.totalCount)("offset",t.offset)}}function ee(t,e){if(1&t&&(a.Wb(0,"option",68),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.organisation_id),a.Cb(1),a.Lc(" ",t.name,"")}}function ie(t,e){if(1&t&&(a.Wb(0,"option",68),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.name),a.Cb(1),a.Lc(" ",t.name,"")}}function oe(t,e){if(1&t&&(a.Wb(0,"option",68),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function ne(t,e){if(1&t&&(a.Wb(0,"option",68),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t.AirportCode),a.Cb(1),a.Lc(" ",t.AirportCode," ")}}function se(t,e){1&t&&(a.Wb(0,"mat-icon",71),a.Jc(1,"x"),a.Vb())}function re(t,e){if(1&t){const t=a.Xb();a.Wb(0,"mat-chip",69),a.ec("removed",(function(i){a.Ac(t);const o=e.$implicit;return a.ic(2).remove(o,1)})),a.Jc(1),a.jc(2,"uppercase"),a.Hc(3,se,2,0,"mat-icon",70),a.Vb()}if(2&t){const t=e.$implicit,i=a.ic(2);a.pc("selectable",i.selectable)("removable",i.removable),a.Cb(1),a.Lc(" ",a.kc(2,4,t.name)," "),a.Cb(2),a.pc("ngIf",i.removable)}}function ae(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",74),a.ec("click",(function(e){return a.Ac(t),a.ic(3).saveAirlineRoutes()})),a.Wb(1,"span",75),a.Jc(2,"Save"),a.Vb(),a.Vb()}}function ce(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",74),a.ec("click",(function(e){return a.Ac(t),a.ic(3).updateAirlineRoutes()})),a.Wb(1,"span",75),a.Jc(2,"Update"),a.Vb(),a.Vb()}}function le(t,e){if(1&t&&(a.Wb(0,"div",72),a.Hc(1,ae,3,0,"button",73),a.Hc(2,ce,3,0,"button",73),a.Vb()),2&t){const t=a.ic(2);a.Cb(1),a.pc("ngIf",t.showSaveBtn),a.Cb(1),a.pc("ngIf",!t.showSaveBtn)}}const de=function(t){return{"is-invalid":t}};function be(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",41),a.Wb(1,"form",42,43),a.Wb(3,"div",44),a.Wb(4,"div",45),a.Wb(5,"label"),a.Jc(6,"Organisations"),a.Vb(),a.Wb(7,"select",46),a.Hc(8,ee,2,2,"option",47),a.Vb(),a.Vb(),a.Wb(9,"div",45),a.Wb(10,"label"),a.Jc(11,"Supplier"),a.Vb(),a.Wb(12,"select",48),a.Hc(13,ie,2,2,"option",47),a.Vb(),a.Vb(),a.Wb(14,"div",45),a.Wb(15,"label"),a.Jc(16,"Trip Type"),a.Vb(),a.Wb(17,"select",49),a.Wb(18,"option",50),a.Jc(19,"Trip Type"),a.Vb(),a.Wb(20,"option",51),a.Jc(21,"All"),a.Vb(),a.Wb(22,"option",52),a.Jc(23,"One way"),a.Vb(),a.Wb(24,"option",53),a.Jc(25,"Round Trip"),a.Vb(),a.Wb(26,"option",54),a.Jc(27,"Multi Trip"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(28,"div",55),a.Wb(29,"div",44),a.Wb(30,"div",56),a.Wb(31,"label"),a.Jc(32," Origin Airport "),a.Wb(33,"i",57),a.Wb(34,"span",58),a.Jc(35," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(36,"select",59),a.Hc(37,oe,2,2,"option",47),a.Vb(),a.Vb(),a.Wb(38,"div",56),a.Wb(39,"label"),a.Jc(40," Destination Airport "),a.Wb(41,"i",57),a.Wb(42,"span",58),a.Jc(43," Comma-separated list of airport code e.g. DXB, JED, LHR (Upper Case Only). Default ALL will be selected. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(44,"select",60),a.Hc(45,ne,2,2,"option",47),a.Vb(),a.Vb(),a.Vb(),a.Wb(46,"div",61),a.Wb(47,"div",62),a.Wb(48,"label"),a.Jc(49,"Preferred Airlines"),a.Vb(),a.Wb(50,"mat-form-field",63),a.Wb(51,"mat-chip-list",null,64),a.Hc(53,re,4,6,"mat-chip",65),a.Vb(),a.Wb(54,"input",66),a.ec("matChipInputTokenEnd",(function(e){return a.Ac(t),a.ic().add(e,1)})),a.Vb(),a.Wb(55,"mat-error"),a.Jc(56,"Atleast 1 name need to be added"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(57,le,3,2,"div",67),a.Vb(),a.Vb()}if(2&t){const t=a.yc(52),e=a.ic();a.Cb(1),a.pc("formGroup",e.addAirlineRoutesForm),a.Cb(7),a.pc("ngForOf",e.allPos),a.Cb(5),a.pc("ngForOf",e.suppliers),a.Cb(17),a.pc("ngClass",a.uc(12,de,e.isSubmitted&&e.f.origin.errors)),a.Cb(7),a.pc("ngForOf",e.origins),a.Cb(1),a.pc("ngClass",a.uc(14,de,e.isSubmitted&&e.f.destination.errors)),a.Cb(7),a.pc("ngForOf",e.destinations),a.Cb(8),a.pc("ngForOf",e.addAirlineRoutesForm.value.routes),a.Cb(1),a.pc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",e.addOnBlur),a.Cb(3),a.pc("ngIf",e.showListCode)}}const pe=function(t){return{"list-code-ui":t}},ge=function(t){return{"list-code":t}},ue=function(t){return{"list-code-block":t}};let me=(()=>{class t{constructor(t,e,i,o,n){this.fb=t,this.AirlineDealService=e,this.toastr=i,this.reportService=o,this.commonService=n,this.showAddCode=!0,this.showListCode=!1,this.showSaveBtn=!0,this.limit=15,this.pageIndex=1,this.pageAirline=0,this.allAirlineRoutes=[],this.allPos=[],this.totalAirlineDeals=0,this.pages=0,this.airlines=[],this.suppliers=[],this.origins=[],this.destinations=[],this.rbdArrayList=[],this.airlineForm={page:this.pageAirline},this.offset=0,this.totalCount=0,this.filterParams={page:this.offset},this.totalAirlineRoutes=0,this.airlinePage=0,this.rbdArr=[],this.destArr=[],this.orgArr=[],this.pref_arr=[],this.supplierArr=[],this.toggleObj={},this.isSubmitted=!1,this.separatorKeysCodes=[St.g,St.c],this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.fetchAllAirportDetails=()=>{this.commonService.getAirportsList().subscribe(t=>{t.status?(this.origins=t.result,this.destinations=t.result):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}}ngOnInit(){this.initForm(),this.fetchAllPOS({limit:1500}),this.fetchAllSuppliers(),this.fetchAllAirportDetails(),this.getAllAirlines(),this.fetchAllAirlineRoutes(this.filterParams)}ngAfterViewInit(){this.loadConfig()}get f(){return this.addAirlineRoutesForm.controls}initForm(){this.addAirlineRoutesForm=this.fb.group({routes_id:[""],organisation_id:[""],supplier:[""],trip_type:[""],origin:["",b.z.required],destination:["",b.z.required],routes:[[]],mode:[""]})}onClickAddCode(){this.loadConfig(),this.showAddCode=!1,this.showListCode=!0,this.showSaveBtn=!0}onClickListCode(){this.loadConfig(),this.showAddCode=!0,this.showListCode=!1}fetchAllSuppliers(){this.commonService.getSupplierList().subscribe(t=>{"data"==t.type?this.suppliers=t.listData:this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllPOS(t){this.AirlineDealService.fetchAllPointofSale(t).subscribe(t=>{t.status&&(this.allPos=t.result.data)},t=>{console.log("erer ",t)})}getAllAirlines(){this.commonService.getAirlines().subscribe(t=>{"data"==t.type?this.airlines=t.airlines:this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}saveAirlineRoutes(){this.isSubmitted=!0,this.addAirlineRoutesForm.invalid?this.toastr.error("Please fill Mandatory Fieilds","",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}):(this.addAirlineRoutesForm.patchValue({mode:"Add",routes_id:""}),this.AirlineDealService.addAirlineRoutes(this.addAirlineRoutesForm.value).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineRoutes(this.filterParams),this.resetForm()):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}deleteAirlineRoutes(t){d.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.value&&this.AirlineDealService.deleteAirlineRoutes({routes_id:t.routes_id}).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineRoutes(this.filterParams)):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})})}editAirlineRoutes(t){t.destination.forEach(t=>{this.destArr.push(t.text)}),t.origin.forEach(t=>{this.orgArr.push(t.text)}),t.routes.forEach(t=>{this.pref_arr.push({name:t.name})}),t.supplier.forEach(t=>{this.suppliers.push(t)}),this.loadConfig(),this.showSaveBtn=!1,this.showAddCode=!1,this.showListCode=!0,this.addAirlineRoutesForm.patchValue({organisation_id:t.organisation_id,origin:this.orgArr,destination:this.destArr,routes:this.pref_arr,supplier:this.suppliers,trip_type:t.trip_type,routes_id:t.routes_id})}updateAirlineRoutes(){this.addAirlineRoutesForm.patchValue({mode:"Update",routes_id:this.addAirlineRoutesForm.value.routes_id}),this.AirlineDealService.getUpdateAirlineRoutes(this.addAirlineRoutesForm.value).subscribe(t=>{t.status?(this.toastr.success(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.fetchAllAirlineRoutes(this.filterParams)):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}),this.resetForm()})}resetForm(){this.addAirlineRoutesForm.reset(),this.onClickListCode()}loadConfig(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown(),$(".dropdown1").dropdown({placeholder:"RBD"}),$(".dropdown2").dropdown({placeholder:"Choose suppliers"}),$(".dropdown6").dropdown({placeholder:"Choose Organisations"}),$(".dropdown3").dropdown({placeholder:"Choose airlines"}),$(".dropdown4").dropdown({placeholder:"Choose origin airports"}),$(".dropdown5").dropdown({placeholder:"Choose Destination airports"})}))}statusToggle(t){this.toggleObj.id=t.routes_id,this.toggleObj.status=t.is_active,this.toggleObj.table="routes",console.log("data::::",t),this.AirlineDealService.onStatusToggle(this.toggleObj).subscribe(t=>{t.status?this.fetchAllAirlineRoutes(this.filterParams):this.toastr.error(`${t.message}`,`${t.message}`,{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}fetchAllAirlineRoutes(t){this.AirlineDealService.getAllAirlineRoutes(this.filterParams).subscribe(t=>{t.status?(this.totalCount=t.result.total,this.offset=t.result.page,t.result.data.map(t=>{t.origin&&(t.origin=JSON.parse(t.origin)),t.destination&&(t.destination=JSON.parse(t.destination)),t.routes&&(t.routes=JSON.parse(t.routes))}),this.allAirlineRoutes=t.result.data):this.toastr.error(`${t.message}`,"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})})}add(t,e){const i=t.input,o=t.value.toUpperCase();(o||"").trim()&&1==e&&this.addAirlineRoutesForm.value.routes.push({name:o.trim()}),i&&(i.value="")}remove(t,e){const i=this.addAirlineRoutesForm.value.routes.indexOf(t);1==e&&this.addAirlineRoutesForm.value.routes.splice(i,1)}pageCallback(t){this.airlineForm.page=t.offset,this.fetchAllAirlineRoutes(this.filterParams)}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(b.f),a.Qb(p.a),a.Qb(g.b),a.Qb(u.a),a.Qb(m.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-airline-routes"]],decls:11,vars:14,consts:[[1,"ui","fluid","container"],[1,"ui","form",3,"ngClass"],[1,"ui","segment"],[1,"two","fields","search-section"],["class","eight wide field",4,"ngIf"],[1,"eight","wide","field","bookings_btn-panel",3,"ngClass"],["class","ui primary button tourCode_btn","tabindex","0",3,"click",4,"ngIf"],["href","javascript:void(0)","class","ui goto_list tourCode_btn","tabindex","0",3,"click",4,"ngIf"],[1,"result-block",3,"ngClass"],["class","user-table-list b2c-list-user-table",4,"ngIf"],["class","listCodeWrapper",4,"ngIf"],[1,"eight","wide","field"],[1,"ui","header","main_head"],["tabindex","0",1,"ui","primary","button","tourCode_btn",3,"click"],["href","javascript:void(0)","tabindex","0",1,"ui","goto_list","tourCode_btn",3,"click"],[1,""],["src","../../../../../assets/icons/goto_link_arrow.svg",1,"goto-link"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","rows","externalPaging","count","offset","page"],["table",""],["name","Trip Type","prop","trip_type"],["name","Origin"],["ngx-datatable-cell-template",""],["name","Destination"],["name","Preferred Airline"],["name","Created","prop","created"],["name","Status","prop","is_active"],["name","Edit"],["name","Delete"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],[1,"icon"],["src","./.././../../../assets/icons/checkmark.png",1,"bookings_input__placeholder-icon","cal"],["src","./.././../../../assets/icons/cross.png",1,"bookings_input__placeholder-icon","call"],["title","Edit user",1,"action",3,"click"],["src","./../../../../../assets/icons/edit.png",1,"bookings_input__placeholder-icon","cal"],[4,"ngIf"],["title","Delete",1,"action"],[1,"icon",3,"click"],["src","./../../../../../assets/icons/delete-button.png",1,"bookings_input__placeholder-icon","cal"],[1,"listCodeWrapper"],[1,"ui","form",3,"formGroup"],["Form","ngForm"],[1,"six","fields"],[1,"five","wide","field"],["formControlName","organisation_id","name","organisation_id",1,"ui","fluid","search","dropdown6"],["class","item",3,"value",4,"ngFor","ngForOf"],["formControlName","supplier","name","supplier","multiple","",1,"ui","fluid","search","dropdown2","multiple_search"],["formControlName","trip_type",1,"ui","fluid","search","dropdown"],["value","",1,"item"],["value","All",1,"item"],["value","One way",1,"item"],["value","Round Trip",1,"item"],["value","Multi Trip",1,"item"],[1,"ui","segment","detail-segment"],[1,"five","wide","field",3,"ngClass"],[1,"fa","fa-exclamation-circle","tooltip"],[1,"tooltiptext"],["formControlName","origin","required","","multiple","",1,"ui","fluid","search","dropdown4","multiple_search"],["formControlName","destination","required","","multiple","",1,"ui","fluid","search","dropdown5","multiple_search"],[1,"fields"],[1,"six","wide","field","input-tagbased","mb-0"],[1,"example-chip-list",2,"width","100%","top","-10px"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["class","bookings_btn-panel save-btn-block",4,"ngIf"],[1,"item",3,"value"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[1,"bookings_btn-panel","save-btn-block"],["class","ui primary button tourCode_btn fluid",3,"click",4,"ngIf"],[1,"ui","primary","button","tourCode_btn","fluid",3,"click"],[1,"tourCode_text"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"div",2),a.Wb(3,"div",3),a.Hc(4,Ft,3,0,"div",4),a.Wb(5,"div",5),a.Hc(6,$t,2,0,"button",6),a.Hc(7,Lt,4,0,"a",7),a.Vb(),a.Vb(),a.Wb(8,"div",8),a.Hc(9,te,18,8,"div",9),a.Hc(10,be,58,16,"div",10),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(1),a.pc("ngClass",a.uc(8,pe,e.showListCode)),a.Cb(3),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngClass",a.uc(10,ge,e.showListCode)),a.Cb(1),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngIf",e.showListCode),a.Cb(1),a.pc("ngClass",a.uc(12,ue,e.showListCode)),a.Cb(1),a.pc("ngIf",e.showAddCode),a.Cb(1),a.pc("ngIf",e.showListCode))},directives:[o.n,o.p,n.c,n.b,n.a,o.o,b.B,b.p,b.i,b.x,b.o,b.h,b.y,b.s,b.A,b.w,Tt.b,Rt.c,Rt.b,Tt.a,Rt.a,Ht.a,Rt.d],pipes:[o.f,o.x],styles:[".outer[_ngcontent-%COMP%]{margin:0 20px 0 15px}.airline_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}hr[_ngcontent-%COMP%]{box-sizing:border-box;overflow:visible;border:.5px solid #e0e0e0}.addTogg_text[_ngcontent-%COMP%], .tourCode_text[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:13px;font-weight:500;line-height:15px;text-align:center}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;font-size:14px}.goto_list[_ngcontent-%COMP%], .goto_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}.b2c-list-user-table[_ngcontent-%COMP%]{overflow-x:auto}.b2c-list-user-table[_ngcontent-%COMP%]   .ui.table[_ngcontent-%COMP%]{width:calc(100% + 540px)}.date-field[_ngcontent-%COMP%]{text-indent:17px}.ui.form[_ngcontent-%COMP%]{padding:24px 0}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{padding:0;margin:0 24px}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0;margin-bottom:0}.ui.form[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{margin-left:0}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:16px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.call[_ngcontent-%COMP%]{width:10px;margin-top:0}.icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.calender[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{z-index:0}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.ui.segment[_ngcontent-%COMP%]{margin-bottom:60px}.search-section[_ngcontent-%COMP%]{padding:0 30px;text-align:right}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{text-align:left;font-weight:500!important;font-size:13px;line-height:15px;color:#1b1f26}.search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{text-align:left;margin:0 auto 20px;padding-left:0}.listCodeWrapper[_ngcontent-%COMP%]{padding:0}.listCodeWrapper[_ngcontent-%COMP%] > .ui.form[_ngcontent-%COMP%]{padding:20px 8px}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.four.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .five.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .six.wide.field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:12px}.detail-segment[_ngcontent-%COMP%]{padding:0;margin-top:0}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:rgba(0,0,0,.8);color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:100%;left:50%;margin-left:0}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.list-code-block[_ngcontent-%COMP%]{margin:24px}.ui.form[_ngcontent-%COMP%]   .eight.wide.field.list-code[_ngcontent-%COMP%]{width:1100px!important}.listCodeWrapper[_ngcontent-%COMP%]   .ui.form[_ngcontent-%COMP%]{padding:12px 0 0!important}.save-btn-block[_ngcontent-%COMP%]{position:relative;top:32px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;margin-right:0;margin-top:20px}.ui.form.list-code-ui[_ngcontent-%COMP%]{padding:20px 0}.ui.form.list-code-ui[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:24px}@media(max-width:1440px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:24px}.ui.form[_ngcontent-%COMP%]{padding:30px 0}.ui.form[_ngcontent-%COMP%]   .tourCode_btn[_ngcontent-%COMP%]{margin-right:0}.ui.form[_ngcontent-%COMP%]   .bookings_btn-panel.list-code[_ngcontent-%COMP%]{padding-left:0}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{right:28px}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:-4px}}@media(max-width:1280px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:20px}.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}.listCodeWrapper[_ngcontent-%COMP%]{padding:0 10px}.ui.form[_ngcontent-%COMP%]   .save-btn-block[_ngcontent-%COMP%]{right:164px}}.example-chip-list[_ngcontent-%COMP%]{width:100%}"]}),t})(),he=(()=>{class t{constructor(){this.activeTab=!0,this.tabName="first-tab",this.url=r.a.serverURL}ngOnInit(){}activateTab(t){switch(t){case"first-tab":case"second-tab":case"third-tab":default:this.activeTab=!0,this.tabName=t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["app-airline-deals"]],decls:18,vars:12,consts:[[1,"outer","animated","fadeIn"],[1,"outer__airline-list"],[1,"air-title"],[1,"ui","top","attached","tabular","menu"],[1,"active","item","tourCode_title",3,"click"],[1,"item","commision_title",3,"click"],[1,"ui","bottom","attached","active","tab","segment","tabContent-block"],[1,"ui","bottom","attached","tab","segment","tabContent-block"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"h3",2),a.Jc(3,"Airline Deals"),a.Vb(),a.Vb(),a.Wb(4,"div",3),a.Wb(5,"div",4),a.ec("click",(function(t){return e.activateTab("first-tab")})),a.Wb(6,"span"),a.Jc(7,"Tour Code/ Deal code"),a.Vb(),a.Vb(),a.Wb(8,"div",5),a.ec("click",(function(t){return e.activateTab("second-tab")})),a.Jc(9,"Commission"),a.Vb(),a.Wb(10,"div",5),a.ec("click",(function(t){return e.activateTab("third-tab")})),a.Jc(11,"Airline Routes"),a.Vb(),a.Vb(),a.Wb(12,"div",6),a.Rb(13,"app-tourcode"),a.Vb(),a.Wb(14,"div",7),a.Rb(15,"app-commission"),a.Vb(),a.Wb(16,"div",7),a.Rb(17,"app-airline-routes"),a.Vb(),a.Vb()),2&t&&(a.Cb(5),a.Hb("active",e.activeTab&&"first-tab"==e.tabName),a.Cb(3),a.Hb("active",e.activeTab&&"second-tab"==e.tabName),a.Cb(2),a.Hb("active",e.activeTab&&"third-tab"==e.tabName),a.Cb(2),a.Hb("active",e.activeTab&&"first-tab"==e.tabName),a.Cb(2),a.Hb("active",e.activeTab&&"second-tab"==e.tabName),a.Cb(2),a.Hb("active",e.activeTab&&"third-tab"==e.tabName))},directives:[tt,Dt,me],styles:[".ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:24px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.air_title[_ngcontent-%COMP%]{margin:0;color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px}.ui.tabular.menu[_ngcontent-%COMP%]   .active.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600!important}.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:24px;font-style:normal;font-weight:700!important;font-size:20px;line-height:23px;color:#181b20}@media(max-width:1440px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:24px}}@media(max-width:1280px){.outer[_ngcontent-%COMP%]   .air-title[_ngcontent-%COMP%]{margin-left:20px}}"]}),t})();var fe=i("tyNb");const Ce=[{path:"",component:he}];let _e=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[fe.j.forChild(Ce)],fe.j]}),t})();var Oe=i("eqAM"),ve=i("iadO"),xe=i("FKr1"),Pe=i("qFsG"),Me=i("/1cH");i.d(e,"AirlineDealsModule",(function(){return we}));let we=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,_e,s.c,n.d,b.k,b.v,Oe.a,ve.a,Tt.d,xe.l,Pe.c,Rt.e,Ht.b,Me.b]]}),t})()}}]);