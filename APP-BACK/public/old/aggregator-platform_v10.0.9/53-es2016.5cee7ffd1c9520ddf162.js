(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{hXbj:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("3Pt+"),r=n("lDzL"),a=n("fXoL"),s=n("8laU"),d=n("5eHb"),b=n("tyNb");function c(t,e){if(1&t&&(a.Wb(0,"option",38),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t),a.Cb(1),a.Lc("",t," ")}}function l(t,e){if(1&t&&(a.Wb(0,"option",38),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t),a.Cb(1),a.Lc("",t," ")}}function u(t,e){if(1&t&&(a.Wb(0,"option",38),a.Jc(1),a.Vb()),2&t){const t=e.$implicit;a.qc("value",t),a.Cb(1),a.Lc("",t," ")}}function p(t,e){1&t&&(a.Wb(0,"div",39),a.Wb(1,"div",40),a.Jc(2,"Audit Log"),a.Vb(),a.Vb())}function g(t,e){1&t&&(a.Jc(0),a.jc(1,"date")),2&t&&a.Lc("",a.lc(1,1,e.value,"dd/MM/yyyy")," ")}const m=function(){return{prop:"created_at",dir:"desc"}},f=function(t){return[t]};function h(t,e){if(1&t&&(a.Wb(0,"div",43),a.Wb(1,"ngx-datatable",44,45),a.Rb(3,"ngx-datatable-column",46),a.Rb(4,"ngx-datatable-column",47),a.Rb(5,"ngx-datatable-column",48),a.Rb(6,"ngx-datatable-column",49),a.Rb(7,"ngx-datatable-column",50),a.Wb(8,"ngx-datatable-column",51),a.Hc(9,g,2,4,"ng-template",52),a.Vb(),a.Vb(),a.Vb()),2&t){const t=a.ic(2);a.Cb(1),a.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("rows",t.NewAuditTrail)("sortType","multi")("reorderable",!0)("sorts",a.uc(10,f,a.tc(9,m)))}}function _(t,e){if(1&t&&(a.Wb(0,"div",41),a.Hc(1,h,10,12,"div",42),a.Vb()),2&t){const t=a.ic();a.Cb(1),a.pc("ngIf",t.showAuditReportTable)}}function C(t,e){1&t&&(a.Wb(0,"div",54),a.Wb(1,"div",55),a.Wb(2,"div",56),a.Jc(3,"Loading Report ..."),a.Vb(),a.Vb(),a.Rb(4,"p"),a.Vb())}function v(t,e){if(1&t&&(a.Wb(0,"div",41),a.Hc(1,C,5,0,"div",53),a.Vb()),2&t){const t=a.ic();a.Cb(1),a.pc("ngIf",t.bookingsLoader)}}const O=function(t){return{error:t}},M=[{path:"",component:(()=>{class t{constructor(t,e,n){this.fb=t,this.newReportService=e,this.toastr=n,this.NewAuditTrail=[],this.totalAuditTrail=0,this.platforms=[],this.modules=[],this.events=[],this.pages=0,this.limit=15,this.pageIndex=1,this.showAuditReportTable=!1,this.submitted=!1,this.newAuditObj={},this.bookingsLoader=!1,this.auditTrailForm=this.fb.group({selectPlatform:[""],selectModule:[""],selectEvent:[""],auditEndDate:["",[o.z.required]],auditStartDate:["",[o.z.required]]}),this.loadStartDate=()=>{var t=this;$((function(){$('input[name="auditStartDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),maxDate:moment(),autoUpdateInput:!1},(function(e,n,i){moment().diff(e,"years"),t.auditTrailForm.get("auditStartDate").setValue(moment(e).format("YYYY-MM-DD"))}))}))},this.loadEndDate=()=>{var t=this;$((function(){$('input[name="auditEndDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),minDate:moment(),autoUpdateInput:!1},(function(e,n,i){moment().diff(e,"years"),t.auditTrailForm.get("auditEndDate").setValue(moment(e).format("YYYY-MM-DD"))}))}))},this.auditReportView=()=>{this.bookingsLoader=!0,this.submitted=!0,this.auditTrailForm.invalid||(this.newAuditObj.platform=this.auditTrailForm.get("selectPlatform").value,this.newAuditObj.module=this.auditTrailForm.get("selectModule").value,this.newAuditObj.event=this.auditTrailForm.get("selectEvent").value,this.newAuditObj.start_date=this.auditTrailForm.get("auditStartDate").value,this.newAuditObj.end_date=this.auditTrailForm.get("auditEndDate").value,this.newReportService.GetAllAuditTrail(this.newAuditObj).subscribe(t=>{t.status?(this.bookingsLoader=!1,this.NewAuditTrail=t.result,0!=t.result.length?(this.NewAuditTrail=t.result,this.showAuditReportTable=!0):(this.bookingsLoader=!1,this.toastr.info("There is no data Available to display",`${t.message}`,{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"}))):this.toastr.error(`${t.message}`,"",{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"})}))},this.reset=()=>{this.bookingsLoader=!1,this.auditTrailForm.reset(),$(".ui.dropdown").dropdown("clear"),this.showAuditReportTable=!1}}get f(){return this.auditTrailForm.controls}ngOnInit(){this.fetchAllAuditTrail()}ngAfterViewInit(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown()})),this.loadEndDate(),this.loadStartDate()}fetchAllAuditTrail(){this.bookingsLoader=!0,this.newReportService.GetAllAuditTrail({page:0}).subscribe(t=>{this.bookingsLoader=!1,this.NewAuditTrail=t.result,t.status?0!=t.result.length?t.result.forEach(t=>{if(null!=t.platform){let e=this.platforms.findIndex(e=>e==t.platform),n=this.modules.findIndex(e=>e==t.module),i=this.events.findIndex(e=>e==t.event);-1==e&&this.platforms.push(t.platform),-1==n&&this.modules.push(t.module),-1==i&&this.events.push(t.event)}}):(this.bookingsLoader=!1,this.toastr.info("There is no data available","",{timeOut:5e3,progressBar:!1,positionClass:"toast-bottom-right"})):(this.bookingsLoader=!1,this.toastr.error(`${t.message}`,"",{timeOut:5e3,progressBar:!1,positionClass:"toast-bottom-right"}))})}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(o.f),a.Qb(s.a),a.Qb(d.b))},t.\u0275cmp=a.Kb({type:t,selectors:[["app-audit-report"]],decls:76,vars:13,consts:[[1,"ui","top","attached","tabular","menu"],["data-tab","first","routerLink","/report/booking-report",1,"item"],["data-tab","second","routerLink","/report/segment-report",1,"item"],["data-tab","third","routerLink","/report/mis-report",1,"item"],["data-tab","fourth","routerLink","/report/search-log-report",1,"item"],["data-tab","fifth","routerLink","/report/audit-report",1,"item","active"],["data-tab","sixth","routerLink","/report/ticket-report",1,"item"],["data-tab","seventh","routerLink","/report/dynamic-report",1,"item"],["data-tab","fifth",1,"ui","bottom","attached","tab","segment","tabContent-block","active"],[1,"ui","segment"],[1,"ui","fluid","container"],[1,"outer-basics"],[1,"ui","form","report-form",3,"formGroup","ngSubmit"],["Form","ngForm"],[1,"field"],[1,"outer-basicForm"],[1,"form-inner"],[1,"fields"],[1,"five","wide","field"],["formControlName","selectPlatform",1,"ui","fluid","search","dropdown"],["value",""],["class","item",3,"value",4,"ngFor","ngForOf"],["formControlName","selectModule",1,"ui","fluid","search","dropdown"],[1,"four","wide","field"],["formControlName","selectEvent",1,"ui","fluid","search","dropdown"],[1,"five","wide","field","bookings_pickers",3,"ngClass"],[1,"mandatory"],[1,"ui","left","icon","input"],["type","text","placeholder","Start Date","formControlName","auditStartDate","name","auditStartDate","value","","required",""],[1,"icon"],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","cal"],["type","text","placeholder","End Date","formControlName","auditEndDate","name","auditEndDate","value","","required",""],[1,"bookings_btn-panel"],["title","Reset",1,"ui","primary","reset","button",3,"click"],[1,"undo","icon"],[1,"ui","primary","button"],["class","fields agent-name-booking",4,"ngIf"],["class","result-block",4,"ngIf"],[1,"item",3,"value"],[1,"fields","agent-name-booking"],[1,"eight","wide","field","ui","small","header"],[1,"result-block"],["class","user-table-list b2c-list-user-table",4,"ngIf"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","sortType","reorderable","sorts"],["table",""],["name","IP Address","prop","browser_ip"],["name","Platform","prop","platform"],["name","Module","prop","module"],["name","Event","prop","event"],["name","Description","prop","description"],["name","Date","prop","created_at"],["ngx-datatable-cell-template",""],["class","ui segment b2c-list-user-table__segment-loader",4,"ngIf"],[1,"ui","segment","b2c-list-user-table__segment-loader"],[1,"ui","active","inverted","dimmer"],[1,"ui","text","loader"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Jc(2," Booking "),a.Vb(),a.Wb(3,"div",2),a.Jc(4,"Segment"),a.Vb(),a.Wb(5,"div",3),a.Jc(6,"MIS"),a.Vb(),a.Wb(7,"div",4),a.Jc(8,"Search Log"),a.Vb(),a.Wb(9,"div",5),a.Jc(10,"Audit Trail Log"),a.Vb(),a.Wb(11,"div",6),a.Jc(12,"Ticket"),a.Vb(),a.Wb(13,"div",7),a.Jc(14,"Dynamic Report"),a.Vb(),a.Vb(),a.Wb(15,"div",8),a.Wb(16,"div",9),a.Wb(17,"div",10),a.Wb(18,"div",11),a.Wb(19,"form",12,13),a.ec("ngSubmit",(function(t){return e.auditReportView()})),a.Wb(21,"div",14),a.Wb(22,"div",15),a.Wb(23,"div",16),a.Wb(24,"div",17),a.Wb(25,"div",18),a.Wb(26,"label"),a.Jc(27,"Platform"),a.Vb(),a.Wb(28,"select",19),a.Wb(29,"option",20),a.Jc(30,"Platform"),a.Vb(),a.Wb(31,"option",20),a.Jc(32,"Platform"),a.Vb(),a.Hc(33,c,2,2,"option",21),a.Vb(),a.Vb(),a.Wb(34,"div",18),a.Wb(35,"label"),a.Jc(36,"Module"),a.Vb(),a.Wb(37,"select",22),a.Wb(38,"option",20),a.Jc(39,"Module"),a.Vb(),a.Hc(40,l,2,2,"option",21),a.Vb(),a.Vb(),a.Wb(41,"div",23),a.Wb(42,"label"),a.Jc(43,"Events"),a.Vb(),a.Wb(44,"select",24),a.Wb(45,"option",20),a.Jc(46,"Events"),a.Vb(),a.Hc(47,u,2,2,"option",21),a.Vb(),a.Vb(),a.Vb(),a.Wb(48,"div",17),a.Wb(49,"div",25),a.Wb(50,"label"),a.Jc(51,"Start Date"),a.Wb(52,"span",26),a.Jc(53,"*"),a.Vb(),a.Vb(),a.Wb(54,"div",27),a.Rb(55,"input",28),a.Wb(56,"i",29),a.Rb(57,"img",30),a.Vb(),a.Vb(),a.Vb(),a.Wb(58,"div",25),a.Wb(59,"label"),a.Jc(60,"End Date"),a.Wb(61,"span",26),a.Jc(62,"*"),a.Vb(),a.Vb(),a.Wb(63,"div",27),a.Rb(64,"input",31),a.Wb(65,"i",29),a.Rb(66,"img",30),a.Vb(),a.Vb(),a.Vb(),a.Wb(67,"div",18),a.Wb(68,"div",32),a.Wb(69,"button",33),a.ec("click",(function(t){return e.reset()})),a.Rb(70,"i",34),a.Vb(),a.Wb(71,"button",35),a.Jc(72," Search "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(73,p,3,0,"div",36),a.Hc(74,_,2,1,"div",37),a.Hc(75,v,2,1,"div",37),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(19),a.pc("formGroup",e.auditTrailForm),a.Cb(14),a.pc("ngForOf",e.platforms),a.Cb(7),a.pc("ngForOf",e.modules),a.Cb(7),a.pc("ngForOf",e.events),a.Cb(2),a.pc("ngClass",a.uc(9,O,e.submitted&&e.f.auditStartDate.errors&&e.f.auditStartDate.errors.required)),a.Cb(9),a.pc("ngClass",a.uc(11,O,e.submitted&&e.f.auditEndDate.errors&&e.f.auditEndDate.errors.required)),a.Cb(15),a.pc("ngIf",e.showAuditReportTable),a.Cb(1),a.pc("ngIf",e.showAuditReportTable),a.Cb(1),a.pc("ngIf",e.bookingsLoader))},directives:[b.g,o.B,o.p,o.i,o.x,o.o,o.h,o.s,o.A,i.o,i.n,o.c,o.w,i.p,r.c,r.b,r.a],pipes:[i.f],styles:[".bookings_btn-panel[_ngcontent-%COMP%]{padding:20px 2px}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.user-table-list.b2c-list-user-table[_ngcontent-%COMP%]{margin-top:16px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.audit-trail-header[_ngcontent-%COMP%]{position:relative;left:32%;color:rgba(0,0,0,.48);font-family:Roboto,sans-serif;font-weight:200}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]{height:450px;background-color:#fff!important;border:0;box-shadow:none;margin-top:10px}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]   .ui.inverted.dimmer[_ngcontent-%COMP%]{background-color:#fff!important}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{font-size:12px;color:#3867b1}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.eight.field.bookings_btn-panel[_ngcontent-%COMP%]{padding:0;text-align:right}.agent-name-booking[_ngcontent-%COMP%]{margin:auto 24px!important}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.five.wide.field[_ngcontent-%COMP%]{padding-bottom:16px}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]{padding:24px;margin-bottom:24px}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]:last-child   .five.wide.field[_ngcontent-%COMP%]{padding-bottom:0}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin:24px 0}.bookings_btn-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 6px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[b.j.forChild(M)],b.j]}),t})();n.d(e,"AuditReportModule",(function(){return k}));let k=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[i.c,o.v,o.k,r.d,P]]}),t})()}}]);