function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{AmA7:function(e,t,r){"use strict";r.r(t);var i,n=r("ofXK"),o=r("3Pt+"),a=r("tyNb"),s=r("fXoL"),c=r("mrSG"),u=r("vkgz"),b=r("AytR"),l=r("tk/3"),d=((i=function(){function e(t){_classCallCheck(this,e),this.http=t,this.apiUrl=b.a.serverURL}return _createClass(e,[{key:"createUser",value:function(e){var t=this;return this.http.post("".concat(this.apiUrl,"/api/create-new-user"),e).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}},{key:"updateUser",value:function(e){var t=this;return this.http.put("".concat(this.apiUrl,"/api/update-user"),e).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}},{key:"fetchUser",value:function(e){var t=this;return this.http.get("".concat(this.apiUrl,"/api/fetch-new-user/").concat(e)).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}},{key:"fetchUsers",value:function(e){var t=this;return this.http.post("".concat(this.apiUrl,"/api/fetch-all-users"),e).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}},{key:"fetchRoles",value:function(){var e=this;return this.http.get("".concat(this.apiUrl,"/api/roles/list")).pipe(Object(u.a)((function(t){return Object(c.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})))})))}},{key:"fetchOrganizations",value:function(){var e=this;return this.http.get("".concat(this.apiUrl,"/api/fetch-all-organization")).pipe(Object(u.a)((function(t){return Object(c.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})))})))}},{key:"savePermissions",value:function(e){var t=this;return this.http.post("".concat(this.apiUrl,"/api/users/permission"),e).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}},{key:"fetchPermissions",value:function(){var e=this;return this.http.get("".concat(this.apiUrl,"/api/users/permissions")).pipe(Object(u.a)((function(t){return Object(c.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})))})))}},{key:"saveTargets",value:function(e){var t=this;return this.http.post("".concat(this.apiUrl,"/api/users/target"),e).pipe(Object(u.a)((function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})))})))}}]),e}()).\u0275fac=function(e){return new(e||i)(s.ac(l.b))},i.\u0275prov=s.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),f=r("5eHb");function p(e,t){1&e&&(s.Wb(0,"small",21),s.Jc(1,"required"),s.Vb())}function m(e,t){1&e&&(s.Wb(0,"span"),s.Jc(1,"Admin"),s.Vb())}function g(e,t){1&e&&(s.Wb(0,"span"),s.Jc(1,"Agent"),s.Vb())}var h=function(e){return["edit",e]},v=function(e){return["targets",e]};function V(e,t){if(1&e&&(s.Wb(0,"tr"),s.Wb(1,"td"),s.Jc(2),s.Vb(),s.Wb(3,"td"),s.Hc(4,m,2,0,"span",22),s.Hc(5,g,2,0,"span",22),s.Vb(),s.Wb(6,"td"),s.Jc(7),s.Vb(),s.Wb(8,"td"),s.Jc(9),s.Vb(),s.Wb(10,"td"),s.Jc(11),s.Vb(),s.Wb(12,"td",23),s.Wb(13,"div",24),s.Wb(14,"a",25),s.Rb(15,"i",26),s.Vb(),s.Wb(16,"a",25),s.Rb(17,"i",27),s.Vb(),s.Wb(18,"button",28),s.Rb(19,"i",29),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e){var r=t.$implicit;s.Cb(2),s.Kc(r.organisation?r.organisation.name:null),s.Cb(2),s.pc("ngIf",r.admin),s.Cb(1),s.pc("ngIf",r.agent),s.Cb(2),s.Mc("",r.first_name," ",r.last_name,""),s.Cb(2),s.Kc(r.email),s.Cb(2),s.Kc(r.mobile),s.Cb(3),s.pc("routerLink",s.uc(9,h,r.users_id)),s.Cb(2),s.pc("routerLink",s.uc(11,v,r.users_id))}}var W,_=((W=function(){function e(t,r,i,n){_classCallCheck(this,e),this.router=t,this._fb=r,this.userService=i,this.toastr=n,this.formIsSubmitted=!1,this.users=[],this.offset=0,this.totalCount=0,this.offsetEvent={page:this.offset}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.createSearchUserForm(),this.userService.fetchUsers({page:this.offset,organisation_id:"all",usernameAndAgentCode:null}).subscribe((function(t){t.status?(e.users=t.result.data,e.totalCount=t.result.total,e.offset=t.result.page):e.toastr.error(t.msg,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}),(function(t){e.toastr.error("Oops! ".concat(t.error.message),"Server Error!",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"searchFormSubmit",value:function(){this.formIsSubmitted=!0,this.searchUserForm.valid&&(console.log({search:this.gfc.corporate_type.value,name:this.gfc.nameAndOfficeId.value}),this.formIsSubmitted=!1)}},{key:"addNewUser",value:function(){return this.router.navigateByUrl("users/new")}},{key:"createSearchUserForm",value:function(){this.searchUserForm=this._fb.group({corporate_type:["all"],nameAndOfficeId:[null,o.z.required]})}},{key:"gfc",get:function(){return this.searchUserForm.controls}}]),e}()).\u0275fac=function(e){return new(e||W)(s.Qb(a.f),s.Qb(o.f),s.Qb(d),s.Qb(f.b))},W.\u0275cmp=s.Kb({type:W,selectors:[["app-users"]],decls:41,vars:3,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form","search-field-wrapper",3,"formGroup","ngSubmit"],[1,"four","fields"],[1,"two","wide","field"],["formControlName","corporate_type",1,"ui","fluid","dropdown"],["value","all"],[1,"three","wide","field"],["type","text","placeholder","Office Name/Office Id","formControlName","nameAndOfficeId"],["class","text-danger",4,"ngIf"],[1,"eight","wide","field"],[1,"ui","button","filter_btn"],[1,"filter_list"],[1,"ui","button","filter_btn_reset",3,"click"],[1,"text-right","mb-1"],[1,"ui","button","primary",3,"click"],[1,"ui","celled","table"],["width","120"],[4,"ngFor","ngForOf"],[1,"text-danger"],[4,"ngIf"],[1,"text-center"],[1,"ui","buttons"],["routerLinkActive","router-link-active",1,"ui","button",3,"routerLink"],[1,"fa","fa-edit"],[1,"fa","fa-dollar"],[1,"ui","button"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(s.Wb(0,"h3"),s.Wb(1,"span",0),s.Jc(2,"List of Users"),s.Vb(),s.Vb(),s.Wb(3,"div",1),s.Wb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"form",4),s.ec("ngSubmit",(function(e){return t.searchFormSubmit()})),s.Wb(7,"div",5),s.Wb(8,"div",6),s.Wb(9,"select",7),s.Wb(10,"option",8),s.Jc(11,"All"),s.Vb(),s.Vb(),s.Vb(),s.Wb(12,"div",9),s.Rb(13,"input",10),s.Hc(14,p,2,0,"small",11),s.Vb(),s.Wb(15,"div",12),s.Wb(16,"button",13),s.Wb(17,"span",14),s.Jc(18,"Search"),s.Vb(),s.Vb(),s.Wb(19,"button",15),s.ec("click",(function(e){return t.searchUserForm.reset({})})),s.Wb(20,"span",14),s.Jc(21,"Reset"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(22,"div",16),s.Wb(23,"button",17),s.ec("click",(function(e){return t.addNewUser()})),s.Jc(24,"Add new User"),s.Vb(),s.Vb(),s.Wb(25,"table",18),s.Wb(26,"thead"),s.Wb(27,"tr"),s.Wb(28,"th"),s.Jc(29,"Organization"),s.Vb(),s.Wb(30,"th"),s.Jc(31,"Role"),s.Vb(),s.Wb(32,"th"),s.Jc(33,"Name"),s.Vb(),s.Wb(34,"th"),s.Jc(35,"Email"),s.Vb(),s.Wb(36,"th"),s.Jc(37,"Contact Info"),s.Vb(),s.Wb(38,"th",19),s.Jc(39,"\xa0"),s.Vb(),s.Vb(),s.Vb(),s.Hc(40,V,20,13,"tr",20),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(6),s.pc("formGroup",t.searchUserForm),s.Cb(8),s.pc("ngIf",t.formIsSubmitted&&t.gfc.nameAndOfficeId.errors),s.Cb(26),s.pc("ngForOf",t.users))},directives:[o.B,o.p,o.i,o.x,o.o,o.h,o.s,o.A,o.c,n.p,n.o,a.i,a.h],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:50px}.filter_btn[_ngcontent-%COMP%]{background-color:#3867b1}.filter_btn[_ngcontent-%COMP%], .filter_btn_reset[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filter_btn_reset[_ngcontent-%COMP%]{background-color:#4f4f4f}.filter_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:0;margin-top:10px;font-size:13px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.call[_ngcontent-%COMP%]{width:15px;margin-top:10px;margin-left:7px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.calll[_ngcontent-%COMP%]{width:20px;margin-top:10px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.ico[_ngcontent-%COMP%]{width:15px;margin-top:10px}.search-field-wrapper[_ngcontent-%COMP%]{padding-bottom:32px}"]}),W),C=r("lM/l"),w=r("7o2P");function y(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"Required."),s.Vb())}function x(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r),s.Cb(1),s.Kc(r)}}function O(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function J(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function k(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function S(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function I(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function P(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r.id),s.Cb(1),s.Kc(r.value)}}function R(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function M(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.country_id),s.Cb(1),s.Lc("",r.name," ")}}function F(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function z(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.organisation_id),s.Cb(1),s.Lc(" ",r.name,"")}}function N(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function U(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r.id),s.Cb(1),s.Kc(r.name)}}function q(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function H(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.role_id),s.Cb(1),s.Lc("",r.name," ")}}function A(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function E(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"a valid email is required"),s.Vb())}function B(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function L(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function T(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"Required."),s.Vb())}function j(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r),s.Cb(1),s.Kc(r)}}function Q(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function K(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function G(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function D(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function Y(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function X(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r.id),s.Cb(1),s.Kc(r.value)}}function Z(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function ee(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.country_id),s.Cb(1),s.Lc("",r.name," ")}}function te(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function re(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.organisation_id),s.Cb(1),s.Lc(" ",r.name,"")}}function ie(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function ne(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.qc("value",r.id),s.Cb(1),s.Kc(r.name)}}function oe(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function ae(e,t){if(1&e&&(s.Wb(0,"option",48),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.role_id),s.Cb(1),s.Lc("",r.name," ")}}function se(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function ce(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"a valid email is required"),s.Vb())}function ue(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function be(e,t){1&e&&(s.Wb(0,"small",47),s.Jc(1,"required"),s.Vb())}function le(e,t){if(1&e&&(s.Wb(0,"option",27),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r),s.Cb(1),s.Kc(r)}}function de(e,t){if(1&e&&(s.Wb(0,"option",27),s.Jc(1),s.Vb()),2&e){var r=t.$implicit;s.pc("value",r.id),s.Cb(1),s.Kc(r.name)}}function fe(e,t){if(1&e){var r=s.Xb();s.Wb(0,"div",15),s.Wb(1,"div",16),s.Wb(2,"div",17),s.Wb(3,"div",18),s.Wb(4,"label",19),s.Jc(5,"Year"),s.Vb(),s.Wb(6,"select",20),s.Hc(7,le,2,2,"option",21),s.Vb(),s.Vb(),s.Vb(),s.Wb(8,"div",17),s.Wb(9,"div",18),s.Wb(10,"label",19),s.Jc(11,"Month"),s.Vb(),s.Wb(12,"select",22),s.Hc(13,de,2,2,"option",21),s.Vb(),s.Vb(),s.Vb(),s.Wb(14,"div",17),s.Wb(15,"div",18),s.Wb(16,"label",19),s.Jc(17,"Target Amount"),s.Vb(),s.Rb(18,"input",23),s.Vb(),s.Vb(),s.Wb(19,"div",24),s.Rb(20,"br"),s.Wb(21,"button",25),s.ec("click",(function(e){return s.Ac(r),s.ic().btnAddTarget()})),s.Rb(22,"i",26),s.Vb(),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=t.index,n=s.ic();s.Cb(1),s.pc("formGroupName",i),s.Cb(6),s.pc("ngForOf",n.yearsList),s.Cb(6),s.pc("ngForOf",n.monthsList)}}var pe,me,ge,he,ve=function e(t,r){_classCallCheck(this,e),this.id=t,this.name=r},Ve=[{path:"",component:_},{path:"new",component:(ge=function(){function e(t,r,i,n,o){_classCallCheck(this,e),this.router=t,this._fb=r,this.userService=i,this.commonService=n,this.toastr=o,this.userRoles=[],this.organizations=[],this.organizationBranches=[],this.countries=[],this.formIsSubmitted=!1,this.saluteNames=C.k,this.statusRow=C.o}return _createClass(e,[{key:"ngOnInit",value:function(){this.newUserForm=this.createUserForm(),this.getCountries(),this.getRoles(),this.getOrganizations()}},{key:"ngAfterViewInit",value:function(){$(document).ready((function(){$(".ui.dropdown").dropdown()}))}},{key:"btnSubmitHandler",value:function(){var e=this;this.formIsSubmitted=!0,this.newUserForm.invalid||this.userService.createUser({salute:this.gfc.saluation.value,first_name:this.gfc.first_name.value,last_name:this.gfc.last_name.value,sex:this.gfc.gender.value,password:this.gfc.password.value,initial:this.gfc.initial.value,mobile:this.gfc.contact.value,email:this.gfc.email.value,username:this.gfc.username.value,address_1:this.gfc.address1.value,address_2:this.gfc.address2.value,country_id:this.gfc.country_id.value,organisation_id:this.gfc.organisation_id.value||0,selected_permissions:"",skills:"",is_active:this.gfc.status.value,role_id:this.gfc.role_id.value,branch_id:this.gfc.branch_id.value}).subscribe((function(t){200==t.status?(e.toastr.success(t.msg,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}),e.formIsSubmitted=!1,e.router.navigate(["users"])):e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"createUserForm",value:function(){return this._fb.group({saluation:["Mr.",o.z.required],first_name:[null,o.z.required],last_name:[null,o.z.required],role_id:["",o.z.required],contact:[null,o.z.required],initial:[null],gender:["male",o.z.required],status:[1,o.z.required],address1:[null],address2:[null],country_id:["",o.z.required],organisation_id:["",null],username:[null,o.z.required],email:[null,[o.z.required,o.z.email]],password:[null,[o.z.required,o.z.minLength(6)]],cpassword:[null,o.z.required],branch_id:[null]},{validator:this.passwordMatchValidator})}},{key:"passwordMatchValidator",value:function(e){e.get("password").value!==e.get("cpassword").value&&e.get("cpassword").setErrors({NoPassswordMatch:!0})}},{key:"getCountries",value:function(){var e=this;this.commonService.getCountryList().subscribe((function(t){e.countries=t.countries}))}},{key:"getRoles",value:function(){var e=this;this.userService.fetchRoles().subscribe((function(t){200==t.status?e.userRoles=t.data:e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"getOrganizations",value:function(){var e=this;this.userService.fetchOrganizations().subscribe((function(t){200==t.status?e.organizations=t.Organization:e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"getOrgBranches",value:function(e){var t=this;this.organizationBranches=null,this.commonService.getOrgBranches(e).subscribe((function(e){"data"==e.type&&(t.organizationBranches=e.Organization)}))}},{key:"buildError",value:function(e){this.toastr.error(e,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}},{key:"gfc",get:function(){return this.newUserForm.controls}}]),e}(),ge.\u0275fac=function(e){return new(e||ge)(s.Qb(a.f),s.Qb(o.f),s.Qb(d),s.Qb(w.a),s.Qb(f.b))},ge.\u0275cmp=s.Kb({type:ge,selectors:[["app-user-new"]],decls:141,vars:21,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","submit"],[1,"ui","grid"],[1,"eleven","wide","column"],[1,"shadow-sm","p-5","mb-5","bg-white","rounded"],[1,"three","wide","column"],[1,"field"],["for",""],["class","text-danger",4,"ngIf"],["formControlName","saluation",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],[1,"six","wide","column"],["type","text","formControlName","first_name"],["type","text","name","","formControlName","last_name"],["type","text","id","","formControlName","contact","placeholder","Contact number"],[1,"five","wide","column"],["type","text","id","","formControlName","initial","placeholder","Enter initial"],[1,"four","wide","column"],["formControlName","gender",1,"ui","dropdown","fluid"],["value","male"],["value","female"],["formControlName","status",1,"ui","dropdown","fluid"],["for","inputAddress"],["type","text","id","inputAddress","placeholder","1234 Main St","formControlName","address1"],["for","inputAddress2"],["type","text","id","inputAddress2","placeholder","Apartment, studio, or floor","formControlName","address2"],["formControlName","country_id",1,"ui","dropdown","fluid"],["value",""],["formControlName","organisation_id",1,"ui","dropdown","fluid",3,"change"],["formControlName","branch_id",1,"ui","dropdown","fluid"],["formControlName","role_id",1,"ui","dropdown","fluid"],[1,"twelve","wide","column"],["type","email","id","","formControlName","username","placeholder","User name"],["type","email","id","","formControlName","email","placeholder","Email address"],["type","email","id","","placeholder","Password","formControlName","password"],["type","email","id","","placeholder","Password","formControlName","cpassword"],[1,"twelve","wide","column","text-right"],["type","submit",1,"ui","primary","button"],[1,"text-danger"],[3,"value"]],template:function(e,t){1&e&&(s.Wb(0,"h3"),s.Wb(1,"span",0),s.Jc(2,"New User"),s.Vb(),s.Vb(),s.Wb(3,"div",1),s.Rb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"a",4),s.Wb(7,"span",5),s.Jc(8,"List Users"),s.Vb(),s.Vb(),s.Vb(),s.Wb(9,"div",6),s.Wb(10,"div",7),s.Wb(11,"div",8),s.Wb(12,"div",9),s.Wb(13,"form",10),s.ec("submit",(function(e){return t.btnSubmitHandler()})),s.Wb(14,"div",11),s.Wb(15,"div",12),s.Wb(16,"div",13),s.Wb(17,"div",11),s.Wb(18,"div",14),s.Wb(19,"div",15),s.Wb(20,"label",16),s.Jc(21,"Saluation "),s.Hc(22,y,2,0,"small",17),s.Vb(),s.Wb(23,"select",18),s.Hc(24,x,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(25,"div",20),s.Wb(26,"div",15),s.Wb(27,"label",16),s.Jc(28,"First Name "),s.Hc(29,O,2,0,"small",17),s.Vb(),s.Rb(30,"input",21),s.Vb(),s.Vb(),s.Wb(31,"div",20),s.Wb(32,"div",15),s.Wb(33,"label",16),s.Jc(34,"Last Name "),s.Hc(35,J,2,0,"small",17),s.Vb(),s.Rb(36,"input",22),s.Vb(),s.Vb(),s.Vb(),s.Wb(37,"div",11),s.Wb(38,"div",20),s.Wb(39,"div",15),s.Wb(40,"label",16),s.Jc(41,"Contact Number "),s.Hc(42,k,2,0,"small",17),s.Vb(),s.Rb(43,"input",23),s.Vb(),s.Vb(),s.Wb(44,"div",24),s.Wb(45,"div",15),s.Wb(46,"label",16),s.Jc(47,"Initial"),s.Vb(),s.Rb(48,"input",25),s.Vb(),s.Vb(),s.Wb(49,"div",26),s.Wb(50,"div",15),s.Wb(51,"label",16),s.Jc(52,"Gender "),s.Hc(53,S,2,0,"small",17),s.Vb(),s.Wb(54,"select",27),s.Wb(55,"option",28),s.Jc(56,"Male"),s.Vb(),s.Wb(57,"option",29),s.Jc(58,"Female"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(59,"div",24),s.Wb(60,"div",15),s.Wb(61,"label",16),s.Jc(62,"Status "),s.Hc(63,I,2,0,"small",17),s.Vb(),s.Wb(64,"select",30),s.Hc(65,P,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(66,"div",24),s.Wb(67,"div",15),s.Wb(68,"label",31),s.Jc(69,"Address"),s.Vb(),s.Rb(70,"input",32),s.Vb(),s.Vb(),s.Wb(71,"div",24),s.Wb(72,"div",15),s.Wb(73,"label",33),s.Jc(74,"Address 2"),s.Vb(),s.Rb(75,"input",34),s.Vb(),s.Vb(),s.Wb(76,"div",24),s.Wb(77,"div",15),s.Wb(78,"label",16),s.Jc(79,"Country "),s.Hc(80,R,2,0,"small",17),s.Vb(),s.Wb(81,"select",35),s.Wb(82,"option",36),s.Jc(83,"Select"),s.Vb(),s.Hc(84,M,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(85,"div",24),s.Wb(86,"div",15),s.Wb(87,"label",16),s.Jc(88,"POS "),s.Hc(89,F,2,0,"small",17),s.Vb(),s.Wb(90,"select",37),s.ec("change",(function(e){return t.getOrgBranches(e.target.value)})),s.Wb(91,"option",36),s.Jc(92,"Select"),s.Vb(),s.Hc(93,z,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(94,"div",24),s.Wb(95,"div",15),s.Wb(96,"label",16),s.Jc(97,"POS Branch"),s.Hc(98,N,2,0,"small",17),s.Vb(),s.Wb(99,"select",38),s.Wb(100,"option",36),s.Jc(101,"Select Branch"),s.Vb(),s.Hc(102,U,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(103,"div",20),s.Wb(104,"div",15),s.Wb(105,"label",16),s.Jc(106,"Role "),s.Hc(107,q,2,0,"small",17),s.Vb(),s.Wb(108,"select",39),s.Wb(109,"option",36),s.Jc(110,"Select"),s.Vb(),s.Hc(111,H,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(112,"div",24),s.Wb(113,"div",11),s.Wb(114,"div",40),s.Wb(115,"div",15),s.Wb(116,"label",16),s.Jc(117,"Username "),s.Hc(118,A,2,0,"small",17),s.Vb(),s.Rb(119,"input",41),s.Vb(),s.Vb(),s.Wb(120,"div",40),s.Wb(121,"div",15),s.Wb(122,"label",16),s.Jc(123,"Email "),s.Hc(124,E,2,0,"small",17),s.Vb(),s.Rb(125,"input",42),s.Vb(),s.Vb(),s.Wb(126,"div",40),s.Wb(127,"div",15),s.Wb(128,"label",16),s.Jc(129,"Password "),s.Hc(130,B,2,0,"small",17),s.Vb(),s.Rb(131,"input",43),s.Vb(),s.Vb(),s.Wb(132,"div",40),s.Wb(133,"div",15),s.Wb(134,"label",16),s.Jc(135,"Confirm Password "),s.Hc(136,L,2,0,"small",17),s.Vb(),s.Rb(137,"input",44),s.Vb(),s.Vb(),s.Wb(138,"div",45),s.Wb(139,"button",46),s.Jc(140,"Save User"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(13),s.pc("formGroup",t.newUserForm),s.Cb(9),s.pc("ngIf",t.gfc.saluation.errors),s.Cb(2),s.pc("ngForOf",t.saluteNames),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.first_name.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.last_name.errors),s.Cb(7),s.pc("ngIf",t.formIsSubmitted&&t.gfc.contact.errors),s.Cb(11),s.pc("ngIf",t.formIsSubmitted&&t.gfc.gender.errors),s.Cb(10),s.pc("ngIf",t.formIsSubmitted&&t.gfc.status.errors),s.Cb(2),s.pc("ngForOf",t.statusRow),s.Cb(15),s.pc("ngIf",t.formIsSubmitted&&t.gfc.country_id.errors),s.Cb(4),s.pc("ngForOf",t.countries),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.country_id.errors),s.Cb(4),s.pc("ngForOf",t.organizations),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.branch_id.errors),s.Cb(4),s.pc("ngForOf",t.organizationBranches),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.role_id.errors),s.Cb(4),s.pc("ngForOf",t.userRoles),s.Cb(7),s.pc("ngIf",t.formIsSubmitted&&t.gfc.username.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.email.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.password.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.cpassword.errors))},directives:[a.i,o.B,o.p,o.i,n.p,o.x,o.o,o.h,n.o,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.text-danger[_ngcontent-%COMP%]{color:red}"]}),ge)},{path:"edit/:id",component:(me=function(){function e(t,r,i,n,o,a){_classCallCheck(this,e),this.activeRoute=t,this.router=r,this._fb=i,this.userService=n,this.commonService=o,this.toastr=a,this.formIsSubmitted=!1,this.displayTargets=!1,this.displayPermissions=!1,this.saluteNames=C.k,this.statusRow=C.o,this.userId=0,this.userData={},this.userRoles=[],this.organizations=[],this.organizationBranches=[],this.branches=[],this.countries=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.editUserForm=this.createUserForm(null),this.userId=this.activeRoute.snapshot.params.id,this.getUser(this.userId),this.getCountries(),this.getRoles(),this.getOrganizations()}},{key:"ngAfterViewInit",value:function(){$(document).ready((function(){$(".ui.dropdown").dropdown()}))}},{key:"btnSubmitHandler",value:function(){var e=this;this.formIsSubmitted=!0,this.editUserForm.invalid?this.buildError("Please fill all the required fields."):this.userService.updateUser({id:this.userId,salute:this.gfc.salute.value,first_name:this.gfc.first_name.value,last_name:this.gfc.last_name.value,sex:this.gfc.gender.value,password:this.gfc.password.value,initial:this.gfc.initial.value,mobile:this.gfc.contact.value,email:this.gfc.email.value,username:this.gfc.username.value,address_1:this.gfc.address1.value,address_2:this.gfc.address2.value,country_id:this.gfc.country_id.value,organisation_id:this.gfc.organisation_id.value||0,selected_permissions:"",skills:"",is_active:this.gfc.status.value,role_id:this.gfc.role_id.value,branch_id:this.gfc.branch_id.value}).subscribe((function(t){200==t.status?(e.displayTargets=!0,e.userData=t.data,e.formIsSubmitted=!1,e.toastr.success("Profile updated successfully.","Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})):e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"createUserForm",value:function(e){return this._fb.group({salute:[e?e.salute:null,o.z.required],first_name:[e?e.first_name:null,o.z.required],last_name:[e?e.last_name:null,o.z.required],role_id:[e?e.role_id:null,o.z.required],contact:[e?e.mobile:null,o.z.required],initial:[e?e.initial:null],gender:[e?e.sex:null,o.z.required],status:[e?e.is_active:null,o.z.required],address1:[e?e.address_1:null],address2:[e?e.address_2:null],country_id:[e?e.country_id:null,o.z.required],organisation_id:[e?e.organisation_id:null],branch_id:[e?e.branch_id:null],username:[e?e.username:null,o.z.required],email:[e?e.email:null,[o.z.required,o.z.email]],password:[null,[o.z.minLength(6)]],cpassword:[null]},{validator:this.passwordMatchValidator})}},{key:"passwordMatchValidator",value:function(e){e.get("password").value!==e.get("cpassword").value&&e.get("cpassword").setErrors({NoPassswordMatch:!0})}},{key:"buildError",value:function(e){this.toastr.error(e,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}},{key:"getUser",value:function(e){var t=this;this.userService.fetchUser(e).subscribe((function(e){200==e.status?(t.userData=e.data,t.getOrgBranches(t.userData.organisation_id),t.editUserForm=t.createUserForm(t.userData)):t.buildError(e.msg)}),(function(e){t.buildError(e.error.message)}))}},{key:"getCountries",value:function(){var e=this;this.commonService.getCountryList().subscribe((function(t){e.countries=t.countries}))}},{key:"getRoles",value:function(){var e=this;this.userService.fetchRoles().subscribe((function(t){200==t.status?e.userRoles=t.data:e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"getOrganizations",value:function(){var e=this;this.userService.fetchOrganizations().subscribe((function(t){200==t.status?e.organizations=t.Organization:e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)}))}},{key:"getOrgBranches",value:function(e){var t=this;this.organizationBranches=null,this.commonService.getOrgBranches(e).subscribe((function(e){"data"==e.type&&(t.organizationBranches=e.Organization)}))}},{key:"loadTargets",value:function(){this.router.navigate(["users/targets",this.userId])}},{key:"loadPermission",value:function(){this.router.navigate(["users/permissions",this.userId])}},{key:"gfc",get:function(){return this.editUserForm.controls}}]),e}(),me.\u0275fac=function(e){return new(e||me)(s.Qb(a.a),s.Qb(a.f),s.Qb(o.f),s.Qb(d),s.Qb(w.a),s.Qb(f.b))},me.\u0275cmp=s.Kb({type:me,selectors:[["app-user-edit"]],decls:141,vars:21,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","submit"],[1,"ui","grid"],[1,"eleven","wide","column"],[1,"shadow-sm","p-5","mb-5","bg-white","rounded"],[1,"three","wide","column"],[1,"field"],["for",""],["class","text-danger",4,"ngIf"],["formControlName","salute",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],[1,"six","wide","column"],["type","text","formControlName","first_name"],["type","text","name","","formControlName","last_name"],["type","text","id","","formControlName","contact","placeholder","Contact number"],[1,"five","wide","column"],["type","text","id","","formControlName","initial","placeholder","Enter initial"],[1,"four","wide","column"],["formControlName","gender",1,"ui","dropdown","fluid"],["value","male"],["value","female"],["formControlName","status",1,"ui","dropdown","fluid"],["for","inputAddress"],["type","text","id","inputAddress","placeholder","1234 Main St","formControlName","address1"],["for","inputAddress2"],["type","text","id","inputAddress2","placeholder","Apartment, studio, or floor","formControlName","address2"],["formControlName","country_id",1,"ui","dropdown","fluid"],["value",""],["formControlName","organisation_id",1,"ui","dropdown","fluid"],["formControlName","branch_id",1,"ui","dropdown","fluid"],["formControlName","role_id",1,"ui","dropdown","fluid"],[1,"twelve","wide","column"],["type","email","id","","formControlName","username","placeholder","User name"],["type","email","id","","formControlName","email","placeholder","Email address"],["type","email","id","","placeholder","Password","formControlName","password"],["type","email","id","","placeholder","Password","formControlName","cpassword"],[1,"twelve","wide","column","text-right"],["type","submit",1,"ui","primary","button"],[1,"text-danger"],[3,"value"]],template:function(e,t){1&e&&(s.Wb(0,"h3"),s.Wb(1,"span",0),s.Jc(2,"Update User"),s.Vb(),s.Vb(),s.Wb(3,"div",1),s.Rb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"a",4),s.Wb(7,"span",5),s.Jc(8,"List Users"),s.Vb(),s.Vb(),s.Vb(),s.Wb(9,"div",6),s.Wb(10,"div",7),s.Wb(11,"div",8),s.Wb(12,"div",9),s.Wb(13,"form",10),s.ec("submit",(function(e){return t.btnSubmitHandler()})),s.Wb(14,"div",11),s.Wb(15,"div",12),s.Wb(16,"div",13),s.Wb(17,"div",11),s.Wb(18,"div",14),s.Wb(19,"div",15),s.Wb(20,"label",16),s.Jc(21,"Saluation "),s.Hc(22,T,2,0,"small",17),s.Vb(),s.Wb(23,"select",18),s.Hc(24,j,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(25,"div",20),s.Wb(26,"div",15),s.Wb(27,"label",16),s.Jc(28,"First Name "),s.Hc(29,Q,2,0,"small",17),s.Vb(),s.Rb(30,"input",21),s.Vb(),s.Vb(),s.Wb(31,"div",20),s.Wb(32,"div",15),s.Wb(33,"label",16),s.Jc(34,"Last Name "),s.Hc(35,K,2,0,"small",17),s.Vb(),s.Rb(36,"input",22),s.Vb(),s.Vb(),s.Vb(),s.Wb(37,"div",11),s.Wb(38,"div",20),s.Wb(39,"div",15),s.Wb(40,"label",16),s.Jc(41,"Contact Number "),s.Hc(42,G,2,0,"small",17),s.Vb(),s.Rb(43,"input",23),s.Vb(),s.Vb(),s.Wb(44,"div",24),s.Wb(45,"div",15),s.Wb(46,"label",16),s.Jc(47,"Initial"),s.Vb(),s.Rb(48,"input",25),s.Vb(),s.Vb(),s.Wb(49,"div",26),s.Wb(50,"div",15),s.Wb(51,"label",16),s.Jc(52,"Gender "),s.Hc(53,D,2,0,"small",17),s.Vb(),s.Wb(54,"select",27),s.Wb(55,"option",28),s.Jc(56,"Male"),s.Vb(),s.Wb(57,"option",29),s.Jc(58,"Female"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(59,"div",24),s.Wb(60,"div",15),s.Wb(61,"label",16),s.Jc(62,"Status "),s.Hc(63,Y,2,0,"small",17),s.Vb(),s.Wb(64,"select",30),s.Hc(65,X,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(66,"div",24),s.Wb(67,"div",15),s.Wb(68,"label",31),s.Jc(69,"Address"),s.Vb(),s.Rb(70,"input",32),s.Vb(),s.Vb(),s.Wb(71,"div",24),s.Wb(72,"div",15),s.Wb(73,"label",33),s.Jc(74,"Address 2"),s.Vb(),s.Rb(75,"input",34),s.Vb(),s.Vb(),s.Wb(76,"div",24),s.Wb(77,"div",15),s.Wb(78,"label",16),s.Jc(79,"Country "),s.Hc(80,Z,2,0,"small",17),s.Vb(),s.Wb(81,"select",35),s.Wb(82,"option",36),s.Jc(83,"Select"),s.Vb(),s.Hc(84,ee,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(85,"div",24),s.Wb(86,"div",15),s.Wb(87,"label",16),s.Jc(88,"POS "),s.Hc(89,te,2,0,"small",17),s.Vb(),s.Wb(90,"select",37),s.Wb(91,"option",36),s.Jc(92,"Select"),s.Vb(),s.Hc(93,re,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(94,"div",24),s.Wb(95,"div",15),s.Wb(96,"label",16),s.Jc(97,"POS Branch"),s.Hc(98,ie,2,0,"small",17),s.Vb(),s.Wb(99,"select",38),s.Wb(100,"option",36),s.Jc(101,"Select Branch"),s.Vb(),s.Hc(102,ne,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Wb(103,"div",20),s.Wb(104,"div",15),s.Wb(105,"label",16),s.Jc(106,"Role "),s.Hc(107,oe,2,0,"small",17),s.Vb(),s.Wb(108,"select",39),s.Wb(109,"option",36),s.Jc(110,"Select"),s.Vb(),s.Hc(111,ae,2,2,"option",19),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Wb(112,"div",24),s.Wb(113,"div",11),s.Wb(114,"div",40),s.Wb(115,"div",15),s.Wb(116,"label",16),s.Jc(117,"Username "),s.Hc(118,se,2,0,"small",17),s.Vb(),s.Rb(119,"input",41),s.Vb(),s.Vb(),s.Wb(120,"div",40),s.Wb(121,"div",15),s.Wb(122,"label",16),s.Jc(123,"Email "),s.Hc(124,ce,2,0,"small",17),s.Vb(),s.Rb(125,"input",42),s.Vb(),s.Vb(),s.Wb(126,"div",40),s.Wb(127,"div",15),s.Wb(128,"label",16),s.Jc(129,"Password "),s.Hc(130,ue,2,0,"small",17),s.Vb(),s.Rb(131,"input",43),s.Vb(),s.Vb(),s.Wb(132,"div",40),s.Wb(133,"div",15),s.Wb(134,"label",16),s.Jc(135,"Confirm Password "),s.Hc(136,be,2,0,"small",17),s.Vb(),s.Rb(137,"input",44),s.Vb(),s.Vb(),s.Wb(138,"div",45),s.Wb(139,"button",46),s.Jc(140,"Save User"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(13),s.pc("formGroup",t.editUserForm),s.Cb(9),s.pc("ngIf",t.gfc.salute.errors),s.Cb(2),s.pc("ngForOf",t.saluteNames),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.first_name.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.last_name.errors),s.Cb(7),s.pc("ngIf",t.formIsSubmitted&&t.gfc.contact.errors),s.Cb(11),s.pc("ngIf",t.formIsSubmitted&&t.gfc.gender.errors),s.Cb(10),s.pc("ngIf",t.formIsSubmitted&&t.gfc.status.errors),s.Cb(2),s.pc("ngForOf",t.statusRow),s.Cb(15),s.pc("ngIf",t.formIsSubmitted&&t.gfc.country_id.errors),s.Cb(4),s.pc("ngForOf",t.countries),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.country_id.errors),s.Cb(4),s.pc("ngForOf",t.organizations),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.branch_id.errors),s.Cb(4),s.pc("ngForOf",t.organizationBranches),s.Cb(5),s.pc("ngIf",t.formIsSubmitted&&t.gfc.role_id.errors),s.Cb(4),s.pc("ngForOf",t.userRoles),s.Cb(7),s.pc("ngIf",t.formIsSubmitted&&t.gfc.username.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.email.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.password.errors),s.Cb(6),s.pc("ngIf",t.formIsSubmitted&&t.gfc.cpassword.errors))},directives:[a.i,o.B,o.p,o.i,n.p,o.x,o.o,o.h,n.o,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:50px}.filter_btn[_ngcontent-%COMP%]{background-color:#3867b1}.filter_btn[_ngcontent-%COMP%], .filter_btn_reset[_ngcontent-%COMP%]{border-radius:3px;box-shadow:inset 0 1px 34px 0 rgba(0,0,0,.5),0 1px 1px 0 rgba(0,0,0,.5)}.filter_btn_reset[_ngcontent-%COMP%]{background-color:#4f4f4f}.filter_list[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:0;margin-top:10px;font-size:13px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.call[_ngcontent-%COMP%]{width:15px;margin-top:10px;margin-left:7px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.calll[_ngcontent-%COMP%]{width:20px;margin-top:10px}.icon[_ngcontent-%COMP%]   .corporate_input__placeholder-icon.ico[_ngcontent-%COMP%]{width:15px;margin-top:10px}.search-field-wrapper[_ngcontent-%COMP%]{padding-bottom:32px}.text-danger[_ngcontent-%COMP%]{color:red}"]}),me)},{path:"targets/:id",component:(pe=function(){function e(t,r,i,n){_classCallCheck(this,e),this._fb=t,this.userService=r,this.toastr=i,this.activatedRoute=n,this.yearsList=[],this.monthsList=[new ve(1,"January"),new ve(2,"February"),new ve(3,"March"),new ve(4,"April"),new ve(5,"May"),new ve(6,"June"),new ve(7,"July"),new ve(8,"August"),new ve(9,"September"),new ve(10,"October"),new ve(11,"November"),new ve(12,"December")],this.currentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1}return _createClass(e,[{key:"ngOnInit",value:function(){this.userTargetForm=this._fb.group({targets:this._fb.array([this.createUserTargetForm()])});for(var e=this.currentYear;e<=this.currentYear+5;e++)this.yearsList.push(e)}},{key:"btnSubmitHandler",value:function(){var e=this,t=JSON.stringify({user_id:this.activatedRoute.snapshot.params.id,targets:this.userTargetForm.value.targets});return this.userService.saveTargets(t).subscribe((function(t){t.status?e.toastr.success(t.message,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):e.buildError(t.msg)}),(function(t){e.buildError(t.error.message)})),console.log(t),!1}},{key:"createUserTargetForm",value:function(){return this._fb.group({year:[this.currentYear,o.z.required],month:[this.currentMonth,o.z.required],amount:[500,o.z.required]})}},{key:"btnAddTarget",value:function(){this.targets=this.userTargetForm.get("targets"),this.targets.push(this.createUserTargetForm())}},{key:"buildError",value:function(e){this.toastr.error(e,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}},{key:"gfc",get:function(){return this.userTargetForm.controls}}]),e}(),pe.\u0275fac=function(e){return new(e||pe)(s.Qb(o.f),s.Qb(d),s.Qb(f.b),s.Qb(a.a))},pe.\u0275cmp=s.Kb({type:pe,selectors:[["app-user-targets"]],decls:20,vars:2,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup"],[1,"ui","grid"],["class","sixteen wide column","formArrayName","targets",4,"ngFor","ngForOf"],[1,"ten","wide","column","text-right"],["type","button",1,"ui","button","primary",3,"click"],["formArrayName","targets",1,"sixteen","wide","column"],[1,"ui","grid",3,"formGroupName"],[1,"three","wide","column"],[1,"field"],["for","inputAddress2"],["formControlName","year","name","year",1,"ui","dropdown","fluid"],[3,"value",4,"ngFor","ngForOf"],["formControlName","month","name","month",1,"ui","dropdown","fluid"],["type","text","placeholder","Target Amount","formControlName","amount","name","amount",1,"ui","dropdown","fluid"],[1,"four","wide","column"],[1,"ui","button",3,"click"],[1,"fa","fa-plus"],[3,"value"]],template:function(e,t){1&e&&(s.Wb(0,"h3"),s.Wb(1,"span",0),s.Jc(2,"Set User Targets"),s.Vb(),s.Vb(),s.Wb(3,"div",1),s.Rb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"a",4),s.Wb(7,"span",5),s.Jc(8,"List Users"),s.Vb(),s.Vb(),s.Vb(),s.Wb(9,"div",6),s.Wb(10,"div",7),s.Wb(11,"div",8),s.Wb(12,"div",9),s.Wb(13,"form",10),s.Wb(14,"div",11),s.Hc(15,fe,23,3,"div",12),s.Vb(),s.Wb(16,"div",11),s.Wb(17,"div",13),s.Wb(18,"button",14),s.ec("click",(function(e){return t.btnSubmitHandler()})),s.Jc(19,"Save Targets"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(13),s.pc("formGroup",t.userTargetForm),s.Cb(2),s.pc("ngForOf",t.userTargetForm.get.targets.controls))},directives:[a.i,o.B,o.p,o.i,n.o,o.e,o.j,o.x,o.o,o.h,o.c,o.s,o.A],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.text-danger[_ngcontent-%COMP%]{color:red}"]}),pe)}],We=((he=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:he}),he.\u0275inj=s.Nb({factory:function(e){return new(e||he)},imports:[[a.j.forChild(Ve)],a.j]}),he);r.d(t,"UsersModule",(function(){return Ce}));var _e,Ce=((_e=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:_e}),_e.\u0275inj=s.Nb({factory:function(e){return new(e||_e)},imports:[[n.c,We,o.k,o.v]]}),_e)}}]);