function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/4yY":function(e){e.exports=JSON.parse('[{"name":"Users","permissions":[{"name":"List Users","allow":["listUsers","users"]},{"name":"Create New User","allow":["create-new-user","users/new"]},{"name":"Update User","allow":["update-user","users"]},{"name":"Fetch user information","allow":["fetch-new-user","users"]},{"name":"Update My Profile","allow":["logedin-user-info","user-role-management/update-profile"]},{"name":"Permissions","allow":["fetch-new-user","users/permissions"]}]},{"name":"Point of Sale Management","permissions":[{"name":"List All POS","allow":["organization/pos-list","point-sales-management/list-point-sale"]},{"name":"Add Point of Sale","allow":["organization/create-agency","point-sales-management/add-point-sale/pos-info"]},{"name":"Update Point of Sale","allow":["organization/update-agency","point-sales-management/add-point-sale/pos-edit"]},{"name":"Fetch POS Information","allow":["organization/fetch-pos","btn-edit"]},{"name":"Delete POS","allow":["organization/delete-pos","btn-delete"]},{"name":"List Registrations","allow":["registration-list","point-sales-management/registration"]}]},{"name":"Setup/Configurations","permissions":[{"name":"List All Group/Seasonality","allow":["fetch-all-sales","setup-configuration/markup-configuration"]},{"name":"Add/Udate Group/Seasonality","allow":["add-sale","setup-configuration/markup-configuration"]},{"name":"Search Group/Seasonality","allow":["search-sales","setup-configuration/markup-configuration"]},{"name":"Delete Group/Seasonality","allow":["delete-sale","setup-configuration/markup-configuration"]},{"name":"List All Markup Rules","allow":["fetch-all-markups","setup-configuration/markup-configuration"]},{"name":"Add/Udate Markup Rules","allow":["add-markup","setup-configuration/markup-configuration"]},{"name":"Search Markup Rules","allow":["search-markups","setup-configuration/markup-configuration"]},{"name":"Delete Markup Rules","allow":["delete-markup","setup-configuration/markup-configuration"]},{"name":"List All Roles","allow":["roles/list","setup-configuration/roles"]},{"name":"Add/Udate Roles","allow":["roles/add","setup-configuration/roles"]},{"name":"Fetch Roles Information","allow":["roles/get","setup-configuration/roles"]},{"name":"Delete Roles","allow":["roles/delete","setup-configuration/roles"]},{"name":"List All Tour Codes","allow":["fetch-all-tourcodes","setup-configuration/airline-deals"]},{"name":"Add Tour Code","allow":["create-new-tourcode","setup-configuration/airline-deals"]},{"name":"Udate Tour Code","allow":["update-tourcode","setup-configuration/airline-deals"]},{"name":"Fetch Tour Code Information","allow":["fetch-tourcode","setup-configuration/airline-deals"]},{"name":"Delete Tour Code","allow":["remove-tourcode","setup-configuration/airline-deals"]},{"name":"List All Tour Commissions","allow":["fetch-all-commissions","setup-configuration/airline-deals"]},{"name":"Add Tour Commission","allow":["create-new-commission","setup-configuration/airline-deals"]},{"name":"Udate Tour Commission","allow":["update-commission","setup-configuration/airline-deals"]},{"name":"Fetch Tour Commission Information","allow":["fetch-commission","setup-configuration/airline-deals"]},{"name":"Delete Tour Commission","allow":["remove-commission","setup-configuration/airline-deals"]},{"name":"List All Tour Routes","allow":["fetch-all-routes","setup-configuration/airline-deals"]},{"name":"Add Tour Route","allow":["create-new-routes","setup-configuration/airline-deals"]},{"name":"Udate Tour Route","allow":["update-routes","setup-configuration/airline-deals"]},{"name":"Fetch Tour Route Information","allow":["fetch-routes","setup-configuration/airline-deals"]},{"name":"Delete Tour Route","allow":["remove-routes","setup-configuration/airline-deals"]},{"name":"List All Suppliers","allow":["read-all-supplier","setup-configuration/supplier"]},{"name":"Udate Supplier","allow":["update-supplier","setup-configuration/edit-supplier"]},{"name":"List All Currencies","allow":["fetch-all-currency","setup-configuration/currency-configuration"]},{"name":"Add Currency","allow":["create-new-currency","setup-configuration/currency-configuration"]},{"name":"Udate Currency","allow":["update-currency","setup-configuration/currency-configuration"]},{"name":"Fetch Currency Information","allow":["fetch-currency","setup-configuration/currency-configuration"]},{"name":"Delete Currency","allow":["remove-currency","setup-configuration/currency-configuration"]},{"name":"List All Email Templates","allow":["fetch-all-email-template","setup-configuration/email-templates"]},{"name":"Udate Email Templates","allow":["update-email-template","setup-configuration/email-templates"]},{"name":"Fetch Email Templates Information","allow":["fetch-email-template","setup-configuration/email-templates"]}]},{"name":"Bookings","permissions":[{"name":"List All Bookings","allow":["fetch-all-bookings","bookings"]},{"name":"Export Bookings","allow":["export-bookings","bookings"]}]},{"name":"Accounts","permissions":[{"name":"List All Transactions","allow":["transaction-list","accounts/transactions"]},{"name":"Export Transactions","allow":["export-transaction","accounts/transactions"]},{"name":"Add Agent Transaction","allow":["make-agent-transaction","accounts/transactions"]},{"name":"List All Top UP","allow":["get-topup-list","accounts/transactions"]},{"name":"Fetch Top UP","allow":["get-topup-view","accounts/transactions"]},{"name":"Update Top UP","allow":["update-topup-request","accounts/transactions"]},{"name":"List All Floating Deposit","allow":["get-floating-deposit-list","accounts/transactions"]},{"name":"Fetch Floating Deposit","allow":["get-topup-view","accounts/transactions"]},{"name":"Update Top UP","allow":["update-topup-request","accounts/transactions"]}]},{"name":"Report","permissions":[{"name":"List All Bookings","allow":["fetch-all-bookings","report/booking-report"]},{"name":"Search Bookings","allow":["search-bookings-by-organisation","report/booking-report"]},{"name":"Export Booking Report","allow":["export-booking-report","report/booking-report"]},{"name":"Search Segments","allow":["search-segments","report/segment-report"]},{"name":"MIS (Count Platform)","allow":["Flight-Search-Log/count","report/mis-report"]},{"name":"MIS (Monthly Wise)","allow":["Flight-Search-Log/monthlwise","report/mis-report"]},{"name":"Search Log","allow":["fetch-all-Flight-Search-Log","report/search-log-report"]},{"name":"List All Audit Trail Log","allow":["fetch-all-Audit-Trail","report/audit-report"]},{"name":"Search Audit Trail Log","allow":["get-audit-trails","report/audit-report"]},{"name":"Ticket Log","allow":["search-tickets-new","report/ticket-report"]},{"name":"Dynamic Report","allow":["dynamic-report-data","report/dynamic-report"]}]},{"name":"Flight","permissions":[{"name":"Search","allow":["flights-search","search/flights"]},{"name":"Book","allow":["flight-booking","search/flights"]},{"name":"Ticket","allow":["flight-ticket","search/flights"]},{"name":"Cancel","allow":["flight-cancel","search/flights"]},{"name":"Amend","allow":["flight-amend","search/flights"]},{"name":"Refund","allow":["flight-refund","search/flights"]},{"name":"Markup","allow":["flight-markup","search/flights"]}]},{"name":"Hotels","permissions":[{"name":"Search","allow":["hotel-search","search/hotels"]},{"name":"Book","allow":["hotel-room-book","search/hotels"]},{"name":"Details","allow":["hotel-room-details","search/hotels"]},{"name":"Cancel","allow":["hotel-booking-cancel","search/hotels"]}]},{"name":"Cars","permissions":[{"name":"Search","allow":["car-search","search/cars"]}]},{"name":"Extras","permissions":[{"name":"Fetch All Organization","allow":["fetch-all-organization","users"]},{"name":"Roles List","allow":["roles/list","users"]},{"name":"Fetch Supplier List","allow":["fetch-all-supplier","report/booking-report"]},{"name":"Countries List","allow":["get-country","users"]},{"name":"Toggle Status","allow":["toggle-status","report/booking-report"]},{"name":"Currency List","allow":["get-currency-list","accounts/transactions"]},{"name":"List Airport","allow":["get-airports-cache","report/segment-report"]},{"name":"List Airlines","allow":["get-airlines-list","report/segment-report"]}]}]')},grrx:function(e,t,o){"use strict";o.r(t);var n,i=o("ofXK"),r=o("3Pt+"),a=o("gren"),s=o("tyNb"),l=o("PSD3"),c=o.n(l),u=o("fXoL"),p=o("AytR"),b=o("tk/3"),d=o("z6cu"),m=o("un/a"),g=o("JIr8"),f=((n=function(){function e(t){_classCallCheck(this,e),this.http=t,this.url=p.a.serverURL,this.pager={},this.pageOfItems=[],this.httpOptions={headers:new b.e({"Content-Type":"application/json"})}}return _createClass(e,[{key:"getRoles",value:function(){return this.http.get("".concat(this.url,"/api/roles/list")).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}},{key:"addRole",value:function(e){return this.http.post("".concat(this.url,"/api/roles/add"),e).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}},{key:"getRole",value:function(e){return this.http.get("".concat(this.url,"/api/roles/get/").concat(e)).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}},{key:"updateRole",value:function(e,t){return this.http.put("".concat(this.url,"/api/roles/update/").concat(e),t).pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}},{key:"deleteRole",value:function(e){return this.http.post("".concat(this.url,"/api/roles/delete/").concat(e),"").pipe(Object(m.a)(1),Object(g.a)(this.errorHandl))}},{key:"errorHandl",value:function(e){var t;return t=e.error instanceof ErrorEvent?e.error.message:"Error Code: ".concat(e.status,"\nMessage: ").concat(e.message),console.log(t),Object(d.a)(t)}}]),e}()).\u0275fac=function(e){return new(e||n)(u.ac(b.b))},n.\u0275prov=u.Mb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),h=o("5eHb"),C=function(e){return["edit",e]};function P(e,t){if(1&e){var o=u.Xb();u.Wb(0,"tr"),u.Wb(1,"td",14),u.Jc(2),u.Vb(),u.Wb(3,"td",15),u.Jc(4),u.Vb(),u.Wb(5,"td",16),u.Wb(6,"div",17),u.Wb(7,"a",18),u.Rb(8,"i",19),u.Vb(),u.Wb(9,"button",20),u.ec("click",(function(e){u.Ac(o);var n=t.$implicit;return u.ic().delete(n.role_id)})),u.Rb(10,"i",21),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&e){var n=t.$implicit;u.Cb(2),u.Kc(n.code),u.Cb(2),u.Kc(n.name),u.Cb(3),u.pc("routerLink",u.uc(3,C,n.role_id))}}var k,O=((k=function(){function e(t,o){_classCallCheck(this,e),this.roleService=t,this.toastr=o,this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchRoles()}},{key:"fetchRoles",value:function(){var e=this;this.loading=!0,this.roleService.getRoles().subscribe((function(t){e.roles=t.data}),(function(t){e.toasterMessage("error",t)}))}},{key:"delete",value:function(e){var t=this;c.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(o){o.value&&t.roleService.deleteRole(e).subscribe((function(o){o.status?(t.roles.filter((function(t,o,n){e===t.role_id&&n.splice(o,1)})),t.toasterMessage("success","Role deleted successfully")):t.toasterMessage("error",o.msg)}),(function(e){t.toasterMessage("error",e)}))}))}},{key:"toasterMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1?arguments[1]:void 0;"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}}]),e}()).\u0275fac=function(e){return new(e||k)(u.Qb(f),u.Qb(h.b))},k.\u0275cmp=u.Kb({type:k,selectors:[["app-roles"]],decls:25,vars:1,consts:[[1,"outer-segment","animated","fadeIn"],[1,"markup_list"],[1,"markup_title"],["data-tab","first",1,"ui","bottom","attached","active","tab","segment","tabContent-block"],[1,"ui","form"],[1,"two","fields","search-section"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel"],["routerLink","create",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"result-block"],[1,"ui","celled","table"],["width","220"],[4,"ngFor","ngForOf"],["data-label","Code"],["data-label","Name"],["data-label","Name",1,"text-center"],["role","group","aria-label","Basic example",1,"btn-group"],["routerLinkActive","router-link-active",1,"ui","primary","button",3,"routerLink"],[1,"fa","fa-edit"],[1,"ui","red","button",3,"click"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(u.Rb(0,"ngx-ui-loader"),u.Wb(1,"div",0),u.Wb(2,"div",1),u.Wb(3,"h3",2),u.Jc(4,"Roles "),u.Vb(),u.Vb(),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Wb(7,"div",5),u.Rb(8,"div",6),u.Wb(9,"div",7),u.Wb(10,"a",8),u.Wb(11,"span",9),u.Jc(12,"Create Role"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"div",10),u.Wb(14,"table",11),u.Wb(15,"thead"),u.Wb(16,"tr"),u.Wb(17,"th"),u.Jc(18,"Code"),u.Vb(),u.Wb(19,"th"),u.Jc(20,"Role"),u.Vb(),u.Wb(21,"th",12),u.Jc(22,"\xa0"),u.Vb(),u.Vb(),u.Vb(),u.Wb(23,"tbody"),u.Hc(24,P,11,5,"tr",13),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Cb(24),u.pc("ngForOf",t.roles))},directives:[a.c,s.i,i.o,s.h],styles:['.action[_ngcontent-%COMP%]{display:inline-block}.action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;margin:0 10px;cursor:pointer}.action[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px}.roleActionButton[_ngcontent-%COMP%]{border-radius:3px;background-color:#3867b1}.roleActionButton[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-family:Roboto,sans-serif;font-size:14px;font-weight:500;line-height:15px;text-align:center}.goto_list[_ngcontent-%COMP%]{background-color:transparent;box-shadow:none;border:none;font-size:14px}.goto_list[_ngcontent-%COMP%], .goto_list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.goto-link[_ngcontent-%COMP%]{position:relative;top:8px}.mar-right-15[_ngcontent-%COMP%]{margin-right:15px}.mar-top-15[_ngcontent-%COMP%]{margin-top:15px}.permission-block[_ngcontent-%COMP%]{margin-top:15px;display:block}.padd-left-15[_ngcontent-%COMP%]{padding-left:15px}.showOnlyParent[_ngcontent-%COMP%]{width:136px;float:left;padding-bottom:8px}.ui.bottom.attached.tab[_ngcontent-%COMP%]{padding:24px 0}.action[_ngcontent-%COMP%]   .icon.edit_icon[_ngcontent-%COMP%]{margin:0}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px;padding-left:0}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > .checkbox-field[_ngcontent-%COMP%], .ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.search-section[_ngcontent-%COMP%]{padding-bottom:30px}.outer-segment[_ngcontent-%COMP%]{margin:0}.outer-segment[_ngcontent-%COMP%]   .markup_list[_ngcontent-%COMP%]{padding:0 24px}.outer-segment[_ngcontent-%COMP%]   .markup_list[_ngcontent-%COMP%]   .markup_title[_ngcontent-%COMP%]{margin:0;font-style:normal;font-weight:700!important;font-size:20px;line-height:23px;color:#181b20}i.icon[_ngcontent-%COMP%]{margin-top:24px}.role-perm-label[_ngcontent-%COMP%]{display:block;width:100%}.role-perm-block[_ngcontent-%COMP%]{border:1px solid #dadce0;box-sizing:border-box;border-radius:10px;margin:8px}.role-perm-block[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{margin-top:0}.role-perm-block[_ngcontent-%COMP%]   .pos_access-rights[_ngcontent-%COMP%]{color:rgba(24,27,32,.7);font-size:13px}.role-perm-block[_ngcontent-%COMP%]   .pos_access-rights.head[_ngcontent-%COMP%]{color:#181b20;font-weight:500!important;padding-bottom:25px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:before{border-radius:50%;width:15px;height:15px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{left:-1px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181b20}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:before, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:none}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:after{font-size:10px}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{background:#437ada}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:after, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.inner-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{color:#fff}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]{width:100%}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i.icon[_ngcontent-%COMP%]{cursor:pointer;float:right}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]   .pos_access-rights.head[_ngcontent-%COMP%]{color:#181b20;font-weight:700!important}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:before, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:before{border:1px solid rgba(6,40,98,.3)}.role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .box[_ngcontent-%COMP%]:after, .role-perm-block[_ngcontent-%COMP%]   .ui.checkbox.outer-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]:after{content:"\u2022";font-size:36px;top:-5px;color:#1b61dd}.mt-12[_ngcontent-%COMP%]{margin:12px}.ui.segment[_ngcontent-%COMP%]{margin-bottom:60px}.search-section[_ngcontent-%COMP%]{padding:0 30px;text-align:right}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   .main_head[_ngcontent-%COMP%]{text-align:left;font-weight:500!important;font-size:13px;line-height:15px;color:#1b1f26}.search-section[_ngcontent-%COMP%]   .list-code[_ngcontent-%COMP%]{text-align:left;padding:0!important}.save-btn-block[_ngcontent-%COMP%]{text-align:right;position:relative;top:96px;right:-24px}.save-btn-block[_ngcontent-%COMP%]   .ui.reset.button.tourCode_btn[_ngcontent-%COMP%]{margin-right:14px}.child-container[_ngcontent-%COMP%]{display:inline-block;min-width:188px}.child-obj-block[_ngcontent-%COMP%]{border:1px solid #dadce0;box-sizing:border-box;border-radius:10px;margin:8px;padding:8px;max-width:94px}.child-obj-block[_ngcontent-%COMP%]   .ui.checkbox[_ngcontent-%COMP%]{display:block;padding:8px}@media(max-width:1440px){.bookings_btn-panel[_ngcontent-%COMP%]   .roleActionButton[_ngcontent-%COMP%]{margin-right:0}.search-section[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0}.child-container[_ngcontent-%COMP%]{min-width:auto}.save-btn-block[_ngcontent-%COMP%]{right:-30px}}@media(max-width:1280px){.save-btn-block[_ngcontent-%COMP%]{right:-22px}}']}),k),_=o("/4yY");function w(e,t){1&e&&(u.Wb(0,"small"),u.Jc(1,"*"),u.Vb())}function v(e,t){1&e&&(u.Wb(0,"small"),u.Jc(1,"*"),u.Vb())}function M(e,t){if(1&e&&(u.Wb(0,"div",26),u.Wb(1,"div",27),u.Rb(2,"input",28),u.Wb(3,"label",29),u.Jc(4),u.Vb(),u.Vb(),u.Vb()),2&e){var o=t.$implicit,n=t.index,i=u.ic().index;u.Cb(2),u.sc("id","check-",i,"",n,""),u.pc("formControlName",o.allow[0]),u.Cb(1),u.sc("for","check-",i,"",n,""),u.Cb(1),u.Kc(o.name)}}function x(e,t){if(1&e&&(u.Wb(0,"div",20),u.Wb(1,"h3",21),u.Jc(2),u.Vb(),u.Wb(3,"div",22),u.Wb(4,"div",23),u.Wb(5,"div",24),u.Wb(6,"div",11),u.Hc(7,M,5,6,"div",25),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e){var o=t.$implicit;u.Cb(2),u.Kc(o.name),u.Cb(5),u.pc("ngForOf",o.permissions)}}function y(e,t){1&e&&(u.Wb(0,"small"),u.Jc(1,"*"),u.Vb())}function W(e,t){1&e&&(u.Wb(0,"small"),u.Jc(1,"*"),u.Vb())}function V(e,t){if(1&e&&(u.Wb(0,"div",26),u.Wb(1,"div",27),u.Rb(2,"input",28),u.Wb(3,"label",29),u.Jc(4),u.Vb(),u.Vb(),u.Vb()),2&e){var o=t.$implicit,n=t.index,i=u.ic().index;u.Cb(2),u.sc("id","check-",i,"",n,""),u.pc("formControlName",o.allow[0]),u.Cb(1),u.sc("for","check-",i,"",n,""),u.Cb(1),u.Kc(o.name)}}function R(e,t){if(1&e&&(u.Wb(0,"div",20),u.Wb(1,"h3",21),u.Jc(2),u.Vb(),u.Wb(3,"div",22),u.Wb(4,"div",23),u.Wb(5,"div",24),u.Wb(6,"div",11),u.Hc(7,V,5,6,"div",25),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e){var o=t.$implicit;u.Cb(2),u.Kc(o.name),u.Cb(5),u.pc("ngForOf",o.permissions)}}var S,F,A,T=[{path:"",component:O},{path:"list",redirectTo:"",pathMatch:"prefix"},{path:"create",component:(F=function(){function e(t,o,n,i){_classCallCheck(this,e),this._fb=t,this.toastr=o,this.roleService=n,this.router=i,this.allPermissions=_,this.isSubmitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.createRolePermissionForm()}},{key:"btnSubmitHandler",value:function(){var e=this;if(this.isSubmitted=!0,this.rolePermissionForm.invalid)this.toasterMessage("error","Role Name & code is required.");else{var t=Object.keys(this.gfc).map((function(t){return{name:t,data:e.gfc[t],endpoint:e.gfc[t].value}})),o=[];t.forEach((function(e){var t=e.name;"name"==t||"code"==t||o.push(_defineProperty({},t,!!e.data.value))})),this.roleService.addRole({name:this.gfc.name.value,code:this.gfc.code.value,permissions:o}).subscribe((function(t){t.status?(e.toasterMessage("success",t.message),e.rolePermissionForm.reset(),e.router.navigateByUrl("setup-configuration/roles")):e.toasterMessage("error",t.message)}))}}},{key:"createRolePermissionForm",value:function(){this.rolePermissionForm=this._fb.group({name:[null,r.z.required],code:[null,r.z.required]}),this.createPermissions()}},{key:"createPermissions",value:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=this.allPermissions[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value,s=!0,l=!1,c=void 0;try{for(var u,p=a.permissions[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var b=u.value;this.rolePermissionForm.addControl(b.allow[0],new r.g(!1))}}catch(d){l=!0,c=d}finally{try{s||null==p.return||p.return()}finally{if(l)throw c}}}}catch(d){t=!0,o=d}finally{try{e||null==i.return||i.return()}finally{if(t)throw o}}}},{key:"toasterMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1?arguments[1]:void 0;"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}},{key:"gfc",get:function(){return this.rolePermissionForm.controls}}]),e}(),F.\u0275fac=function(e){return new(e||F)(u.Qb(r.f),u.Qb(h.b),u.Qb(f),u.Qb(s.f))},F.\u0275cmp=u.Kb({type:F,selectors:[["app-create-role"]],decls:31,vars:4,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","ngSubmit"],[1,"ui","grid"],[1,"four","wide","column"],[1,"field"],[4,"ngIf"],["type","text","placeholder","Role Name","formControlName","name"],["type","text","placeholder","Role Name","formControlName","code"],["class","sixteen wide column",4,"ngFor","ngForOf"],[1,"mt-2","text-right"],["type","submit",1,"ui","primary","button"],[1,"sixteen","wide","column"],[1,"ui","header"],[1,"ui","card",2,"width","100%"],[1,"content"],[1,"description"],["class","three wide column",4,"ngFor","ngForOf"],[1,"three","wide","column"],[1,"ui","checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[3,"for"]],template:function(e,t){1&e&&(u.Wb(0,"h3"),u.Wb(1,"span",0),u.Jc(2,"Create Role"),u.Vb(),u.Vb(),u.Wb(3,"div",1),u.Rb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"a",4),u.Wb(7,"span",5),u.Jc(8,"List Roles"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Wb(12,"div",9),u.Wb(13,"form",10),u.ec("ngSubmit",(function(e){return t.btnSubmitHandler()})),u.Wb(14,"div",11),u.Wb(15,"div",12),u.Wb(16,"div",13),u.Wb(17,"label"),u.Jc(18,"Role Name "),u.Hc(19,w,2,0,"small",14),u.Vb(),u.Rb(20,"input",15),u.Vb(),u.Vb(),u.Wb(21,"div",12),u.Wb(22,"div",13),u.Wb(23,"label"),u.Jc(24,"Roel Code "),u.Hc(25,v,2,0,"small",14),u.Vb(),u.Rb(26,"input",16),u.Vb(),u.Vb(),u.Hc(27,x,8,2,"div",17),u.Vb(),u.Wb(28,"div",18),u.Wb(29,"button",19),u.Jc(30,"Create Role"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Cb(13),u.pc("formGroup",t.rolePermissionForm),u.Cb(6),u.pc("ngIf",t.isSubmitted&&t.gfc.name.errors),u.Cb(6),u.pc("ngIf",t.isSubmitted&&t.gfc.code.errors),u.Cb(2),u.pc("ngForOf",t.allPermissions))},directives:[s.i,r.B,r.p,r.i,i.p,r.c,r.o,r.h,i.o,r.a],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}"]}),F)},{path:"edit/:id",component:(S=function(){function e(t,o,n,i,r){_classCallCheck(this,e),this._fb=t,this.toastr=o,this.roleService=n,this.router=i,this.activatedRole=r,this.allPermissions=_,this.isSubmitted=!1,this.selectedRoleId=null,this.selectedRole=null}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.createRolePermissionForm(null,null,null),this.selectedRoleId=this.activatedRole.snapshot.params.id,this.roleService.getRole(this.selectedRoleId).subscribe((function(t){t.status?(e.selectedRole=t.data,e.createRolePermissionForm(t.data.code,t.data.name,t.data.permissions)):e.toasterMessage("error","Role Name & code is required.")}))}},{key:"btnSubmitHandler",value:function(){var e=this;if(this.isSubmitted=!0,this.rolePermissionForm.invalid)this.toasterMessage("error","Role Name & code is required.");else{var t=Object.keys(this.gfc).map((function(t){return{name:t,data:e.gfc[t],endpoint:e.gfc[t].value}})),o=[];t.forEach((function(e){var t=e.name;"name"==t||"code"==t||o.push(_defineProperty({},t,!!e.data.value))})),this.roleService.updateRole(this.selectedRoleId,{name:this.gfc.name.value,code:this.gfc.code.value,permissions:o}).subscribe((function(t){t.status?(e.toasterMessage("success",t.msg),e.rolePermissionForm.reset(),e.router.navigateByUrl("setup-configuration/roles")):e.toasterMessage("error",t.message)}))}}},{key:"createRolePermissionForm",value:function(e,t,o){this.rolePermissionForm=this._fb.group({name:[t,r.z.required],code:[e,r.z.required]}),this.createPermissions(o)}},{key:"createPermissions",value:function(e){var t=this;e=JSON.parse(e);var o=!0,n=!1,i=void 0;try{for(var a,s=this.allPermissions[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var l=a.value,c=!0,u=!1,p=void 0;try{for(var b,d=function(){var o=!1,n=b.value.allow[0];e&&(o=e.filter((function(e){return e.hasOwnProperty(n)}))[0]||!1),t.rolePermissionForm.addControl(n,new r.g(o[n]))},m=l.permissions[Symbol.iterator]();!(c=(b=m.next()).done);c=!0)d()}catch(g){u=!0,p=g}finally{try{c||null==m.return||m.return()}finally{if(u)throw p}}}}catch(g){n=!0,i=g}finally{try{o||null==s.return||s.return()}finally{if(n)throw i}}}},{key:"toasterMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1?arguments[1]:void 0;"success"==e?this.toastr.success(t,"Success !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):"error"==e?this.toastr.error(t,"Server Error !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"}):this.toastr.info(t,"Information !",{disableTimeOut:!1,progressBar:!1,positionClass:"toast-bottom-right"})}},{key:"gfc",get:function(){return this.rolePermissionForm.controls}}]),e}(),S.\u0275fac=function(e){return new(e||S)(u.Qb(r.f),u.Qb(h.b),u.Qb(f),u.Qb(s.f),u.Qb(s.a))},S.\u0275cmp=u.Kb({type:S,selectors:[["app-edit-role"]],decls:31,vars:4,consts:[[1,"update-header"],[1,"ui","fluid","container"],[1,"eight","wide","field"],[1,"eight","wide","field","bookings_btn-panel","text-right"],["routerLink","../../list",1,"ui","primary","button","roleActionButton"],[1,"tourCode_text"],[1,"outer-basic"],[1,"outer-basicForm"],[1,"ui","form"],[1,"email-list","b2c-list-user-table"],[3,"formGroup","ngSubmit"],[1,"ui","grid"],[1,"four","wide","column"],[1,"field"],[4,"ngIf"],["type","text","placeholder","Role Name","formControlName","name"],["type","text","placeholder","Role Name","formControlName","code"],["class","sixteen wide column",4,"ngFor","ngForOf"],[1,"mt-2","text-right"],["type","submit",1,"ui","primary","button"],[1,"sixteen","wide","column"],[1,"ui","header"],[1,"ui","card",2,"width","100%"],[1,"content"],[1,"description"],["class","three wide column",4,"ngFor","ngForOf"],[1,"three","wide","column"],[1,"ui","checkbox"],["type","checkbox",1,"custom-control-input",3,"id","formControlName"],[3,"for"]],template:function(e,t){1&e&&(u.Wb(0,"h3"),u.Wb(1,"span",0),u.Jc(2,"Update Role"),u.Vb(),u.Vb(),u.Wb(3,"div",1),u.Rb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"a",4),u.Wb(7,"span",5),u.Jc(8,"List Roles"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Wb(12,"div",9),u.Wb(13,"form",10),u.ec("ngSubmit",(function(e){return t.btnSubmitHandler()})),u.Wb(14,"div",11),u.Wb(15,"div",12),u.Wb(16,"div",13),u.Wb(17,"label"),u.Jc(18,"Role Name "),u.Hc(19,y,2,0,"small",14),u.Vb(),u.Rb(20,"input",15),u.Vb(),u.Vb(),u.Wb(21,"div",12),u.Wb(22,"div",13),u.Wb(23,"label"),u.Jc(24,"Roel Code "),u.Hc(25,W,2,0,"small",14),u.Vb(),u.Rb(26,"input",16),u.Vb(),u.Vb(),u.Hc(27,R,8,2,"div",17),u.Vb(),u.Wb(28,"div",18),u.Wb(29,"button",19),u.Jc(30,"Update Role"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&e&&(u.Cb(13),u.pc("formGroup",t.rolePermissionForm),u.Cb(6),u.pc("ngIf",t.isSubmitted&&t.gfc.name.errors),u.Cb(6),u.pc("ngIf",t.isSubmitted&&t.gfc.code.errors),u.Cb(2),u.pc("ngForOf",t.allPermissions))},directives:[s.i,r.B,r.p,r.i,i.p,r.c,r.o,r.h,i.o,r.a],styles:[".update-header[_ngcontent-%COMP%]{color:#4f4f4f;font-size:20px;font-weight:200;line-height:22px;margin-left:30px}.ui.fluid.container[_ngcontent-%COMP%]{padding:25px}.outer-basic[_ngcontent-%COMP%]{background-color:#fff;box-shadow:3px 1px 4px 0 rgba(0,0,0,.4);border-radius:20px}.outer-basicForm[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px 15px}.basic-header[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}"]}),S)}],L=((A=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:A}),A.\u0275inj=u.Nb({factory:function(e){return new(e||A)},imports:[[s.j.forChild(T)],s.j]}),A);o.d(t,"RolesModule",(function(){return J}));var B,J=((B=function e(){_classCallCheck(this,e)}).\u0275mod=u.Ob({type:B}),B.\u0275inj=u.Nb({factory:function(e){return new(e||B)},imports:[[i.c,r.v,r.k,L,a.b]]}),B)}}]);