function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{NBuS:function(t,e,i){"use strict";i.r(e);var n,o=i("ofXK"),r=i("3Pt+"),a=i("fXoL"),c=i("8laU"),l=i("Iab2"),s=i("EUZL"),d=((n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"exportAsExcelFile",value:function(t,e){var i=s.utils.json_to_sheet(t);console.log("worksheet",i);var n=s.write({Sheets:{data:i},SheetNames:["data"]},{bookType:"xlsx",type:"array"});this.saveAsExcelFile(n,e)}},{key:"saveAsExcelFile",value:function(t,e){var i=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});l.saveAs(i,e+"_export_"+(new Date).getTime()+".xlsx")}}]),t}()).\u0275fac=function(t){return new(t||n)},n.\u0275prov=a.Mb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),b=i("5eHb"),p=i("tyNb");function u(t,e){if(1&t){var i=a.Xb();a.Wb(0,"form",11),a.Wb(1,"input",12),a.ec("ngModelChange",(function(t){return a.Ac(i),a.ic().available.picker=t}))("ngModelChange",(function(t){a.Ac(i);var e=a.ic();return e.onFilter(e.available)})),a.Vb(),a.Vb()}if(2&t){var n=a.ic();a.Cb(1),a.pc("ngModel",n.available.picker)}}var f=function(t,e){return{selected:t,disabled:e}};function g(t,e){if(1&t){var i=a.Xb();a.Wb(0,"li",13),a.ec("click",(function(t){a.Ac(i);var n=e.$implicit,o=e.index,r=a.ic();return!r.disabled&&r.selectItem(r.available.pick,n),r.shiftClick(t,o,r.available,n)}))("dragstart",(function(t){a.Ac(i);var n=e.$implicit,o=a.ic();return o.drag(t,n,o.available)}))("dragend",(function(t){a.Ac(i);var e=a.ic();return e.dragEnd(e.available)})),a.Wb(1,"label"),a.Jc(2),a.Vb(),a.Vb()}if(2&t){var n=e.$implicit,o=a.ic();a.pc("ngClass",a.vc(3,f,o.isItemSelected(o.available.pick,n),o.disabled))("draggable",!o.disabled&&o.format.draggable),a.Cb(2),a.Kc(n._name)}}function m(t,e){if(1&t){var i=a.Xb();a.Wb(0,"form",11),a.Wb(1,"input",14),a.ec("ngModelChange",(function(t){return a.Ac(i),a.ic().confirmed.picker=t}))("ngModelChange",(function(t){a.Ac(i);var e=a.ic();return e.onFilter(e.confirmed)})),a.Vb(),a.Vb()}if(2&t){var n=a.ic();a.Cb(1),a.pc("ngModel",n.confirmed.picker)}}function h(t,e){if(1&t){var i=a.Xb();a.Wb(0,"li",13,15),a.ec("click",(function(t){a.Ac(i);var n=e.$implicit,o=e.index,r=a.ic();return!r.disabled&&r.selectItem(r.confirmed.pick,n),r.shiftClick(t,o,r.confirmed,n)}))("dragstart",(function(t){a.Ac(i);var n=e.$implicit,o=a.ic();return o.drag(t,n,o.confirmed)}))("dragend",(function(t){a.Ac(i);var e=a.ic();return e.dragEnd(e.confirmed)})),a.Wb(2,"label"),a.Jc(3),a.Vb(),a.Vb()}if(2&t){var n=e.$implicit,o=a.ic();a.pc("ngClass",a.vc(3,f,o.isItemSelected(o.confirmed.pick,n),o.disabled))("draggable",!o.disabled&&o.format.draggable),a.Cb(3),a.Kc(n._name)}}var v,k,C=function(t,e){return{order:t,"margin-left":e}},_=function(t,e){return{"max-height":t,"min-height":e}},y=function(t){return{over:t}},O=function(){function t(e){_classCallCheck(this,t),this._name=e,this.last=null,this.picker="",this.dragStart=!1,this.dragOver=!1,this.pick=[],this.list=[],this.sift=[]}return _createClass(t,[{key:"name",get:function(){return this._name}}]),t}(),x=0,M=((k=function(){function t(e){_classCallCheck(this,t),this.differs=e,this.id="dual-list-".concat(x++),this.key="_id",this.display="_name",this.height="100px",this.filter=!1,this.format=t.DEFAULT_FORMAT,this.sort=!1,this.disabled=!1,this.destinationChange=new a.n,this.sorter=function(t,e){return t._name<e._name?-1:t._name>e._name?1:0},this.available=new O(t.AVAILABLE_LIST_NAME),this.confirmed=new O(t.CONFIRMED_LIST_NAME)}return _createClass(t,[{key:"ngOnChanges",value:function(e){e.filter&&!1===e.filter.currentValue&&(this.clearFilter(this.available),this.clearFilter(this.confirmed)),e.sort&&(!0===e.sort.currentValue&&void 0===this.compare?this.compare=this.sorter:!1===e.sort.currentValue&&(this.compare=void 0)),e.format&&(this.format=e.format.currentValue,void 0===this.format.direction&&(this.format.direction=t.LTR),void 0===this.format.add&&(this.format.add=t.DEFAULT_FORMAT.add),void 0===this.format.remove&&(this.format.remove=t.DEFAULT_FORMAT.remove),void 0===this.format.all&&(this.format.all=t.DEFAULT_FORMAT.all),void 0===this.format.none&&(this.format.none=t.DEFAULT_FORMAT.none),void 0===this.format.draggable&&(this.format.draggable=t.DEFAULT_FORMAT.draggable)),e.source&&(this.available=new O(t.AVAILABLE_LIST_NAME),this.updatedSource(),this.updatedDestination()),e.destination&&(this.confirmed=new O(t.CONFIRMED_LIST_NAME),this.updatedDestination(),this.updatedSource())}},{key:"ngDoCheck",value:function(){this.source&&this.buildAvailable(this.source)&&this.onFilter(this.available),this.destination&&this.buildConfirmed(this.destination)&&this.onFilter(this.confirmed)}},{key:"buildAvailable",value:function(t){var e=this,i=this.sourceDiffer.diff(t);return!!i&&(i.forEachRemovedItem((function(t){var i=e.findItemIndex(e.available.list,t.item,e.key);-1!==i&&e.available.list.splice(i,1)})),i.forEachAddedItem((function(t){-1===e.findItemIndex(e.available.list,t.item,e.key)&&e.available.list.push({_id:e.makeId(t.item),_name:e.makeName(t.item)})})),void 0!==this.compare&&this.available.list.sort(this.compare),this.available.sift=this.available.list,!0)}},{key:"buildConfirmed",value:function(t){var e=this,i=!1,n=this.destinationDiffer.diff(t);return!!n&&(n.forEachRemovedItem((function(t){var n=e.findItemIndex(e.confirmed.list,t.item,e.key);-1!==n&&(e.isItemSelected(e.confirmed.pick,e.confirmed.list[n])||e.selectItem(e.confirmed.pick,e.confirmed.list[n]),e.moveItem(e.confirmed,e.available,e.confirmed.list[n],!1),i=!0)})),n.forEachAddedItem((function(t){var n=e.findItemIndex(e.available.list,t.item,e.key);-1!==n&&(e.isItemSelected(e.available.pick,e.available.list[n])||e.selectItem(e.available.pick,e.available.list[n]),e.moveItem(e.available,e.confirmed,e.available.list[n],!1),i=!0)})),void 0!==this.compare&&this.confirmed.list.sort(this.compare),this.confirmed.sift=this.confirmed.list,i&&this.trueUp(),!0)}},{key:"updatedSource",value:function(){this.available.list.length=0,this.available.pick.length=0,void 0!==this.source&&(this.sourceDiffer=this.differs.find(this.source).create(null))}},{key:"updatedDestination",value:function(){void 0!==this.destination&&(this.destinationDiffer=this.differs.find(this.destination).create(null))}},{key:"direction",value:function(){return this.format.direction===t.LTR}},{key:"dragEnd",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?t.dragStart=!1:(this.available.dragStart=!1,this.confirmed.dragStart=!1),!1}},{key:"drag",value:function(t,e,i){this.isItemSelected(i.pick,e)||this.selectItem(i.pick,e),i.dragStart=!0,t.dataTransfer.setData(this.id,e._id)}},{key:"allowDrop",value:function(t,e){return t.dataTransfer.types.length&&t.dataTransfer.types[0]===this.id&&(t.preventDefault(),e.dragStart||(e.dragOver=!0)),!1}},{key:"dragLeave",value:function(){this.available.dragOver=!1,this.confirmed.dragOver=!1}},{key:"drop",value:function(t,e){t.dataTransfer.types.length&&t.dataTransfer.types[0]===this.id&&(t.preventDefault(),this.dragLeave(),this.dragEnd(),e===this.available?this.moveItem(this.available,this.confirmed):this.moveItem(this.confirmed,this.available))}},{key:"trueUp",value:function(){for(var t=this,e=!1,i=this.destination.length;(i-=1)>=0;)0===this.confirmed.list.filter((function(e){return"object"==typeof t.destination[i]?e._id===t.destination[i][t.key]:e._id===t.destination[i]})).length&&(this.destination.splice(i,1),e=!0);for(var n=function(i,n){var o=t.destination.filter((function(e){return"object"==typeof e?e[t.key]===t.confirmed.list[i]._id:e===t.confirmed.list[i]._id}));0===o.length&&(o=t.source.filter((function(e){return"object"==typeof e?e[t.key]===t.confirmed.list[i]._id:e===t.confirmed.list[i]._id}))).length>0&&(t.destination.push(o[0]),e=!0)},o=0,r=this.confirmed.list.length;o<r;o+=1)n(o);e&&this.destinationChange.emit(this.destination)}},{key:"findItemIndex",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_id",n=-1;return t.filter("object"==typeof e?function(o){return o._id===e[i]&&(n=t.indexOf(o),!0)}:function(i){return i._id===e&&(n=t.indexOf(i),!0)}),n}},{key:"makeUnavailable",value:function(t,e){var i=t.list.indexOf(e);-1!==i&&t.list.splice(i,1)}},{key:"moveItem",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=0,a=t.pick.length,c=function(){var o=[];if(n){var a=i.findItemIndex(t.pick,n);-1!==a&&(o[0]=t.pick[a])}else o=t.list.filter((function(e){return e._id===t.pick[r]._id}));1===o.length&&(0===e.list.filter((function(t){return t._id===o[0]._id})).length&&e.list.push(o[0]),i.makeUnavailable(t,o[0]))};for(n&&(a=(r=t.list.indexOf(n))+1);r<a;r+=1)c();void 0!==this.compare&&e.list.sort(this.compare),t.pick.length=0,o&&this.trueUp(),setTimeout((function(){i.onFilter(t),i.onFilter(e)}),10)}},{key:"isItemSelected",value:function(t,e){return t.filter((function(t){return Object.is(t,e)})).length>0}},{key:"shiftClick",value:function(t,e,i,n){if(t.shiftKey&&i.last&&!Object.is(n,i.last)){var o=i.sift.indexOf(i.last);if(e>o)for(var r=o+1;r<e;r+=1)this.selectItem(i.pick,i.sift[r]);else if(-1!==o)for(var a=e+1;a<o;a+=1)this.selectItem(i.pick,i.sift[a])}i.last=n}},{key:"selectItem",value:function(t,e){var i=t.filter((function(t){return Object.is(t,e)}));if(i.length>0)for(var n=0,o=i.length;n<o;n+=1){var r=t.indexOf(i[n]);-1!==r&&t.splice(r,1)}else t.push(e)}},{key:"selectAll",value:function(t){t.pick.length=0,t.pick=t.sift.slice(0)}},{key:"selectNone",value:function(t){t.pick.length=0}},{key:"isAllSelected",value:function(t){return 0===t.list.length||t.list.length===t.pick.length}},{key:"isAnySelected",value:function(t){return t.pick.length>0}},{key:"unpick",value:function(t){for(var e=t.pick.length-1;e>=0;e-=1)-1===t.sift.indexOf(t.pick[e])&&t.pick.splice(e,1)}},{key:"clearFilter",value:function(t){t&&(t.picker="",this.onFilter(t))}},{key:"onFilter",value:function(t){var e=this;if(t.picker.length>0)try{var i=t.list.filter((function(i){return"[object Object]"===Object.prototype.toString.call(i)?void 0!==i._name?-1!==i._name.toLocaleLowerCase(e.format.locale).indexOf(t.picker.toLocaleLowerCase(e.format.locale)):-1!==JSON.stringify(i).toLocaleLowerCase(e.format.locale).indexOf(t.picker.toLocaleLowerCase(e.format.locale)):-1!==i.toLocaleLowerCase(e.format.locale).indexOf(t.picker.toLocaleLowerCase(e.format.locale))}));t.sift=i,this.unpick(t)}catch(n){n instanceof RangeError&&(this.format.locale=void 0),t.sift=t.list}else t.sift=t.list}},{key:"makeId",value:function(t){return"object"==typeof t?t[this.key]:t}},{key:"makeName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",i=this.display;function n(t){switch(Object.prototype.toString.call(t)){case"[object Number]":case"[object String]":return t;default:return void 0!==t?t[i]:"undefined"}}var o="";if(void 0!==this.display)switch(Object.prototype.toString.call(this.display)){case"[object Function]":o=this.display(t);break;case"[object Array]":for(var r=0,a=this.display.length;r<a;r+=1)if(o.length>0&&(o+=e),-1===this.display[r].indexOf("."))o+=t[this.display[r]];else{var c=this.display[r].split("."),l=t[c[0]];if(l)if(-1!==c[1].indexOf("substring")){var s=c[1].substring(c[1].indexOf("(")+1,c[1].indexOf(")")).split(",");switch(s.length){case 1:o+=l.substring(parseInt(s[0],10));break;case 2:o+=l.substring(parseInt(s[0],10),parseInt(s[1],10));break;default:o+=l}}else o+=l}break;default:o=n(t)}else o=n(t);return o}}]),t}()).\u0275fac=function(t){return new(t||k)(a.Qb(a.s))},k.\u0275cmp=a.Kb({type:k,selectors:[["dual-list"]],inputs:{id:"id",key:"key",display:"display",height:"height",filter:"filter",format:"format",sort:"sort",disabled:"disabled",compare:"compare",source:"source",destination:"destination"},outputs:{destinationChange:"destinationChange"},features:[a.Ab()],decls:25,vars:40,consts:[[1,"dual-list"],[1,"listbox",3,"ngStyle"],["type","button","name","addBtn",1,"btn","btn-primary","btn-block",3,"ngClass","disabled","click"],["class","filter",4,"ngIf"],[1,"record-picker"],[3,"ngStyle","ngClass","drop","dragover","dragleave"],[3,"ngClass","draggable","click","dragstart","dragend",4,"ngFor","ngForOf"],[1,"button-bar"],["type","button",1,"btn","btn-primary","pull-left",3,"disabled","click"],["type","button",1,"btn","btn-default","pull-right",3,"disabled","click"],["type","button","name","removeBtn",1,"btn","btn-primary","btn-block",3,"ngClass","disabled","click"],[1,"filter"],["name","filterSource",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngClass","draggable","click","dragstart","dragend"],["name","filterDestination",1,"form-control",3,"ngModel","ngModelChange"],["itmConf",""]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"button",2),a.ec("click",(function(t){return e.moveItem(e.available,e.confirmed)})),a.Jc(3),a.Vb(),a.Hc(4,u,2,1,"form",3),a.Wb(5,"div",4),a.Wb(6,"ul",5),a.ec("drop",(function(t){return e.drop(t,e.confirmed)}))("dragover",(function(t){return e.allowDrop(t,e.available)}))("dragleave",(function(t){return e.dragLeave()})),a.Hc(7,g,3,6,"li",6),a.Vb(),a.Vb(),a.Wb(8,"div",7),a.Wb(9,"button",8),a.ec("click",(function(t){return e.selectAll(e.available)})),a.Jc(10),a.Vb(),a.Wb(11,"button",9),a.ec("click",(function(t){return e.selectNone(e.available)})),a.Jc(12),a.Vb(),a.Vb(),a.Vb(),a.Wb(13,"div",1),a.Wb(14,"button",10),a.ec("click",(function(t){return e.moveItem(e.confirmed,e.available)})),a.Jc(15),a.Vb(),a.Hc(16,m,2,1,"form",3),a.Wb(17,"div",4),a.Wb(18,"ul",5),a.ec("drop",(function(t){return e.drop(t,e.available)}))("dragover",(function(t){return e.allowDrop(t,e.confirmed)}))("dragleave",(function(t){return e.dragLeave()})),a.Hc(19,h,4,6,"li",6),a.Vb(),a.Vb(),a.Wb(20,"div",7),a.Wb(21,"button",8),a.ec("click",(function(t){return e.selectAll(e.confirmed)})),a.Jc(22),a.Vb(),a.Wb(23,"button",9),a.ec("click",(function(t){return e.selectNone(e.confirmed)})),a.Jc(24),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(1),a.pc("ngStyle",a.vc(24,C,e.direction()?1:2,e.direction()?0:"10px")),a.Cb(1),a.pc("ngClass",e.direction()?"point-right":"point-left")("disabled",0===e.available.pick.length),a.Cb(1),a.Kc(e.format.add),a.Cb(1),a.pc("ngIf",e.filter),a.Cb(2),a.pc("ngStyle",a.vc(27,_,e.height,e.height))("ngClass",a.uc(30,y,e.available.dragOver)),a.Cb(1),a.pc("ngForOf",e.available.sift),a.Cb(2),a.pc("disabled",e.disabled||e.isAllSelected(e.available)),a.Cb(1),a.Kc(e.format.all),a.Cb(1),a.pc("disabled",!e.isAnySelected(e.available)),a.Cb(1),a.Kc(e.format.none),a.Cb(1),a.pc("ngStyle",a.vc(32,C,e.direction()?2:1,e.direction()?"10px":0)),a.Cb(1),a.pc("ngClass",e.direction()?"point-left":"point-right")("disabled",0===e.confirmed.pick.length),a.Cb(1),a.Kc(e.format.remove),a.Cb(1),a.pc("ngIf",e.filter),a.Cb(2),a.pc("ngStyle",a.vc(35,_,e.height,e.height))("ngClass",a.uc(38,y,e.confirmed.dragOver)),a.Cb(1),a.pc("ngForOf",e.confirmed.sift),a.Cb(2),a.pc("disabled",e.disabled||e.isAllSelected(e.confirmed)),a.Cb(1),a.Kc(e.format.all),a.Cb(1),a.pc("disabled",!e.isAnySelected(e.confirmed)),a.Cb(1),a.Kc(e.format.none))},directives:[o.q,o.n,o.p,o.o,r.B,r.p,r.q,r.c,r.o,r.r],styles:['div.record-picker[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;border:1px solid #ddd;border-radius:8px;position:relative;cursor:pointer;scrollbar-base-color:#337ab7;scrollbar-3dlight-color:#337ab7;scrollbar-highlight-color:#337ab7;scrollbar-track-color:#eee;scrollbar-arrow-color:gray;scrollbar-shadow-color:gray;scrollbar-dark-shadow-color:gray}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-button{width:0;height:0}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#eee;box-shadow:0 0 3px #dfdfdf inset;border-top-right-radius:8px;border-bottom-right-radius:8px}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#337ab7;border:thin solid gray;border-top-right-radius:8px;border-bottom-right-radius:8px}div.record-picker[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#286090}.record-picker[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0 0 1px}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-top:thin solid #ddd;border-bottom:1px solid #ddd;display:block;padding:2px 2px 2px 10px;margin-bottom:-1px;font-size:.85em;cursor:pointer;white-space:nowrap;min-height:16px}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.record-picker[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#d9edf7}.record-picker[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{background-color:#c4e3f3}.record-picker[_ngcontent-%COMP%]   li.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default;background-color:inherit}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-top-right-radius:8px;border-top:none}.record-picker[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom-left-radius:8px;border-bottom-right-radius:8px;border-bottom:none}.record-picker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;font-size:14px;padding:4px;margin-bottom:-1px;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.record-picker[_ngcontent-%COMP%]   ul.over[_ngcontent-%COMP%]{background-color:#d3d3d3}.dual-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:flex-start}.dual-list[_ngcontent-%COMP%]   .listbox[_ngcontent-%COMP%]{width:50%;margin:0}.dual-list[_ngcontent-%COMP%]   .button-bar[_ngcontent-%COMP%]{margin-top:8px}.point-right[_ngcontent-%COMP%]::after{content:"\\25B6";padding-left:1em}.point-left[_ngcontent-%COMP%]::before{content:"\\25C0";padding-right:1em}.dual-list[_ngcontent-%COMP%]   .button-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:47%}button.btn-block[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:8px}.filter[_ngcontent-%COMP%]{margin-bottom:-2.2em}.filter[_ngcontent-%COMP%]::after{content:"o";width:40px;color:transparent;font-size:2em;background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 64l192 192v192l128-32V256L512 64H0z"/></svg>\');background-repeat:no-repeat;background-position:center center;opacity:.2;top:-36px;left:calc(100% - 21px);position:relative}']}),k.AVAILABLE_LIST_NAME="available",k.CONFIRMED_LIST_NAME="confirmed",k.LTR="left-to-right",k.RTL="right-to-left",k.DEFAULT_FORMAT={add:"Add",remove:"Remove",all:"All",none:"None",direction:k.LTR,draggable:!0,locale:void 0},k),w=((v=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ob({type:v}),v.\u0275inj=a.Nb({factory:function(t){return new(t||v)},imports:[[o.c,r.k]]}),v);function P(t,e){if(1&t){var i=a.Xb();a.Wb(0,"div"),a.Wb(1,"div",42),a.Wb(2,"dual-list",43),a.ec("destinationChange",(function(t){return a.Ac(i),a.ic().confirmed=t})),a.Vb(),a.Vb(),a.Vb()}if(2&t){var n=a.ic();a.Cb(2),a.pc("source",n.source)("destination",n.confirmed)}}function V(t,e){if(1&t){var i=a.Xb();a.Wb(0,"button",48),a.ec("click",(function(t){return a.Ac(i),a.ic(2).exportPivotData()})),a.Jc(1," Export "),a.Vb()}}function R(t,e){if(1&t&&(a.Wb(0,"div",44),a.Wb(1,"div",45),a.Jc(2,"Dynamic Report"),a.Vb(),a.Wb(3,"div",46),a.Hc(4,V,2,0,"button",47),a.Vb(),a.Vb()),2&t){var i=a.ic();a.Cb(4),a.pc("ngIf",i.showExportButton)}}var W,D,I=function(t){return{error:t}},A=[{path:"",component:(W=function(){function t(e,i,n,o){var a=this;_classCallCheck(this,t),this.fb=e,this.ReportService=i,this.exportReportService=n,this.toastr=o,this.selectedReports=[],this.choosedOrganisation=[],this.showChooseOrg=!1,this.showExportButton=!1,this.submitted=!1,this.newOrganiseObj={},this.source=[],this.confirmed=[],this.newDynamicReportObj={},this.showReportResults=[],this.bookingsLoader=!1,this.dynamicReportForm=this.fb.group({reportBy:["",[r.z.required]],reportType:[""],selectedOrg:[""],reportStartDate:["",[r.z.required]],reportEndDate:["",[r.z.required]]}),this.loadStartDate=function(){var t=a;$((function(){$('input[name="reportStartDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment().subtract(90,"day"),autoUpdateInput:!1},(function(e,i,n){moment().diff(e,"years"),t.dynamicReportForm.get("reportStartDate").setValue(moment(e).format("DD-MM-YYYY"))}))}))},this.loadEndDate=function(){var t=a;$((function(){$('input[name="reportEndDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),autoUpdateInput:!1},(function(e,i,n){moment().diff(e,"years"),t.dynamicReportForm.get("reportEndDate").setValue(moment(e).format("DD-MM-YYYY"))}))}))},this.setReportType=function(t){a.dynamicReportForm.get("reportType").setValue(t)},this.setReportBy=function(t){"option"==t?a.showChooseOrg=!1:(a.showChooseOrg=!0,a.fetchAllOrganization()),a.dynamicReportForm.get("reportBy").setValue(t)},this.showReport=function(){a.bookingsLoader=!0,a.submitted=!0,a.dynamicReportForm.invalid||(a.newDynamicReportObj.start_date=a.dynamicReportForm.get("reportStartDate").value,a.newDynamicReportObj.end_date=a.dynamicReportForm.get("reportEndDate").value,a.dynamicReportForm.get("selectedOrg").setValue(a.confirmed),a.dynamicReportForm.get("selectedOrg").setValue(a.MapNametoIds(a.confirmed)),a.newDynamicReportObj.organisation_ids=a.dynamicReportForm.get("selectedOrg").value,a.ReportService.NewDynamicPivotTable(a.newDynamicReportObj).subscribe((function(t){"result"==t.type?(a.bookingsLoader=!1,0!=t.Output.length?a.showReportResults=t.Output:a.toastr.info("There is no data available to show","Oops!!",{timeOut:3e3,progressBar:!1,positionClass:"toast-bottom-right"}),a.pivotTable()):(a.bookingsLoader=!1,a.toastr.error("".concat(t.msg),"".concat(t.msg),{timeOut:1e4,progressBar:!1,positionClass:"toast-bottom-right"}))})))},this.exportPivotData=function(){var t=new Date,e=t.getFullYear()+"_"+(t.getMonth()+1)+"_"+t.getDate();$("#output").table2excel({exclude:".noExl",name:"Report ",filename:"CustomReport"+e})}}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown()})),this.loadEndDate(),this.loadStartDate()}},{key:"fetchAllOrganization",value:function(){var t=this;this.ReportService.GetAllOrganization().subscribe((function(e){e.status?(e.result.data.forEach((function(e){null!=e.name&&t.source.push(e.name)})),t.orginalOrganisationsResult=e.result.data):t.toastr.error("".concat(e.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"pivotTable",value:function(){this.showExportButton=!0,$.pivotUtilities.tipsData=this.showReportResults;var t=$.extend($.pivotUtilities.renderers,$.pivotUtilities.plotly_renderers);$,$("#output").pivotUI($.pivotUtilities.tipsData,{renderers:t})}},{key:"MapNametoIds",value:function(t){for(var e=this.orginalOrganisationsResult,i=[],n=function(n){var o=t[n];(r=e.filter((function(t){return t.name==o}))).length>=0&&i.push(r[0].parent_id)},o=0;o<t.length;o++){var r;n(o)}return i}},{key:"f",get:function(){return this.dynamicReportForm.controls}}]),t}(),W.\u0275fac=function(t){return new(t||W)(a.Qb(r.f),a.Qb(c.a),a.Qb(d),a.Qb(b.b))},W.\u0275cmp=a.Kb({type:W,selectors:[["app-dynamic-report"]],decls:82,vars:12,consts:[[1,"ui","top","attached","tabular","menu"],["data-tab","first","routerLink","/report/booking-report",1,"item"],["data-tab","second","routerLink","/report/segment-report",1,"item"],["data-tab","third","routerLink","/report/mis-report",1,"item"],["data-tab","fourth","routerLink","/report/search-log-report",1,"item"],["data-tab","fifth","routerLink","/report/audit-report",1,"item"],["data-tab","sixth","routerLink","/report/ticket-report",1,"item"],["data-tab","seventh","routerLink","/report/dynamic-report",1,"item","active"],["data-tab","seventh",1,"ui","bottom","attached","tab","segment","tabContent-block","active"],[1,"ui","fluid","container"],[1,"box-container"],[1,"ui","one","column","grid"],[1,"column"],[1,"ui","form",3,"formGroup","ngSubmit"],[1,"ui","segment"],[1,""],[1,"result-block"],[1,"ui","small","header"],[1,"ui","divider"],[1,"field"],[1,"fields"],[1,"six","wide","field","dual-choose",3,"ngClass"],[1,"mandatory"],[1,"ui","fluid","search","selection","dropdown"],["type","hidden","formControlName","reportBy","name","reportBy","value","","required",""],[1,"dropdown","icon"],[1,"default","text"],[1,"menu"],[1,"item",3,"click"],[1,"six","wide","field","dual-choose"],["type","hidden","formControlName","reportType","name","reportType","value",""],[4,"ngIf"],[1,"six","wide","field","bookings_pickers",3,"ngClass"],[1,"ui","left","icon","input"],["type","text","placeholder","Start Date","formControlName","reportStartDate","name","reportStartDate","value","","required",""],[1,"icon"],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","cal"],["type","text","placeholder","End Date","formControlName","reportEndDate","name","reportEndDate","value","","required",""],[1,"sixteen","wide","field","bookings_btn-panel"],[1,"ui","primary","button"],["class","fields agent-name-booking",4,"ngIf"],["id","output",1,"output-pivot"],[1,"dual-list-choose-org"],[3,"source","destination","destinationChange"],[1,"fields","agent-name-booking"],[1,"eight","wide","field","ui","small","header"],[1,"eight","wide","field","bookings_btn-panel"],["class","ui export button","title","Export",3,"click",4,"ngIf"],["title","Export",1,"ui","export","button",3,"click"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Jc(2," Booking "),a.Vb(),a.Wb(3,"div",2),a.Jc(4,"Segment"),a.Vb(),a.Wb(5,"div",3),a.Jc(6,"MIS"),a.Vb(),a.Wb(7,"div",4),a.Jc(8,"Search Log"),a.Vb(),a.Wb(9,"div",5),a.Jc(10,"Audit Trail Log"),a.Vb(),a.Wb(11,"div",6),a.Jc(12,"Ticket"),a.Vb(),a.Wb(13,"div",7),a.Jc(14,"Dynamic Report"),a.Vb(),a.Vb(),a.Wb(15,"div",8),a.Wb(16,"div",9),a.Wb(17,"div",10),a.Wb(18,"div",11),a.Wb(19,"div",12),a.Wb(20,"form",13),a.ec("ngSubmit",(function(t){return e.showReport()})),a.Wb(21,"div",14),a.Wb(22,"div",15),a.Wb(23,"div",16),a.Wb(24,"div",17),a.Jc(25,"Choose Parameters"),a.Vb(),a.Rb(26,"div",18),a.Wb(27,"div",19),a.Wb(28,"div",20),a.Wb(29,"div",21),a.Wb(30,"label"),a.Jc(31,"Report By "),a.Wb(32,"span",22),a.Jc(33,"*"),a.Vb(),a.Vb(),a.Wb(34,"div",23),a.Rb(35,"input",24),a.Rb(36,"i",25),a.Wb(37,"div",26),a.Jc(38,"Report By"),a.Vb(),a.Wb(39,"div",27),a.Wb(40,"div",28),a.ec("click",(function(t){return e.setReportBy("organisation")})),a.Jc(41,"Organisation"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(42,"div",29),a.Wb(43,"label"),a.Jc(44,"Report Type"),a.Vb(),a.Wb(45,"div",23),a.Rb(46,"input",30),a.Rb(47,"i",25),a.Wb(48,"div",26),a.Jc(49,"Report Type"),a.Vb(),a.Wb(50,"div",27),a.Wb(51,"div",28),a.ec("click",(function(t){return e.setReportType("filghtBooking")})),a.Jc(52,"Filght|Detail Booking"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(53,P,3,2,"div",31),a.Rb(54,"br"),a.Wb(55,"div",19),a.Wb(56,"div",20),a.Wb(57,"div",32),a.Wb(58,"label"),a.Jc(59,"Start Date"),a.Wb(60,"span",22),a.Jc(61,"*"),a.Vb(),a.Vb(),a.Wb(62,"div",33),a.Rb(63,"input",34),a.Wb(64,"i",35),a.Rb(65,"img",36),a.Vb(),a.Vb(),a.Vb(),a.Wb(66,"div",32),a.Wb(67,"label"),a.Jc(68,"End Date"),a.Wb(69,"span",22),a.Jc(70,"*"),a.Vb(),a.Vb(),a.Wb(71,"div",33),a.Rb(72,"input",37),a.Wb(73,"i",35),a.Rb(74,"img",36),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(75,"div",19),a.Wb(76,"div",20),a.Wb(77,"div",38),a.Wb(78,"button",39),a.Jc(79," Show Report "),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Hc(80,R,5,1,"div",40),a.Rb(81,"div",41),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(20),a.pc("formGroup",e.dynamicReportForm),a.Cb(9),a.pc("ngClass",a.uc(6,I,e.submitted&&e.f.reportBy.errors&&e.f.reportBy.errors.required)),a.Cb(24),a.pc("ngIf",e.showChooseOrg),a.Cb(4),a.pc("ngClass",a.uc(8,I,e.submitted&&e.f.reportStartDate.errors&&e.f.reportStartDate.errors.required)),a.Cb(9),a.pc("ngClass",a.uc(10,I,e.submitted&&e.f.reportEndDate.errors&&e.f.reportEndDate.errors.required)),a.Cb(14),a.pc("ngIf",e.showExportButton))},directives:[p.g,r.B,r.p,r.i,o.n,r.c,r.o,r.h,r.w,o.p,M],styles:[".bookings_btn-panel[_ngcontent-%COMP%]{padding:20px 2px 0;text-align:right}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1;z-index:100}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.corporate_input__placeholder-icon[_ngcontent-%COMP%]{position:relative;width:18px;bottom:28px;left:9px}table[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;border-collapse:collapse;width:50%;margin-left:300px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ddd;text-align:left;padding:8px}th[_ngcontent-%COMP%]{padding:20px}.minimise-icon[_ngcontent-%COMP%]{float:right}mat-selection-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto}.main_report-org__scroll[_ngcontent-%COMP%], mat-selection-list[_ngcontent-%COMP%]{width:100%;max-width:300px;border:1px solid rgba(0,0,0,.11)}.add-arrow-icon[_ngcontent-%COMP%]{position:relative;padding:31px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dual-list-choose-org[_ngcontent-%COMP%]{padding-top:20px;width:75%;margin:0 auto 20px}.seven.wide.field.dual-choose[_ngcontent-%COMP%]{margin-bottom:20px}.output-pivot[_ngcontent-%COMP%]{margin-top:30px;max-width:100%;overflow-x:auto}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.dynamic-report-header[_ngcontent-%COMP%]{position:relative;left:32%;color:rgba(0,0,0,.48);font-family:Roboto,sans-serif;font-weight:200}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.ui.form[_ngcontent-%COMP%]   .three.wide.field[_ngcontent-%COMP%]{margin-bottom:16px}.ui.divider[_ngcontent-%COMP%]{margin-bottom:30px}.fields[_ngcontent-%COMP%]{-webkit-box-pack:center;justify-content:center}.output-pivot[_ngcontent-%COMP%]{width:auto;margin:32px}.output-pivot[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{background:#fff;padding:30px 40px;box-shadow:0 2px 6px rgba(6,40,98,.1)!important;border-radius:4.96141px}.agent-name-booking[_ngcontent-%COMP%]{margin:auto 32px!important}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.eight.field.bookings_btn-panel[_ngcontent-%COMP%]{padding:0;text-align:right}@media(max-width:1440px){.result-block[_ngcontent-%COMP%]{width:auto;margin:24px}}@media(max-width:1280px){.result-block[_ngcontent-%COMP%]{width:auto;margin:20px}}"]}),W)}],S=((D=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ob({type:D}),D.\u0275inj=a.Nb({factory:function(t){return new(t||D)},imports:[[p.j.forChild(A)],p.j]}),D);i.d(e,"DynamicReportModule",(function(){return E}));var L,E=((L=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ob({type:L}),L.\u0275inj=a.Nb({factory:function(t){return new(t||L)},imports:[[o.c,r.v,r.k,S,w]]}),L)}}]);