function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{esL2:function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),r=n("3Pt+"),i=n("lDzL"),a=n("AytR"),s=n("fXoL"),c=n("7o2P"),l=n("8laU"),b=n("5eHb"),p=n("tyNb");function g(e,t){if(1&e&&(s.Wb(0,"option",39),s.Jc(1),s.Vb()),2&e){var n=t.$implicit;s.qc("value",n.AirportCode),s.Cb(1),s.Lc(" ",n.AirportCode,"")}}function d(e,t){if(1&e&&(s.Wb(0,"option",39),s.Jc(1),s.Vb()),2&e){var n=t.$implicit;s.qc("value",n.AirportCode),s.Cb(1),s.Lc(" ",n.AirportCode,"")}}function m(e,t){if(1&e&&(s.Wb(0,"option",39),s.Jc(1),s.Vb()),2&e){var n=t.$implicit;s.qc("value",n.name),s.Cb(1),s.Lc("",n.name," ")}}function u(e,t){1&e&&(s.Wb(0,"div",42),s.Wb(1,"div",43),s.Wb(2,"div",44),s.Jc(3,"Loading Report ..."),s.Vb(),s.Vb(),s.Rb(4,"p"),s.Vb())}function f(e,t){if(1&e&&(s.Wb(0,"div",40),s.Hc(1,u,5,0,"div",41),s.Vb()),2&e){var n=s.ic();s.Cb(1),s.pc("ngIf",n.bookingsLoader)}}function h(e,t){1&e&&(s.Wb(0,"div",45),s.Wb(1,"div",46),s.Jc(2,"Segment Log"),s.Vb(),s.Vb())}function _(e,t){1&e&&(s.Jc(0),s.jc(1,"date")),2&e&&s.Lc(" ",s.lc(1,1,t.row.trip_detail.booking.created,"dd/MM/yyyy")," ")}function C(e,t){1&e&&(s.Jc(0),s.jc(1,"date")),2&e&&s.Lc("",s.lc(1,1,t.value,"dd/MM/yyyy")," ")}function v(e,t){1&e&&(s.Jc(0),s.jc(1,"date")),2&e&&s.Lc("",s.lc(1,1,t.value,"dd/MM/yyyy")," ")}var O=function(){return{prop:"id",dir:"desc"}},k=function(e){return[e]};function M(e,t){if(1&e&&(s.Wb(0,"div",48),s.Wb(1,"ngx-datatable",49,50),s.Wb(3,"ngx-datatable-column",51),s.Hc(4,_,2,4,"ng-template",52),s.Vb(),s.Wb(5,"ngx-datatable-column",53),s.Hc(6,C,2,4,"ng-template",52),s.Vb(),s.Wb(7,"ngx-datatable-column",54),s.Hc(8,v,2,4,"ng-template",52),s.Vb(),s.Rb(9,"ngx-datatable-column",55),s.Rb(10,"ngx-datatable-column",56),s.Rb(11,"ngx-datatable-column",57),s.Rb(12,"ngx-datatable-column",58),s.Rb(13,"ngx-datatable-column",59),s.Rb(14,"ngx-datatable-column",60),s.Vb(),s.Vb()),2&e){var n=s.ic(2);s.Cb(1),s.pc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",10)("rows",n.NewSegment)("sortType","multi")("reorderable",!0)("sorts",s.uc(10,k,s.tc(9,O)))}}function w(e,t){if(1&e&&(s.Wb(0,"div",40),s.Hc(1,M,15,12,"div",47),s.Vb()),2&e){var n=s.ic();s.Cb(1),s.pc("ngIf",n.showSegmentReport)}}var P,x,V=function(e){return{error:e}},W=[{path:"",component:(P=function(){function e(t,n,o,i){var a=this;_classCallCheck(this,e),this.fb=t,this.commonService=n,this.newReportService=o,this.toastr=i,this.NewSegment=[],this.airlines=[],this.departures=[],this.arrivals=[],this.newSegmentReportObj={},this.totalSegment=0,this.pages=0,this.limit=15,this.pageIndex=1,this.showSegmentReport=!1,this.bookingsLoader=!1,this.submitted=!1,this.segmentReportForm=this.fb.group({selectDeparture:[""],selectArrival:[""],selectAirline:["",[r.z.required]],segmentStartDate:["",[r.z.required]],segmentEndDate:["",[r.z.required]]}),this.fetchAllAirportDetails=function(){a.bookingsLoader=!0,a.newReportService.GetAllAirportCode().subscribe((function(e){e.status?(a.bookingsLoader=!1,a.departures=e.result,a.arrivals=e.result):a.toastr.error("".concat(e.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))},this.segmentViewReport=function(){a.bookingsLoader=!0,a.submitted=!0,a.segmentReportForm.invalid||(a.newSegmentReportObj.departures=a.segmentReportForm.get("selectDeparture").value,a.newSegmentReportObj.arrivals=a.segmentReportForm.get("selectArrival").value,a.newSegmentReportObj.airline=a.segmentReportForm.get("selectAirline").value,a.newSegmentReportObj.start_date=a.segmentReportForm.get("segmentStartDate").value,a.newSegmentReportObj.end_date=a.segmentReportForm.get("segmentEndDate").value,a.newReportService.GetSearchedSegmentReports(a.newSegmentReportObj).subscribe((function(e){e.status?(a.bookingsLoader=!1,0!=e.result.length?(a.NewSegment=e.result,a.showSegmentReport=!0):(a.bookingsLoader=!1,a.toastr.info("There is no data to display","",{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"}))):(a.bookingsLoader=!1,a.toastr.error("".concat(e.message),"",{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"}))})))},this.resetReport=function(){a.bookingsLoader=!1,a.segmentReportForm.reset(),$(".ui.dropdown").dropdown("clear"),a.showSegmentReport=!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.fetchAllAirlines(),this.fetchAllAirportDetails()}},{key:"ngAfterViewInit",value:function(){$(document).ready((function(){$(".menu .item").tab(),$(".ui.dropdown").dropdown(),$(".dropdownTwo").dropdown({placeholder:"choose Departures"}),$(".dropdownThree").dropdown({placeholder:"choose Arrivals"})})),this.loadEndDate(),this.loadStartDate(),$(document).ready((function(){this._globals=localStorage.getItem("_globals");var e=JSON.parse(this._globals).token;$(".multiple_search").dropdown({type:"category",minCharacters:2,maxCharacters:3,responseAsync:!0,apiSettings:{url:a.a.serverURL+"/api/get-airports-cache/{query}",beforeXHR:function(t){return t.setRequestHeader("Authorization",e),t},onResponse:function(e){var t={success:!0,results:[]};return $.each(e.result,(function(e,n){t.results.push({name:n.AirportCode,value:n.AirportCode})})),t}}})}))}},{key:"loadStartDate",value:function(){var e=this;$((function(){$('input[name="segmentStartDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),autoUpdateInput:!1},(function(t,n,o){moment().diff(t,"years"),e.segmentReportForm.get("segmentStartDate").setValue(moment(t).format("DD-MM-YYYY"))}))}))}},{key:"loadEndDate",value:function(){var e=this;$((function(){$('input[name="segmentEndDate"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,minYear:1901,startDate:moment(),autoUpdateInput:!1},(function(t,n,o){moment().diff(t,"years"),e.segmentReportForm.get("segmentEndDate").setValue(moment(t).format("DD-MM-YYYY"))}))}))}},{key:"fetchAllAirlines",value:function(e,t){var n=this;this.bookingsLoader=!0,this.commonService.getAirlines().subscribe((function(e){"data"==e.type?(n.bookingsLoader=!1,n.airlines=e.airlines):n.toastr.error("".concat(e.msg),"".concat(e.msg),{timeOut:1e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"f",get:function(){return this.segmentReportForm.controls}}]),e}(),P.\u0275fac=function(e){return new(e||P)(s.Qb(r.f),s.Qb(c.a),s.Qb(l.a),s.Qb(b.b))},P.\u0275cmp=s.Kb({type:P,selectors:[["app-segment-report"]],decls:77,vars:16,consts:[[1,"ui","top","attached","tabular","menu"],["data-tab","first","routerLink","/report/booking-report",1,"item"],["data-tab","second","routerLink","/report/segment-report",1,"item","active"],["data-tab","third","routerLink","/report/mis-report",1,"item"],["data-tab","fourth","routerLink","/report/search-log-report",1,"item"],["data-tab","fifth","routerLink","/report/audit-report",1,"item"],["data-tab","sixth","routerLink","/report/ticket-report",1,"item"],["data-tab","seventh","routerLink","/report/dynamic-report",1,"item"],["data-tab","second",1,"ui","bottom","attached","tab","segment","active","tabContent-block"],[1,"ui","segment"],[1,"ui","fluid","container"],[1,"outer-basics"],[1,"ui","form","report-form",3,"formGroup","ngSubmit"],[1,"field"],[1,"outer-basicForm"],[1,"form-inner"],[1,"fields"],[1,"five","wide","field"],[1,"fa","fa-exclamation-circle","tooltip"],[1,"tooltiptext"],["formControlName","selectDeparture","multiple","",1,"ui","fluid","search","dropdownTwo","multiple_search"],["class","item",3,"value",4,"ngFor","ngForOf"],["formControlName","selectArrival","multiple","",1,"ui","fluid","search","dropdownThree","multiple_search"],[1,"four","wide","field",3,"ngClass"],[1,"mandatory"],["formControlName","selectAirline","required","",1,"ui","fluid","search","dropdown"],["value",""],[1,"five","wide","field","bookings_pickers",3,"ngClass"],[1,"ui","left","icon","input"],["type","text","placeholder","Start Date","formControlName","segmentStartDate","name","segmentStartDate","value","","required",""],[1,"icon"],["src","./../../../../assets/icons/calendar.svg",1,"bookings_input__placeholder-icon","cal"],["type","text","placeholder","Start Date","formControlName","segmentEndDate","name","segmentEndDate","value","","required",""],[1,"bookings_btn-panel"],["title","Reset",1,"ui","primary","reset","button",3,"click"],[1,"undo","icon"],[1,"ui","primary","button"],["class","result-block",4,"ngIf"],["class","fields agent-name-booking",4,"ngIf"],[1,"item",3,"value"],[1,"result-block"],["class","ui segment b2c-list-user-table__segment-loader",4,"ngIf"],[1,"ui","segment","b2c-list-user-table__segment-loader"],[1,"ui","active","inverted","dimmer"],[1,"ui","text","loader"],[1,"fields","agent-name-booking"],[1,"eight","wide","field","ui","small","header"],["class","user-table-list b2c-list-user-table",4,"ngIf"],[1,"user-table-list","b2c-list-user-table"],[1,"table",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","sortType","reorderable","sorts"],["table",""],["name","Booked Date"],["ngx-datatable-cell-template",""],["name","Departure Date","prop","segment_departure_date"],["name","Arrival Date","prop","segment_arrival_date"],["name","Departure Airport","prop","segment_departure_airport_name"],["name","Arrival Airport","prop","segment_arrival_airport_name"],["name","Operating Airline Name","prop","segment_operating_airline_name"],["name","Operating Airline Number","prop","segment_operating_flight_number"],["name","Marketing Airline Name","prop","segment_marketing_airline_name"],["name","Marketing Airline Number","prop","segment_marketing_flight_number"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Jc(2," Booking "),s.Vb(),s.Wb(3,"div",2),s.Jc(4,"Segment"),s.Vb(),s.Wb(5,"div",3),s.Jc(6,"MIS"),s.Vb(),s.Wb(7,"div",4),s.Jc(8,"Search Log"),s.Vb(),s.Wb(9,"div",5),s.Jc(10,"Audit Trail Log"),s.Vb(),s.Wb(11,"div",6),s.Jc(12,"Ticket"),s.Vb(),s.Wb(13,"div",7),s.Jc(14,"Dynamic Report"),s.Vb(),s.Vb(),s.Wb(15,"div",8),s.Wb(16,"div",9),s.Wb(17,"div",10),s.Wb(18,"div",11),s.Wb(19,"form",12),s.ec("ngSubmit",(function(e){return t.segmentViewReport()})),s.Wb(20,"div",13),s.Wb(21,"div",14),s.Wb(22,"div",15),s.Wb(23,"div",16),s.Wb(24,"div",17),s.Wb(25,"label"),s.Jc(26,"Departure "),s.Wb(27,"i",18),s.Wb(28,"span",19),s.Jc(29," Comma-separated list of airport code e.g. DXB, JED, LHR .Default ALL will be selected. "),s.Vb(),s.Vb(),s.Vb(),s.Wb(30,"select",20),s.Hc(31,g,2,2,"option",21),s.Vb(),s.Vb(),s.Wb(32,"div",17),s.Wb(33,"label"),s.Jc(34,"Arrival "),s.Wb(35,"i",18),s.Wb(36,"span",19),s.Jc(37," Comma-separated list of airport code e.g. DXB, JED, LHR .Default ALL will be selected. "),s.Vb(),s.Vb(),s.Vb(),s.Wb(38,"select",22),s.Hc(39,d,2,2,"option",21),s.Vb(),s.Vb(),s.Wb(40,"div",23),s.Wb(41,"label"),s.Jc(42,"Airline"),s.Wb(43,"span",24),s.Jc(44,"*"),s.Vb(),s.Vb(),s.Wb(45,"select",25),s.Wb(46,"option",26),s.Jc(47,"Airlines"),s.Vb(),s.Hc(48,m,2,2,"option",21),s.Vb(),s.Vb(),s.Vb(),s.Wb(49,"div",16),s.Wb(50,"div",27),s.Wb(51,"label"),s.Jc(52,"Start Date"),s.Wb(53,"span",24),s.Jc(54,"*"),s.Vb(),s.Vb(),s.Wb(55,"div",28),s.Rb(56,"input",29),s.Wb(57,"i",30),s.Rb(58,"img",31),s.Vb(),s.Vb(),s.Vb(),s.Wb(59,"div",27),s.Wb(60,"label"),s.Jc(61,"End Date"),s.Wb(62,"span",24),s.Jc(63,"*"),s.Vb(),s.Vb(),s.Wb(64,"div",28),s.Rb(65,"input",32),s.Wb(66,"i",30),s.Rb(67,"img",31),s.Vb(),s.Vb(),s.Vb(),s.Wb(68,"div",17),s.Wb(69,"div",33),s.Wb(70,"button",34),s.ec("click",(function(e){return t.resetReport()})),s.Rb(71,"i",35),s.Vb(),s.Wb(72,"button",36),s.Jc(73," View Report "),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Hc(74,f,2,1,"div",37),s.Hc(75,h,3,0,"div",38),s.Hc(76,w,2,1,"div",37),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(19),s.pc("formGroup",t.segmentReportForm),s.Cb(12),s.pc("ngForOf",t.departures),s.Cb(8),s.pc("ngForOf",t.arrivals),s.Cb(1),s.pc("ngClass",s.uc(10,V,t.submitted&&t.f.selectAirline.errors&&t.f.selectAirline.errors.required)),s.Cb(8),s.pc("ngForOf",t.airlines),s.Cb(2),s.pc("ngClass",s.uc(12,V,t.submitted&&t.f.segmentStartDate.errors&&t.f.segmentStartDate.errors.required)),s.Cb(9),s.pc("ngClass",s.uc(14,V,t.submitted&&t.f.segmentEndDate.errors&&t.f.segmentEndDate.errors.required)),s.Cb(15),s.pc("ngIf",t.bookingsLoader),s.Cb(1),s.pc("ngIf",t.showSegmentReport),s.Cb(1),s.pc("ngIf",t.showSegmentReport))},directives:[p.g,r.B,r.p,r.i,r.y,r.o,r.h,o.o,o.n,r.x,r.w,r.s,r.A,r.c,o.p,i.c,i.b,i.a],pipes:[o.f],styles:[".bookings_btn-panel[_ngcontent-%COMP%]{padding:20px 2px}.bookings_pickers[_ngcontent-%COMP%]   .input.bookings_datepicker[_ngcontent-%COMP%]{min-width:120px;max-width:138px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .ui.basic.floating.button[_ngcontent-%COMP%]{padding:10px!important;color:hsla(0,0%,59.6%,.6)!important;font-weight:300!important;line-height:11px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{opacity:1;z-index:1}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon[_ngcontent-%COMP%]{width:24px;margin-top:6px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .bookings_input__placeholder-icon.cal[_ngcontent-%COMP%]{width:18px;margin-top:10px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]{width:218px;border-right:0;border-top-left-radius:5px;border-bottom-left-radius:5px}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{margin-left:42px!important}.bookings_pickers[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .search.dropdown[_ngcontent-%COMP%]   .default.text[_ngcontent-%COMP%]{font-size:12px;margin-right:0!important;padding:8px 0 0 38px!important}.user-table-list.b2c-list-user-table[_ngcontent-%COMP%]{margin-top:16px}.tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.segment-report-header[_ngcontent-%COMP%]{position:relative;left:32%;color:rgba(0,0,0,.48);font-family:Roboto,sans-serif;font-weight:200}.outer-basic[_ngcontent-%COMP%]{margin-top:32px}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]{height:450px;background-color:#fff!important;border:0;box-shadow:none}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]   .ui.inverted.dimmer[_ngcontent-%COMP%]{background-color:transparent!important}.b2c-list-user-table__segment-loader[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{font-size:12px;color:#3867b1}.ui.form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-style:normal;font-weight:500;font-size:13px;line-height:13px;color:#181b20;margin:0 0 8px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:160px;background-color:rgba(0,0,0,.8);color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:100%;left:50%;margin-left:0}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.agent-name-booking[_ngcontent-%COMP%]{margin:auto 24px!important}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]{padding:0}.agent-name-booking[_ngcontent-%COMP%]   .eight.wide.field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.five.wide.field[_ngcontent-%COMP%]{padding-bottom:16px}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]{padding:24px;margin-bottom:24px}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]:last-child{margin-bottom:0}.ui.attached.segment.tabContent-block[_ngcontent-%COMP%]   .ui.segment[_ngcontent-%COMP%]   .report-form[_ngcontent-%COMP%]   .fields[_ngcontent-%COMP%]:last-child   .five.wide.field[_ngcontent-%COMP%]{padding-bottom:0}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin:24px 0}.bookings_btn-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 6px}"]}),P)}],R=((x=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:x}),x.\u0275inj=s.Nb({factory:function(e){return new(e||x)},imports:[[p.j.forChild(W)],p.j]}),x);n.d(t,"SegmentReportModule",(function(){return D}));var y,D=((y=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:y}),y.\u0275inj=s.Nb({factory:function(e){return new(e||y)},imports:[[o.c,r.v,r.k,i.d,R]]}),y)}}]);