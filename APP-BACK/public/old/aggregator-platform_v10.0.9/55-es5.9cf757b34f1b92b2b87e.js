function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{hrWY:function(t,e,r){"use strict";r.r(e);var a=r("ofXK"),i=r("xLiM"),o=r("fXoL"),n=r("AytR"),c=r("tk/3"),s=r("z6cu"),h=r("un/a"),l=r("JIr8"),p=function(){function t(e){_classCallCheck(this,t),this.http=e,this.url=n.a.serverURL,this.pager={},this.pageOfItems=[],this.httpOptions={headers:new c.e({"Content-Type":"application/json"})}}return _createClass(t,[{key:"GetAllFlightLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Flight-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllHotelLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Hotel-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllCarLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Car-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllActivityLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Activities-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllTransferLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Transfer-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllInsuranceLogs",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Insurance-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllAuditTrail",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Audit-Trail"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllSegments",value:function(t,e,r){return this.http.get("".concat(this.url,"/api/fetch-all-segment-details")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllOrganization",value:function(){return this.http.get("".concat(this.url,"/api/pos/fetch-active-pos")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"NewDynamicPivotTable",value:function(t){return this.http.post("".concat(this.url,"/api/dynamic-report-data"),t,this.httpOptions).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"searchReportBooking",value:function(t){return this.http.post("".concat(this.url,"/api/search-bookings-by-organisation"),t)}},{key:"searchTicketReport",value:function(t){return this.http.post("".concat(this.url,"/api/search-tickets-new"),t)}},{key:"GetAllAuditSearchReport",value:function(t){var e=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");return this.http.get("".concat(this.url,"/api/get-audit-trails?").concat(e)).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllAgents",value:function(){return this.http.get("".concat(this.url,"/api/fetch-all-organization"),{withCredentials:!0}).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllProducts",value:function(t,e,r){return this.http.get("".concat(this.url,"/api/get-active-products")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllSuppliers",value:function(t,e,r){return this.http.get("".concat(this.url,"/api/fetch-all-supplier")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllFlightPlatforms",value:function(){return this.http.get("".concat(this.url,"/api/Flight-Search-Log/count")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllFlightMonthlyReport",value:function(){return this.http.get("".concat(this.url,"/api/Flight-Search-Log/monthlwise")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetAllAirportCode",value:function(){return this.http.get("".concat(this.url,"/api/get-airports-cache")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"getAllBookingDetails",value:function(){return this.http.get("".concat(this.url,"/api/fetch_value/:id")).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"getFlightBookingDetails",value:function(t){return this.http.get("".concat(this.url,"/api/booking/").concat(t))}},{key:"GetSearchedSegmentReports",value:function(t){var e=new c.e;return e.append("Content-Type","application/json"),this.http.post("".concat(this.url,"/api/search-segments"),t,{headers:e}).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"GetFilteredFlightSearch",value:function(t){return this.http.post("".concat(this.url,"/api/fetch-all-Flight-Search-Log"),t).pipe(Object(h.a)(1),Object(l.a)(this.errorHandl))}},{key:"exportBooking",value:function(t){return this.http.post("".concat(this.url,"/api/export-booking-report"),t)}},{key:"exportSearchLog",value:function(t){return this.http.post("".concat(this.url,"/api/export-search-log-report"),t)}},{key:"exportTicket",value:function(t){return this.http.post("".concat(this.url,"/api/export-tickets-report"),t)}},{key:"errorHandl",value:function(t){var e;return e=t.error instanceof ErrorEvent?t.error.message:"Error Code: ".concat(t.status,"\nMessage: ").concat(t.message),console.log(e),Object(s.a)(e)}}]),t}();p.\u0275fac=function(t){return new(t||p)(o.ac(c.b))},p.\u0275prov=o.Mb({token:p,factory:p.\u0275fac,providedIn:"root"});var u,b,g=r("5eHb"),d=r("tyNb"),f=[{path:"",component:(u=function(){function t(e,r){var a=this;_classCallCheck(this,t),this.newReportService=e,this.toastr=r,this.newPieObj={},this.newAreaChartObj={},this.renderMISPieChart=function(){var t=[],e=JSON.parse(a.newPieObj);for(var r in e.FlightSearchLog)t.push({y:e.FlightSearchLog[r].count,name:e.FlightSearchLog[r].platform});new i.Chart("chartMISPie",{theme:"light2",animationEnabled:!0,exportEnabled:!0,title:{fontFamily:"Ubuntu",text:"Search Log Report"},data:[{type:"pie",toolTipContent:"<b>{name}</b>: ${y} (#percent%)",indexLabel:"{name} - #percent%",dataPoints:t}]}).render()},this.renderMISAreaChart=function(){var t=[],e=[],r=[],o=JSON.parse(a.newAreaChartObj);for(var n in o.FlightSearchLog.book)t.push({x:o.FlightSearchLog.book[n].month,y:o.FlightSearchLog.book[n].count});for(var n in o.FlightSearchLog.ticket)r.push({x:o.FlightSearchLog.ticket[n].month,y:o.FlightSearchLog.ticket[n].count});for(var n in o.FlightSearchLog.search)e.push({x:o.FlightSearchLog.search[n].month,y:o.FlightSearchLog.search[n].count});new i.Chart("chartMISArea",{animationEnabled:!0,exportEnabled:!0,title:{fontFamily:"Ubuntu",text:"Current Year Search Log Report"},axisY:{title:"Count"},axisX:{title:"Month"},toolTip:{shared:!0},data:[{type:"stackedArea",showInLegend:!0,toolTipContent:'<span style="color:#4F81BC"><strong>{name}: </strong></span> {y}',name:"Book",dataPoints:t},{type:"stackedArea",name:"ticket",toolTipContent:'<span style="color:#C0504E"><strong>{name}: </strong></span> {y}<br><b>Total:<b> #total',showInLegend:!0,dataPoints:r},{type:"stackedArea",name:"Search",toolTipContent:'<span style="color:#C0504E"><strong>{name}: </strong></span> {y}<br><b>Total:<b> #total',showInLegend:!0,dataPoints:e}]}).render()}}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchAllFlightPlatforms(),this.fetchAllMonthlyReport()}},{key:"fetchAllFlightPlatforms",value:function(){var t=this;this.newReportService.GetAllFlightPlatforms().subscribe((function(e){200==e.status?0!=e.FlightSearchLog.length?(t.newPieObj=JSON.stringify(e),t.renderMISPieChart()):t.toastr.info("There is no data available","",{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"}):t.toastr.error("".concat(e.msg),"".concat(e.msg),{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}},{key:"fetchAllMonthlyReport",value:function(){var t=this;this.newReportService.GetAllFlightMonthlyReport().subscribe((function(e){200==e.status?(t.newAreaChartObj=JSON.stringify(e),t.renderMISAreaChart()):t.toastr.error("".concat(e.msg),"".concat(e.msg),{timeOut:2e3,progressBar:!1,positionClass:"toast-bottom-right"})}))}}]),t}(),u.\u0275fac=function(t){return new(t||u)(o.Qb(p),o.Qb(g.b))},u.\u0275cmp=o.Kb({type:u,selectors:[["app-mis-report"]],decls:24,vars:0,consts:[[1,"ui","top","attached","tabular","menu"],["data-tab","first","routerLink","/report/booking-report",1,"item"],["data-tab","second","routerLink","/report/segment-report",1,"item"],["data-tab","third","routerLink","/report/mis-report",1,"item","active"],["data-tab","fourth","routerLink","/report/search-log-report",1,"item"],["data-tab","fifth","routerLink","/report/audit-report",1,"item"],["data-tab","sixth","routerLink","/report/ticket-report",1,"item"],["data-tab","seventh","routerLink","/report/dynamic-report",1,"item"],["data-tab","third",1,"ui","bottom","attached","tab","segment","tabContent-block","active"],[1,"ui","segment"],[1,"ui","fluid","container"],[1,"outer-basics"],[1,"outer-basicForm"],[1,"form-inner","result-block"],["id","chartMISPie"],["id","chartMISArea",1,"area-chart"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Jc(2," Booking "),o.Vb(),o.Wb(3,"div",2),o.Jc(4,"Segment"),o.Vb(),o.Wb(5,"div",3),o.Jc(6,"MIS"),o.Vb(),o.Wb(7,"div",4),o.Jc(8,"Search Log"),o.Vb(),o.Wb(9,"div",5),o.Jc(10,"Audit Trail Log"),o.Vb(),o.Wb(11,"div",6),o.Jc(12,"Ticket"),o.Vb(),o.Wb(13,"div",7),o.Jc(14,"Dynamic Report"),o.Vb(),o.Vb(),o.Wb(15,"div",8),o.Wb(16,"div",9),o.Wb(17,"div",10),o.Wb(18,"div",11),o.Wb(19,"div",12),o.Wb(20,"div",13),o.Rb(21,"div",14),o.Rb(22,"br"),o.Rb(23,"div",15),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb())},directives:[d.g],styles:[".tab.segment[_ngcontent-%COMP%]{box-shadow:3px 3px 4px 0 rgba(0,0,0,.4)}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin-top:25px}.ui.bottom.attached.active.tab.segment[_ngcontent-%COMP%]{border-bottom-left-radius:17px;border-bottom-right-radius:17px;border-top-right-radius:17px}.ui.top.attached.menu[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{border-radius:.28571429rem 0 0 0;border-top-right-radius:15px!important}.area-chart[_ngcontent-%COMP%]{height:370px;position:relative}.mis-report-header[_ngcontent-%COMP%]{position:relative;left:32%;color:rgba(0,0,0,.48);font-family:Roboto,sans-serif;font-weight:200}#chartMISPie[_ngcontent-%COMP%]{height:370px;width:100%}.ui.top.attached.tabular.menu[_ngcontent-%COMP%]{margin:24px 0}"]}),u)}],m=((b=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:b}),b.\u0275inj=o.Nb({factory:function(t){return new(t||b)},imports:[[d.j.forChild(f)],d.j]}),b);r.d(e,"MISReportModule",(function(){return k}));var v,k=((v=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ob({type:v}),v.\u0275inj=o.Nb({factory:function(t){return new(t||v)},imports:[[a.c,m]]}),v)}}]);